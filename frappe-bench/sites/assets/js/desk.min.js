
/*
 *	/home/pitambar/Documents/frappenew/frappe-bench/apps/frappe/frappe/public/js/lib/jquery/jquery-ui.min.js
 */
/*! jQuery UI - v1.11.2 - 2015-01-19
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, selectable.js, autocomplete.js, datepicker.js, menu.js, slider.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var a,n,o,r=t.nodeName.toLowerCase();return"area"===r?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(o=e("img[usemap='#"+n+"']")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function a(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(d.inline?d.dpDiv.parent()[0]:d.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),a=isNaN(s);return(a||s>=0)&&t(i,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(n,s(this,t)+"px")})},e.fn["outer"+i]=function(t,a){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(n,s(this,t,!0,a)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,a=e(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i,s){var a,n=e.plugins[t];if(n&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;n.length>a;a++)e.options[n[a][0]]&&n[a][1].apply(e.element,i)}};var h=0,l=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,a,n;for(n=0;null!=(a=i[n]);n++)try{s=e._data(a,"events"),s&&s.remove&&e(a).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var a,n,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],a=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},n=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,n,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,n=this._superApply;return this._super=e,this._superApply=a,t=s.apply(this,arguments),this._super=i,this._superApply=n,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:a}),n?(e.each(n._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,a=l.call(arguments,1),n=0,o=a.length;o>n;n++)for(i in a[n])s=a[n][i],a[n].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var n="string"==typeof a,o=l.call(arguments,1),r=this;return a=!n&&o.length?e.widget.extend.apply(null,[a].concat(o)):a,n?this.each(function(){var i,n=e.data(this,s);return"instance"===a?(r=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,o),i!==n&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))}),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,a,n,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(a=o[t]=e.widget.extend({},this.options[t]),n=0;s.length-1>n;n++)a[s[n]]=a[s[n]]||{},a=a[s[n]];if(t=s.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var a,n=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=a=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,a=this.widget()),e.each(s,function(s,o){function r(){return t||n.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?n[o]:o).apply(n,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+n.eventNamespace,u=h[2];u?a.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var o,r=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),o&&e.effects&&e.effects.effect[r]?s[t](a):r!==t&&s[r]?s[r](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}}),e.widget;var u=!1;e(document).mouseup(function(){u=!1}),e.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),u=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,n,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=s.children()[0];return e("body").append(s),t=n.offsetWidth,s.css("overflow","scroll"),i=n.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),a=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),a=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:a,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||a?i.width():i.outerWidth(),height:s||a?i.height():i.outerHeight()}}},e.fn.position=function(a){if(!a||!a.of)return f.apply(this,arguments);a=e.extend({},a);var p,m,g,v,y,b,_=e(a.of),x=e.position.getWithinInfo(a.within),w=e.position.getScrollInfo(x),k=(a.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(a.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(a[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],a[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===a.at[0]?y.left+=m:"center"===a.at[0]&&(y.left+=m/2),"bottom"===a.at[1]?y.top+=g:"center"===a.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,N=e.extend({},y),M=t(T.my,u.outerWidth(),u.outerHeight());"right"===a.my[0]?N.left-=d:"center"===a.my[0]&&(N.left-=d/2),"bottom"===a.my[1]?N.top-=c:"center"===a.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],n||(N.left=h(N.left),N.top=h(N.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+M[0],p[1]+M[1]],my:a.my,at:a.at,within:x,elem:u})}),a.using&&(l=function(e){var t=v.left-N.left,i=t+m-d,s=v.top-N.top,n=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>n?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+n)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(n))?"horizontal":"vertical",a.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,r=e.left-t.collisionPosition.marginLeft,h=a-r,l=r+t.collisionWidth-n-a;t.collisionWidth>n?h>0&&0>=l?(i=e.left+h+t.collisionWidth-n-a,e.left+=h-i):e.left=l>0&&0>=h?a:h>l?a+n-t.collisionWidth:a:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,r=e.top-t.collisionPosition.marginTop,h=a-r,l=r+t.collisionHeight-n-a;t.collisionHeight>n?h>0&&0>=l?(i=e.top+h+t.collisionHeight-n-a,e.top+=h-i):e.top=l>0&&0>=h?a:h>l?a+n-t.collisionHeight:a:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,a=t.within,n=a.offset.left+a.scrollLeft,o=a.width,h=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-n,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,a=t.within,n=a.offset.top+a.scrollTop,o=a.height,h=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-n,e.top+p+f+m>u&&(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,a,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",a=e(h).offset().left,n=a>10&&11>a,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,a=e.data(this,"selectable-item");return a?(s=!t.metaKey&&!t.ctrlKey||!a.$element.hasClass("ui-selected"),a.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),a.unselecting=!s,a.selecting=s,a.selected=s,s?i._trigger("selecting",t,{selecting:a.element}):i._trigger("unselecting",t,{unselecting:a.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,a=this.options,n=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return n>r&&(i=r,r=n,n=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:n,top:o,width:r-n,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===a.tolerance?l=!(i.left>r||n>i.right||i.top>h||o>i.bottom):"fit"===a.tolerance&&(l=i.left>n&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,a,n,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",a=String.fromCharCode(t.keyCode),n=!1,clearTimeout(this.filterTimer),a===s?n=!0:a=s+a,i=this._filterMenuItems(a),i=n&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(a=String.fromCharCode(t.keyCode),i=this._filterMenuItems(a)),i.length?(this.focus(t,i),this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,a=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+a).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=n.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,a,n,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-s,n=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>a?this.activeMenu.scrollTop(n+a):a+r>o&&this.activeMenu.scrollTop(n+a-o+r))
},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,a;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-a}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,a;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+a>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,a=this.element[0].nodeName.toLowerCase(),n="textarea"===a,o="input"===a;this.isMultiLine=n?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[n||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var n=e.ui.keyCode;switch(a.keyCode){case n.PAGE_UP:t=!0,this._move("previousPage",a);break;case n.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case n.UP:t=!0,this._keyEvent("previous",a);break;case n.DOWN:t=!0,this._keyEvent("next",a);break;case n.ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case n.TAB:this.menu.active&&this.menu.select(a);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var a=e.ui.keyCode;switch(s.keyCode){case a.PAGE_UP:this._move("previousPage",s);break;case a.PAGE_DOWN:this._move("nextPage",s);break;case a.UP:this._keyEvent("previous",s);break;case a.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,a;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(a=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:a})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(a.value),s=i.item.attr("aria-label")||a.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete,e.extend(e.ui,{datepicker:{version:"1.11.2"}});var d;e.extend(a.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,a,n;s=t.nodeName.toLowerCase(),a="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),a),n.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,n):a&&this._inlineDatepicker(t,n)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,a,n,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(a=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:a,title:a}):a)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,a,n=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,a=0;e.length>a;a++)e[a].length>i&&(i=e[a].length,s=a);return s},n.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,a,n){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),a=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(a.append.remove(),a.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=a.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=a.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var a,n,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(a=i||{},"string"==typeof i&&(a={},a[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,a),null!==o&&void 0!==a.dateFormat&&void 0===a.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==a.dateFormat&&void 0===a.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in a&&(a.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,n),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,a,n=e.datepicker._getInst(t.target),o=!0,r=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),a[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,a[0]),i=e.datepicker._get(n,"onSelect"),i?(s=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[s,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,a=e.datepicker._getInst(t.target);return e.datepicker._get(a,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(a){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,a,n,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(i,"beforeShow"),n=a?a.apply(t,[t,i]):{},n!==!1&&(r(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,d=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),a=s[1],n=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",n*a+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var a=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?a-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>h&&h>a?Math.abs(i.left+a-h):0),i.top-=Math.min(i.top,i.top+n>l&&l>n?Math.abs(n+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),a=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,a,n,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),a=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,a):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,a),i||a(),this._datepickerShowing=!1,n=this._get(o,"onClose"),n&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var a=e(t),n=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(n,i+("M"===s?this._get(n,"showCurrentAtPos"):0),s),this._updateDatepicker(n))},_gotoToday:function(t){var i,s=e(t),a=this._getInst(s[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var a=e(t),n=this._getInst(a[0]);n["selected"+("M"===s?"Month":"Year")]=n["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(a)},_selectDay:function(t,i,s,a){var n,o=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(n=this._getInst(o[0]),n.selectedDay=n.currentDay=e("a",a).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=s,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,a=e(t),n=this._getInst(a[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),s=this._get(n,"onSelect"),s?s.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,a,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),a=this.formatDate(i,s,this._getFormatConfig(t)),e(n).each(function(){e(this).val(a)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var a,n,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>a+1&&t.charAt(a+1)===e;return i&&a++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a="y"===e?s:1,n=RegExp("^\\d{"+a+","+s+"}"),o=i.substring(h).match(n);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,a){var n=-1,o=e.map(_(t)?a:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(n=t[0],h+=s.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(a))throw"Unexpected literal at position "+h;h++};for(a=0;t.length>a;a++)if(b)"'"!==t.charAt(a)||_("'")?k():b=!1;else switch(t.charAt(a)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(n=this._getDaysInMonth(m,g-1),n>=v)break;g++,v-=n}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),a,n);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,a=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||a("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),n=a,o=this._getFormatConfig(e);try{n=this.parseDate(i,s,o)||a}catch(r){s=t?"":s}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=s?n.getDate():0,e.currentMonth=s?n.getMonth():0,e.currentYear=s?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))
},_determineDate:function(t,i,s){var a=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var a=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=a.getFullYear(),o=a.getMonth(),r=a.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(n,o));break;case"y":case"Y":n+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(n,o))}l=h.exec(i)}return new Date(n,o,r)},o=null==i||""===i?s:"string"==typeof i?n(i):"number"==typeof i?isNaN(i)?s:a(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,a=e.selectedMonth,n=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,a,n,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,N,M,C,A,P,I,z,H,F,E,W,L,O,j=new Date,R=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),U=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),G=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-U,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-V[0]*V[1]+1,$.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",a=this._get(e,"nextText"),a=K?this.formatDate(a,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):a,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:R,o=K?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;V[0]>w;w++){for(k="",this.maxRows=4,T=0;V[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case V[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?n:s:"")+(/all|right/.test(S)&&0===w?Y?s:n:"")+this._generateMonthYearHeader(e,Z,et,Q,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)C=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(N+=M+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),z=G?this.maxRows>I?this.maxRows:I:I,this.maxRows=z,H=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;z>F;F++){for(N+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)W=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],L=H.getMonth()!==Z,O=L&&!y||!W[0]||Q&&Q>H||$&&H>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+W[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":O?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);N+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),N+="</tbody></table>"+(G?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=N}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,a,n,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(n||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=a&&a.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||a.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!n&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!n&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),a=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(s,a))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,a,n)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return s&&a>s?s:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var a=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,s+(0>t?t:a[0]*a[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,s,a=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!a||t.getTime()>=a.getTime())&&(!n||t.getTime()<=n.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new a,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.2",e.datepicker,e.widget("ui.slider",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),t=a.length;i>t;t++)o.push(n);this.handles=a.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,a,n,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(a>i||a===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(a=i,n=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,n.addClass("ui-state-active").focus(),h=n.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-n.width()/2,top:t.pageY-h.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,a,n;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),a=this._valueMax()-this._valueMin(),n=this._valueMin()+s*a,this._trimAlignValue(n)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,a,n;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(a=this.values(),a[t]=i,n=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),s=this.values(t?0:1),n!==!1&&this.values(t,i))):i!==this.value()&&(n=this._trigger("slide",e,{handle:this.handles[t],value:i}),n!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,a,n;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,a=arguments[0],n=0;s.length>n;n+=1)s[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_setOption:function(t,i){var s,a=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;a>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-e},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,a,n,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),a=this._valueMin(),n=this._valueMax(),i=n!==a?100*((s-a)/(n-a)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,a,n,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(n=this.options.step,s=a=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;a=this._trimAlignValue(s+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;a=this._trimAlignValue(s-n)}this._slide(t,o,a)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})});

/*
 *	/home/pitambar/Documents/frappenew/frappe-bench/apps/frappe/frappe/public/js/lib/Sortable.min.js
 */
/*! Sortable 1.0.0 - MIT | git://github.com/rubaxa/Sortable.git */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){this.el=a,this.options=b=b||{};var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)}};for(var e in d)!(e in b)&&(b[e]=d[e]);var g=b.group;g&&"object"==typeof g||(g=b.group={name:g}),["pull","put"].forEach(function(a){a in g||(g[a]=!0)}),K.forEach(function(d){b[d]=c(this,b[d]||L),f(a,d.substr(2).toLowerCase(),b[d])},this),a[D]=g.name+" "+(g.put.join?g.put.join(" "):"");for(var h in this)"_"===h.charAt(0)&&(this[h]=c(this,this[h]));f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),H&&f(a,"selectstart",this._onTapStart),f(a,"dragover",this._onDragOver),f(a,"dragenter",this._onDragOver),O.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){t&&t.state!==a&&(i(t,"display",a?"none":""),!a&&t.state&&u.insertBefore(t,q),t.state=a)}function c(a,b){var c=N.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(N.call(arguments)))}}function d(a,b,c){if(a){c=c||F,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function e(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,!1)}function g(a,b,c){a.removeEventListener(b,c,!1)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return F.defaultView&&F.defaultView.getComputedStyle?c=F.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function k(a){a.draggable=!1}function l(){I=!1}function m(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5&&c}function n(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function o(a){for(var b=0;a&&(a=a.previousElementSibling)&&"TEMPLATE"!==a.nodeName;)b++;return b}function p(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}var q,r,s,t,u,v,w,x,y,z,A,B,C={},D="Sortable"+(new Date).getTime(),E=window,F=E.document,G=E.parseInt,H=!!F.createElement("div").dragDrop,I=!1,J=function(a,b,c,d,e,f){var g=F.createEvent("Event");g.initEvent(b,!0,!0),g.item=c||a,g.from=d||a,g.oldIndex=e,g.newIndex=f,a.dispatchEvent(g)},K="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),L=function(){},M=Math.abs,N=[].slice,O=[];return a.prototype={constructor:a,_dragStarted:function(){h(q,this.options.ghostClass,!0),a.active=this,J(u,"start",q,u,r)},_onTapStart:function(a){var b=a.type,c=a.touches&&a.touches[0],e=(c||a).target,g=e,h=this.options,l=this.el,m=h.filter;if(!("mousedown"===b&&0!==a.button||h.disabled)){if(h.handle&&(e=d(e,h.handle,l)),e=d(e,h.draggable,l),r=o(e),"function"==typeof m){if(m.call(this,a,e,this))return J(g,"filter",e,l,r),a.preventDefault(),void 0}else if(m&&(m=m.split(",").some(function(a){return a=d(g,a.trim(),l),a?(J(a,"filter",e,l,r),!0):void 0})))return a.preventDefault(),void 0;if(e&&!q&&e.parentNode===l){"selectstart"===b&&e.dragDrop(),A=a,u=this.el,q=e,w=q.nextSibling,z=this.options.group,q.draggable=!0,h.ignore.split(",").forEach(function(a){j(e,a.trim(),k)}),c&&(A={target:e,clientX:c.clientX,clientY:c.clientY},this._onDragStart(A,!0),a.preventDefault()),f(F,"mouseup",this._onDrop),f(F,"touchend",this._onDrop),f(F,"touchcancel",this._onDrop),f(q,"dragend",this),f(u,"dragstart",this._onDragStart),f(F,"dragover",this);try{F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch(n){}"clone"==z.pull&&(t=q.cloneNode(!0),i(t,"display","none"),u.insertBefore(t,q))}}},_emulateDragOver:function(){if(B){i(s,"display","none");var a=F.elementFromPoint(B.clientX,B.clientY),b=a,c=this.options.group.name,d=O.length;if(b)do{if((" "+b[D]+" ").indexOf(c)>-1){for(;d--;)O[d]({clientX:B.clientX,clientY:B.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);i(s,"display","")}},_onTouchMove:function(a){if(A){var b=a.touches[0],c=b.clientX-A.clientX,d=b.clientY-A.clientY,e="translate3d("+c+"px,"+d+"px,0)";B=b,i(s,"webkitTransform",e),i(s,"mozTransform",e),i(s,"msTransform",e),i(s,"transform",e),this._onDrag(b),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),b){var e,g=q.getBoundingClientRect(),h=i(q);s=q.cloneNode(!0),i(s,"top",g.top-G(h.marginTop,10)),i(s,"left",g.left-G(h.marginLeft,10)),i(s,"width",g.width),i(s,"height",g.height),i(s,"opacity","0.8"),i(s,"position","fixed"),i(s,"zIndex","100000"),u.appendChild(s),e=s.getBoundingClientRect(),i(s,"width",2*g.width-e.width),i(s,"height",2*g.height-e.height),f(F,"touchmove",this._onTouchMove),f(F,"touchend",this._onDrop),f(F,"touchcancel",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else c.effectAllowed="move",d.setData&&d.setData.call(this,c,q),f(F,"drop",this);if(v=d.scroll,v===!0){v=u;do if(v.offsetWidth<v.scrollWidth||v.offsetHeight<v.scrollHeight)break;while(v=v.parentNode)}setTimeout(this._dragStarted,0)},_onDrag:p(function(a){if(u&&this.options.scroll){var b,c,d=this.options,e=d.scrollSensitivity,f=d.scrollSpeed,g=a.clientX,h=a.clientY,i=window.innerWidth,j=window.innerHeight,k=(e>=i-g)-(e>=g),l=(e>=j-h)-(e>=h);k||l?b=E:v&&(b=v,c=v.getBoundingClientRect(),k=(M(c.right-g)<=e)-(M(c.left-g)<=e),l=(M(c.bottom-h)<=e)-(M(c.top-h)<=e)),(C.vx!==k||C.vy!==l||C.el!==b)&&(C.el=b,C.vx=k,C.vy=l,clearInterval(C.pid),b&&(C.pid=setInterval(function(){b===E?E.scrollTo(E.scrollX+k*f,E.scrollY+l*f):(l&&(b.scrollTop+=l*f),k&&(b.scrollLeft+=k*f))},24)))}},30),_onDragOver:function(a){var c,e,f,g=this.el,h=this.options,j=h.group,k=j.put,n=z===j,o=h.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),a.stopPropagation()),!I&&z&&(n?o||(f=!u.contains(q)):z.pull&&k&&(z.name===j.name||k.indexOf&&~k.indexOf(z.name)))&&(void 0===a.rootEl||a.rootEl===this.el)){if(c=d(a.target,h.draggable,g),e=q.getBoundingClientRect(),f)return b(!0),t||w?u.insertBefore(q,t||w):o||u.appendChild(q),void 0;if(0===g.children.length||g.children[0]===s||g===a.target&&(c=m(g,a))){if(c){if(c.animated)return;r=c.getBoundingClientRect()}b(n),g.appendChild(q),this._animate(e,q),c&&this._animate(r,c)}else if(c&&!c.animated&&c!==q&&void 0!==c.parentNode[D]){x!==c&&(x=c,y=i(c));var p,r=c.getBoundingClientRect(),v=r.right-r.left,A=r.bottom-r.top,B=/left|right|inline/.test(y.cssFloat+y.display),C=c.offsetWidth>q.offsetWidth,E=c.offsetHeight>q.offsetHeight,F=(B?(a.clientX-r.left)/v:(a.clientY-r.top)/A)>.5,G=c.nextElementSibling;I=!0,setTimeout(l,30),b(n),p=B?c.previousElementSibling===q&&!C||F&&C:G!==q&&!E||F&&E,p&&!G?g.appendChild(q):c.parentNode.insertBefore(q,p?G:c),this._animate(e,q),this._animate(r,c)}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){i(b,"transition",""),b.animated=!1},c)}},_offUpEvents:function(){g(F,"mouseup",this._onDrop),g(F,"touchmove",this._onTouchMove),g(F,"touchend",this._onDrop),g(F,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el;if(clearInterval(this._loopId),clearInterval(C.pid),g(F,"drop",this),g(F,"dragover",this),g(c,"dragstart",this._onDragStart),this._offUpEvents(),b){if(b.preventDefault(),b.stopPropagation(),s&&s.parentNode.removeChild(s),q){g(q,"dragend",this);var d=o(q);k(q),h(q,this.options.ghostClass,!1),u!==q.parentNode?(J(q.parentNode,"sort",q,u,r,d),J(u,"sort",q,u,r,d),J(q,"add",q,u,r,d),J(u,"remove",q,u,r,d)):q.nextSibling!==w&&(J(u,"update",q,u,r,d),J(u,"sort",q,u,r,d),t&&t.parentNode.removeChild(t)),a.active&&J(u,"end",q,u,r,d)}u=q=s=w=t=A=B=x=y=z=a.active=null,this.save()}},handleEvent:function(a){var b=a.type;"dragover"===b?(this._onDrag(a),e(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],c=this.el.children,e=0,f=c.length;f>e;e++)a=c[e],d(a,this.options.draggable,this.el)&&b.push(a.getAttribute("data-id")||n(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){var f=c.children[e];d(f,this.options.draggable,c)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return d(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:(c[a]=b,void 0)},destroy:function(){var a=this.el,b=this.options;K.forEach(function(c){g(a,c.substr(2).toLowerCase(),b[c])}),g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"selectstart",this._onTapStart),g(a,"dragover",this._onDragOver),g(a,"dragenter",this._onDragOver),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),O.splice(O.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},a.utils={on:f,off:g,css:i,find:j,bind:c,is:function(a,b){return!!d(a,b,a)},throttle:p,closest:d,toggleClass:h,dispatchEvent:J,index:o},a.version="1.0.0",a.create=function(b,c){return new a(b,c)},a});

/*
 *	/home/pitambar/Documents/frappenew/frappe-bench/apps/frappe/frappe/public/js/lib/tag-it.min.js
 */
(function(b){b.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var a=
this;this.element.is("input")?(this.tagList=b("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.css("display","none")):this.tagList=this.element.find("ul, ol").andSelf().last();this.tagInput=b('<input type="text" />');this.options.readOnly&&this.tagInput.attr("disabled","disabled");this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex);this.options.placeholderText&&this.tagInput.attr("placeholder",
this.options.placeholderText);this.options.autocomplete.source||(this.options.autocomplete.source=function(a,c){var d=a.term.toLowerCase(),e=b.grep(this.options.availableTags,function(a){return 0===a.toLowerCase().indexOf(d)});this.options.allowDuplicates||(e=this._subtractArray(e,this.assignedTags()));c(e)});this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(){a._showAutocomplete()}),"undefined"===typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0));
b.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=b.proxy(this.options.autocomplete.source,this));b.isFunction(this.options.tagSource)&&(this.options.tagSource=b.proxy(this.options.tagSource,this));this.tagList.addClass("tagit").append(b('<li class="tagit-new"></li>').append(this.tagInput)).click(function(c){var d=b(c.target);d.hasClass("tagit-label")?(d=d.closest(".tagit-choice"),d.hasClass("removed")||a._trigger("onTagClicked",
c,{tag:d,tagLabel:a.tagLabel(d)})):a.tagInput.focus()});var d=!1;if(this.options.singleField)if(this.options.singleFieldNode){var c=b(this.options.singleFieldNode),e=c.val().split(this.options.singleFieldDelimiter);c.val("");b.each(e,function(b,c){a.createTag(c,null,!0);d=!0})}else this.options.singleFieldNode=b('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);d||this.tagList.children("li").each(function(){b(this).hasClass("tagit-new")||
(a.createTag(b(this).text(),b(this).attr("class"),!0),b(this).remove())});this.tagInput.keydown(function(c){if(c.which==b.ui.keyCode.BACKSPACE&&""===a.tagInput.val()){var d=a._lastTag();!a.options.removeConfirmation||d.hasClass("remove")?a.removeTag(d):a.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else a.options.removeConfirmation&&a._lastTag().removeClass("remove ui-state-highlight");if(c.which===b.ui.keyCode.COMMA||c.which===b.ui.keyCode.ENTER||c.which==b.ui.keyCode.TAB&&
""!==a.tagInput.val()||c.which==b.ui.keyCode.SPACE&&!0!==a.options.allowSpaces&&('"'!=b.trim(a.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==b.trim(a.tagInput.val()).charAt(0)&&'"'==b.trim(a.tagInput.val()).charAt(b.trim(a.tagInput.val()).length-1)&&0!==b.trim(a.tagInput.val()).length-1))c.which===b.ui.keyCode.ENTER&&""===a.tagInput.val()||c.preventDefault(),a.tagInput.data("autocomplete-open")||a.createTag(a._cleanedInput())}).blur(function(){a.tagInput.data("autocomplete-open")||a.createTag(a._cleanedInput())});
if(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)c={select:function(b,c){a.createTag(c.item.value);return!1}},b.extend(c,this.options.autocomplete),c.source=this.options.tagSource||c.source,this.tagInput.autocomplete(c).bind("autocompleteopen",function(){a.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose",function(){a.tagInput.data("autocomplete-open",!1)})},_cleanedInput:function(){return b.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},
_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var a=this,d=[];this.options.singleField?(d=b(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===d[0]&&(d=[])):this._tags().each(function(){d.push(a.tagLabel(this))});return d},_updateSingleTagsField:function(a){b(this.options.singleFieldNode).val(a.join(this.options.singleFieldDelimiter)).trigger("change")},
_subtractArray:function(a,d){for(var c=[],e=0;e<a.length;e++)-1==b.inArray(a[e],d)&&c.push(a[e]);return c},tagLabel:function(a){return this.options.singleField?b(a).find(".tagit-label:first").text():b(a).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(a){var d=this,c=null;this._tags().each(function(){if(d._formatStr(a)==d._formatStr(d.tagLabel(this)))return c=b(this),!1});return c},_isNew:function(a){return!this._findTagByLabel(a)},
_formatStr:function(a){return this.options.caseSensitive?a:b.trim(a.toLowerCase())},_effectExists:function(a){return Boolean(b.effects&&(b.effects[a]||b.effects.effect&&b.effects.effect[a]))},createTag:function(a,d,c){var e=this;a=b.trim(a);this.options.preprocessTag&&(a=this.options.preprocessTag(a));if(""===a)return!1;if(!this.options.allowDuplicates&&!this._isNew(a))return a=this._findTagByLabel(a),!1!==this._trigger("onTagExists",null,{existingTag:a,duringInitialization:c})&&this._effectExists("highlight")&&
a.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:c}),!1;var g=b(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(a),f=b("<li></li>").addClass("tagit-choice").addClass(d).append(g);this.options.readOnly?f.addClass("tagit-choice-read-only"):(f.addClass("tagit-choice-editable"),d=b("<span></span>").addClass("ui-icon ui-icon-close"),
d=b('<a><span class="text-icon">\u00d7</span></a>').addClass("tagit-close").append(d).click(function(){e.removeTag(f)}),f.append(d));this.options.singleField||(g=g.html(),f.append('<input type="hidden" style="display:none;" value="'+g+'" name="'+this.options.fieldName+'" />'));!1!==this._trigger("beforeTagAdded",null,{tag:f,tagLabel:this.tagLabel(f),duringInitialization:c})&&(this.options.singleField&&(g=this.assignedTags(),g.push(a),this._updateSingleTagsField(g)),this._trigger("onTagAdded",null,
f),this.tagInput.val(""),this.tagInput.parent().before(f),this._trigger("afterTagAdded",null,{tag:f,tagLabel:this.tagLabel(f),duringInitialization:c}),this.options.showAutocompleteOnFocus&&!c&&setTimeout(function(){e._showAutocomplete()},0))},removeTag:function(a,d){d="undefined"===typeof d?this.options.animate:d;a=b(a);this._trigger("onTagRemoved",null,a);if(!1!==this._trigger("beforeTagRemoved",null,{tag:a,tagLabel:this.tagLabel(a)})){if(this.options.singleField){var c=this.assignedTags(),e=this.tagLabel(a),
c=b.grep(c,function(a){return a!=e});this._updateSingleTagsField(c)}if(d){a.addClass("removed");var c=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],g=this;c.push(function(){a.remove();g._trigger("afterTagRemoved",null,{tag:a,tagLabel:g.tagLabel(a)})});a.fadeOut("fast").hide.apply(a,c).dequeue()}else a.remove(),this._trigger("afterTagRemoved",null,{tag:a,tagLabel:this.tagLabel(a)})}},removeTagByLabel:function(a,b){var c=this._findTagByLabel(a);if(!c)throw"No such tag exists with the name '"+
a+"'";this.removeTag(c,b)},removeAll:function(){var a=this;this._tags().each(function(b,c){a.removeTag(c,!1)})}})})(jQuery);


/*
 *	/home/pitambar/Documents/frappenew/frappe-bench/apps/frappe/frappe/public/js/lib/bootstrap.min.js
 */
/*!
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.1",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.1",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.1",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a(this.options.trigger).filter('[href="#'+b.id+'"], [data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.1",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":a.extend({},e.data(),{trigger:this});c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.1",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.1",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.1",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.1",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()
}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.1",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a("body").height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
;(function(factory){if(typeof module==='object'){module.exports=factory(this.jQuery||require('dom'));}else{this.NProgress=factory(this.jQuery);}})(function($){var NProgress={};NProgress.version='0.1.0';var Settings=NProgress.settings={minimum:0.08,easing:'ease',speed:200,trickle:true,trickleRate:0.02,trickleSpeed:800,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner"><div class="spinner-icon"></div></div>'};NProgress.configure=function(options){$.extend(Settings,options);return this;};NProgress.status=null;NProgress.set=function(n){var started=NProgress.isStarted();n=clamp(n,Settings.minimum,1);NProgress.status=(n===1?null:n);var $progress=NProgress.render(!started),$bar=$progress.find('[role="bar"]'),speed=Settings.speed,ease=Settings.easing;$progress[0].offsetWidth;$progress.queue(function(next){$bar.css({transition:'all '+speed+'ms '+ease,transform:'translate3d('+toBarPerc(n)+'%,0,0)'});if(n===1){$progress.css({transition:'none',opacity:1});$progress[0].offsetWidth;setTimeout(function(){$progress.css({transition:'all '+speed+'ms linear',opacity:0});setTimeout(function(){NProgress.remove();next();},speed);},speed);}else{setTimeout(next,speed);}});return this;};NProgress.isStarted=function(){return typeof NProgress.status==='number';};NProgress.start=function(){if(!NProgress.status)NProgress.set(0);var work=function(){setTimeout(function(){if(!NProgress.status)return;NProgress.trickle();work();},Settings.trickleSpeed);};if(Settings.trickle)work();return this;};NProgress.done=function(force){if(!force&&!NProgress.status)return this;return NProgress.inc(0.3+0.5*Math.random()).set(1);};NProgress.inc=function(amount){var n=NProgress.status;if(!n){return NProgress.start();}else{if(typeof amount!=='number'){amount=(1-n)*clamp(Math.random()*n,0.1,0.95);}
n=clamp(n+amount,0,0.994);return NProgress.set(n);}};NProgress.trickle=function(){return NProgress.inc(Math.random()*Settings.trickleRate);};NProgress.render=function(fromStart){if(NProgress.isRendered())return $("#nprogress");$('html').addClass('nprogress-busy');var $el=$("<div id='nprogress'>").html(Settings.template);var perc=fromStart?'-100':toBarPerc(NProgress.status||0);$el.find('[role="bar"]').css({transition:'all 0 linear',transform:'translate3d('+perc+'%,0,0)'});$el.appendTo(document.body);return $el;};NProgress.remove=function(){$('html').removeClass('nprogress-busy');$('#nprogress').remove();};NProgress.isRendered=function(){return($("#nprogress").length>0);};function clamp(n,min,max){if(n<min)return min;if(n>max)return max;return n;}
function toBarPerc(n){return(-1+n)*100;}
return NProgress;});;
/*
 *	/home/pitambar/Documents/frappenew/frappe-bench/apps/frappe/frappe/public/js/lib/moment/moment.min.js
 */
//! moment.js
//! version : 2.6.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){function c(){ib.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}var d=!0;return i(function(){return d&&(c(),d=!1),b.apply(this,arguments)},b)}function d(a,b){return function(c){return l(a.call(this,c),b)}}function e(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function f(){}function g(a){y(a),i(this,a)}function h(a){var b=r(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._bubble()}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function j(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&wb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function k(a){return 0>a?Math.ceil(a):Math.floor(a)}function l(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function m(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&db(a,"Date",cb(a,"Date")+f*c),g&&bb(a,cb(a,"Month")+g*c),d&&ib.updateOffset(a,f||g)}function n(a){return"[object Array]"===Object.prototype.toString.call(a)}function o(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function p(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function q(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Zb[a]||$b[b]||b}return a}function r(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=q(c),b&&(d[b]=a[c]));return d}function s(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ib[b]=function(e,f){var g,h,i=ib.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ib().utc().set(d,a);return i.call(ib.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function u(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function v(a,b,c){return $(ib([a,11,31+b-c]),b,c).week}function w(a){return x(a)?366:365}function x(a){return a%4===0&&a%100!==0||a%400===0}function y(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[pb]<0||a._a[pb]>11?pb:a._a[qb]<1||a._a[qb]>u(a._a[ob],a._a[pb])?qb:a._a[rb]<0||a._a[rb]>23?rb:a._a[sb]<0||a._a[sb]>59?sb:a._a[tb]<0||a._a[tb]>59?tb:a._a[ub]<0||a._a[ub]>999?ub:-1,a._pf._overflowDayOfYear&&(ob>b||b>qb)&&(b=qb),a._pf.overflow=b)}function z(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function A(a){return a?a.toLowerCase().replace("_","-"):a}function B(a,b){return b._isUTC?ib(a).zone(b._offset||0):ib(a).local()}function C(a,b){return b.abbr=a,vb[a]||(vb[a]=new f),vb[a].set(b),vb[a]}function D(a){delete vb[a]}function E(a){var b,c,d,e,f=0,g=function(a){if(!vb[a]&&xb)try{require("./lang/"+a)}catch(b){}return vb[a]};if(!a)return ib.fn._lang;if(!n(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=A(a[f]).split("-"),b=e.length,d=A(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&p(e,d,!0)>=b-1)break;b--}f++}return ib.fn._lang}function F(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function G(a){var b,c,d=a.match(Bb);for(b=0,c=d.length;c>b;b++)d[b]=cc[d[b]]?cc[d[b]]:F(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function H(a,b){return a.isValid()?(b=I(b,a.lang()),_b[b]||(_b[b]=G(b)),_b[b](a)):a.lang().invalidDate()}function I(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cb.lastIndex=0;d>=0&&Cb.test(a);)a=a.replace(Cb,c),Cb.lastIndex=0,d-=1;return a}function J(a,b){var c,d=b._strict;switch(a){case"Q":return Nb;case"DDDD":return Pb;case"YYYY":case"GGGG":case"gggg":return d?Qb:Fb;case"Y":case"G":case"g":return Sb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Rb:Gb;case"S":if(d)return Nb;case"SS":if(d)return Ob;case"SSS":if(d)return Pb;case"DDD":return Eb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ib;case"a":case"A":return E(b._l)._meridiemParse;case"X":return Lb;case"Z":case"ZZ":return Jb;case"T":return Kb;case"SSSS":return Hb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ob:Db;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Db;case"Do":return Mb;default:return c=new RegExp(R(Q(a.replace("\\","")),"i"))}}function K(a){a=a||"";var b=a.match(Jb)||[],c=b[b.length-1]||[],d=(c+"").match(Xb)||["-",0,0],e=+(60*d[1])+t(d[2]);return"+"===d[0]?-e:e}function L(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[pb]=3*(t(b)-1));break;case"M":case"MM":null!=b&&(e[pb]=t(b)-1);break;case"MMM":case"MMMM":d=E(c._l).monthsParse(b),null!=d?e[pb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[qb]=t(b));break;case"Do":null!=b&&(e[qb]=t(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=t(b));break;case"YY":e[ob]=ib.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ob]=t(b);break;case"a":case"A":c._isPm=E(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[rb]=t(b);break;case"m":case"mm":e[sb]=t(b);break;case"s":case"ss":e[tb]=t(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ub]=t(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=K(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function M(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=O(a),a._w&&null==a._a[qb]&&null==a._a[pb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ob]?ib().weekYear():a._a[ob]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=_(f(g.GG),g.W||1,g.E,4,1):(i=E(a._l),j=null!=g.d?X(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=_(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ob]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ob]?d[ob]:a._a[ob],a._dayOfYear>w(e)&&(a._pf._overflowDayOfYear=!0),c=W(e,0,a._dayOfYear),a._a[pb]=c.getUTCMonth(),a._a[qb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[rb]+=t((a._tzm||0)/60),l[sb]+=t((a._tzm||0)%60),a._d=(a._useUTC?W:V).apply(null,l)}}function N(a){var b;a._d||(b=r(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],M(a))}function O(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function P(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=E(a._l),h=""+a._i,i=h.length,j=0;for(d=I(a._f,g).match(Bb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(J(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),cc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),L(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[rb]<12&&(a._a[rb]+=12),a._isPm===!1&&12===a._a[rb]&&(a._a[rb]=0),M(a),y(a)}function Q(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,c=i({},a),c._pf=b(),c._f=a._f[f],P(c),z(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));i(a,d||c)}function T(a){var b,c,d=a._i,e=Tb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Vb.length;c>b;b++)if(Vb[b][1].exec(d)){a._f=Vb[b][0]+(e[6]||" ");break}for(b=0,c=Wb.length;c>b;b++)if(Wb[b][1].exec(d)){a._f+=Wb[b][0];break}d.match(Jb)&&(a._f+="Z"),P(a)}else ib.createFromInputFallback(a)}function U(b){var c=b._i,d=yb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?T(b):n(c)?(b._a=c.slice(0),M(b)):o(c)?b._d=new Date(+c):"object"==typeof c?N(b):"number"==typeof c?b._d=new Date(c):ib.createFromInputFallback(b)}function V(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function W(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function X(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Y(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Z(a,b,c){var d=nb(Math.abs(a)/1e3),e=nb(d/60),f=nb(e/60),g=nb(f/24),h=nb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",nb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,Y.apply({},i)}function $(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ib(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function _(a,b,c,d,e){var f,g,h=W(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:w(a-1)+g}}function ab(b){var c=b._i,d=b._f;return null===c||d===a&&""===c?ib.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=E().preparse(c)),ib.isMoment(c)?(b=j(c),b._d=new Date(+c._d)):d?n(d)?S(b):P(b):U(b),new g(b))}function bb(a,b){var c;return"string"==typeof b&&(b=a.lang().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),u(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function cb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function db(a,b,c){return"Month"===b?bb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function eb(a,b){return function(c){return null!=c?(db(this,a,c),ib.updateOffset(this,b),this):cb(this,a)}}function fb(a){ib.duration.fn[a]=function(){return this._data[a]}}function gb(a,b){ib.duration.fn["as"+a]=function(){return+this/b}}function hb(a){"undefined"==typeof ender&&(jb=mb.moment,mb.moment=a?c("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ib):ib)}for(var ib,jb,kb,lb="2.6.0",mb="undefined"!=typeof global?global:this,nb=Math.round,ob=0,pb=1,qb=2,rb=3,sb=4,tb=5,ub=6,vb={},wb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},xb="undefined"!=typeof module&&module.exports,yb=/^\/?Date\((\-?\d+)/i,zb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ab=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Bb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Cb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Db=/\d\d?/,Eb=/\d{1,3}/,Fb=/\d{1,4}/,Gb=/[+\-]?\d{1,6}/,Hb=/\d+/,Ib=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jb=/Z|[\+\-]\d\d:?\d\d/gi,Kb=/T/i,Lb=/[\+\-]?\d+(\.\d{1,3})?/,Mb=/\d{1,2}/,Nb=/\d/,Ob=/\d\d/,Pb=/\d{3}/,Qb=/\d{4}/,Rb=/[+-]?\d{6}/,Sb=/[+-]?\d+/,Tb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ub="YYYY-MM-DDTHH:mm:ssZ",Vb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Wb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Xb=/([\+\-]|\d\d)/gi,Yb=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Zb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$b={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},_b={},ac="DDD w W M D d".split(" "),bc="M D H h m s w W".split(" "),cc={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+l(Math.abs(a),6)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return l(this.weekYear(),4)},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return l(this.isoWeekYear(),4)},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return t(this.milliseconds()/100)},SS:function(){return l(t(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+l(t(a/60),2)+":"+l(t(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+l(t(a/60),2)+l(t(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},dc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ac.length;)kb=ac.pop(),cc[kb+"o"]=e(cc[kb],kb);for(;bc.length;)kb=bc.pop(),cc[kb+kb]=d(cc[kb],2);for(cc.DDDD=d(cc.DDD,3),i(f.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=ib.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ib([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return $(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ib=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),ab(g)},ib.suppressDeprecationWarnings=!1,ib.createFromInputFallback=c("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),ib.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),ab(g).utc()},ib.unix=function(a){return ib(1e3*a)},ib.duration=function(a,b){var c,d,e,f=a,g=null;return ib.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=zb.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[qb])*c,h:t(g[rb])*c,m:t(g[sb])*c,s:t(g[tb])*c,ms:t(g[ub])*c}):(g=Ab.exec(a))&&(c="-"===g[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(g[2]),M:e(g[3]),d:e(g[4]),h:e(g[5]),m:e(g[6]),s:e(g[7]),w:e(g[8])}),d=new h(f),ib.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},ib.version=lb,ib.defaultFormat=Ub,ib.momentProperties=wb,ib.updateOffset=function(){},ib.lang=function(a,b){var c;return a?(b?C(A(a),b):null===b?(D(a),a="en"):vb[a]||E(a),c=ib.duration.fn._lang=ib.fn._lang=E(a),c._abbr):ib.fn._lang._abbr},ib.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),E(a)},ib.isMoment=function(a){return a instanceof g||null!=a&&a.hasOwnProperty("_isAMomentObject")},ib.isDuration=function(a){return a instanceof h},kb=dc.length-1;kb>=0;--kb)s(dc[kb]);ib.normalizeUnits=function(a){return q(a)},ib.invalid=function(a){var b=ib.utc(0/0);return null!=a?i(b._pf,a):b._pf.userInvalidated=!0,b},ib.parseZone=function(){return ib.apply(null,arguments).parseZone()},ib.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)},i(ib.fn=g.prototype,{clone:function(){return ib(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=ib(this).utc();return 0<a.year()&&a.year()<=9999?H(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return z(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?ib.utc(this._a):ib(this._a)).toArray())>0:!1},parsingFlags:function(){return i({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=H(this,a||ib.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?ib.duration(+b,a):ib.duration(a,b),m(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?ib.duration(+b,a):ib.duration(a,b),m(this,c,-1),this},diff:function(a,b,c){var d,e,f=B(a,this),g=6e4*(this.zone()-f.zone());return b=q(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-ib(this).startOf("month")-(f-ib(f).startOf("month")))/d,e-=6e4*(this.zone()-ib(this).startOf("month").zone()-(f.zone()-ib(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:k(e)},from:function(a,b){return ib.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(ib(),a)},calendar:function(){var a=B(ib(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return x(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=X(a,this.lang()),this.add({d:a-b})):b},month:eb("Month",!0),startOf:function(a){switch(a=q(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=q(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+ib(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+ib(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+B(a,this).startOf(b)},min:function(a){return a=ib.apply(null,arguments),this>a?this:a},max:function(a){return a=ib.apply(null,arguments),a>this?this:a},zone:function(a,b){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=K(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?m(this,ib.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ib.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ib(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return u(this.year(),this.month())},dayOfYear:function(a){var b=nb((ib(this).startOf("day")-ib(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=$(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=$(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=$(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return v(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return v(this.year(),a.dow,a.doy)},get:function(a){return a=q(a),this[a]()},set:function(a,b){return a=q(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=E(b),this)}}),ib.fn.millisecond=ib.fn.milliseconds=eb("Milliseconds",!1),ib.fn.second=ib.fn.seconds=eb("Seconds",!1),ib.fn.minute=ib.fn.minutes=eb("Minutes",!1),ib.fn.hour=ib.fn.hours=eb("Hours",!0),ib.fn.date=eb("Date",!0),ib.fn.dates=c("dates accessor is deprecated. Use date instead.",eb("Date",!0)),ib.fn.year=eb("FullYear",!0),ib.fn.years=c("years accessor is deprecated. Use year instead.",eb("FullYear",!0)),ib.fn.days=ib.fn.day,ib.fn.months=ib.fn.month,ib.fn.weeks=ib.fn.week,ib.fn.isoWeeks=ib.fn.isoWeek,ib.fn.quarters=ib.fn.quarter,ib.fn.toJSON=ib.fn.toISOString,i(ib.duration.fn=h.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=k(e/1e3),h.seconds=a%60,b=k(a/60),h.minutes=b%60,c=k(b/60),h.hours=c%24,f+=k(c/24),h.days=f%30,g+=k(f/30),h.months=g%12,d=k(g/12),h.years=d},weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)},humanize:function(a){var b=+this,c=Z(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=ib.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ib.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=q(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=q(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:ib.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(kb in Yb)Yb.hasOwnProperty(kb)&&(gb(kb,Yb[kb]),fb(kb.toLowerCase()));gb("Weeks",6048e5),ib.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ib.lang("en",{ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),xb?module.exports=ib:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(mb.moment=jb),ib}),hb(!0)):hb()}).call(this);


/*
 *	/home/pitambar/Documents/frappenew/frappe-bench/apps/frappe/frappe/public/js/lib/moment/moment-timezone.min.js
 */
(function(){function a(a){function c(a){a+="";var b=a.split(":"),c=~a.indexOf("-")?-1:1,d=Math.abs(+b[0]),e=parseInt(b[1],10)||0,f=parseInt(b[2],10)||0;return c*(60*d+e+f/60)}function d(a,b,d,e,f,g,h,i,j,l){this.name=a,this.startYear=+b,this.endYear=+d,this.month=+e,this.day=+f,this.dayRule=+g,this.time=c(h),this.timeRule=+i,this.offset=c(j),this.letters=l||"",this.date=k(this.date),this.weekdayAfter=k(this.weekdayAfter),this.lastWeekday=k(this.lastWeekday)}function e(a,b){this.rule=b,this.start=b.start(a)}function f(a,b){return a.isLast?-1:b.isLast?1:b.start-a.start}function g(a){this.name=a,this.rules=[],this.lastYearRule=k(this.lastYearRule)}function h(b,d,e,f,g,h){var i,j="string"==typeof g?g.split("_"):[9999];for(this.name=b,this.offset=c(d),this.ruleSet=e,this.letters=f,this.lastRule=k(this.lastRule),i=0;i<j.length;i++)j[i]=+j[i];this.until=a.utc(j).subtract("m",c(h))}function i(a,b){return a.until-b.until}function j(a){this.name=n(a),this.displayName=a,this.zones=[],this.zoneAndRule=k(this.zoneAndRule,function(a){return+a})}function k(a,b){var c={};return function(d){var e=b?b.apply(this,arguments):d;return e in c?c[e]:c[e]=a.apply(this,arguments)}}function l(a){var b,c,d;for(b in a)for(d=a[b],c=0;c<d.length;c++)m(b+"	"+d[c])}function m(a){if(y[a])return y[a];var b=a.split(/\s/),c=n(b[0]),e=new d(c,b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);return y[a]=e,r(c).add(e),e}function n(a){return(a||"").toLowerCase().replace(/\//g,"_")}function o(a){var b,c,d;for(b in a)for(d=a[b],c=0;c<d.length;c++)q(b+"	"+d[c])}function p(a){var b;for(b in a)C[n(b)]=n(a[b])}function q(a){if(A[a])return A[a];var b=a.split(/\s/),c=n(b[0]),d=new h(c,b[1],r(b[2]),b[3],b[4],b[5]);return A[a]=d,s(b[0]).add(d),d}function r(a){return a=n(a),z[a]||(z[a]=new g(a)),z[a]}function s(a){var b=n(a);return C[b]&&(b=C[b]),B[b]||(B[b]=new j(a)),B[b]}function t(a){a&&(a.zones&&o(a.zones),a.rules&&l(a.rules),a.links&&p(a.links))}function u(){var a,b=[];for(a in B)b.push(B[a]);return b}var v,w=a.fn.zoneName,x=a.fn.zoneAbbr,y={},z={},A={},B={},C={},D=1,E=2,F=7,G=8;return void 0!==a.tz?a:(d.prototype={contains:function(a){return a>=this.startYear&&a<=this.endYear},start:function(b){return b=Math.min(Math.max(b,this.startYear),this.endYear),a.utc([b,this.month,this.date(b),0,this.time])},date:function(a){return this.dayRule===F?this.day:this.dayRule===G?this.lastWeekday(a):this.weekdayAfter(a)},weekdayAfter:function(b){for(var c=this.day,d=a([b,this.month,1]).day(),e=this.dayRule+1-d;c>e;)e+=7;return e},lastWeekday:function(b){var c=this.day,d=c%7,e=a([b,this.month+1,1]).day(),f=a([b,this.month,1]).daysInMonth(),g=f+(d-(e-1))-7*~~(c/7);return d>=e&&(g-=7),g}},e.prototype={equals:function(a){return a&&a.rule===this.rule?Math.abs(a.start-this.start)<864e5:!1}},g.prototype={add:function(a){this.rules.push(a)},ruleYears:function(a,b){var c,d,g,h=a.year(),i=[];for(c=0;c<this.rules.length;c++)d=this.rules[c],d.contains(h)?i.push(new e(h,d)):d.contains(h+1)&&i.push(new e(h+1,d));return i.push(new e(h-1,this.lastYearRule(h-1))),b&&(g=new e(h-1,b.lastRule()),g.start=b.until.clone().utc(),g.isLast=b.ruleSet!==this,i.push(g)),i.sort(f),i},rule:function(a,b,c){var d,e,f,g,h,i=this.ruleYears(a,c),j=0;for(c&&(e=c.offset+c.lastRule().offset,f=9e4*Math.abs(e)),h=i.length-1;h>-1;h--)g=d,d=i[h],d.equals(g)||(c&&!d.isLast&&Math.abs(d.start-c.until)<=f&&(j+=e-b),d.rule.timeRule===E&&(j=b),d.rule.timeRule!==D&&d.start.add("m",-j),j=d.rule.offset+b);for(h=0;h<i.length;h++)if(d=i[h],a>=d.start&&!d.isLast)return d.rule;return v},lastYearRule:function(a){var b,c,d,e=v,f=-1e30;for(b=0;b<this.rules.length;b++)c=this.rules[b],a>=c.startYear&&(d=c.start(a),d>f&&(f=d,e=c));return e}},h.prototype={rule:function(a,b){return this.ruleSet.rule(a,this.offset,b)},lastRule:function(){return this.rule(this.until)},format:function(a){return this.letters.replace("%s",a.letters)}},j.prototype={zoneAndRule:function(a){var b,c,d;for(a=a.clone().utc(),b=0;b<this.zones.length&&(c=this.zones[b],!(a<c.until));b++)d=c;return[c,c.rule(a,d)]},add:function(a){this.zones.push(a),this.zones.sort(i)},format:function(a){var b=this.zoneAndRule(a);return b[0].format(b[1])},offset:function(a){var b=this.zoneAndRule(a);return-(b[0].offset+b[1].offset)}},a.updateOffset=function(a,b){var c;a._z&&(c=a._z.offset(a),Math.abs(c)<16&&(c/=60),a.zone(c,b))},a.fn.tz=function(b){return b?(this._z=s(b),this._z&&a.updateOffset(this),this):this._z?this._z.displayName:void 0},a.fn.zoneName=function(){return this._z?this._z.format(this):w.call(this)},a.fn.zoneAbbr=function(){return this._z?this._z.format(this):x.call(this)},a.momentProperties._z=null,a.tz=function(){var b,c=[],d=arguments.length-1;for(b=0;d>b;b++)c[b]=arguments[b];var e=a.apply(null,c),f=e.zone();return e.tz(arguments[d]),e.add("minutes",e.zone()-f)},a.tz.add=t,a.tz.addRule=m,a.tz.addZone=q,a.tz.zones=u,a.tz.version=b,a.tz.zoneExists=function(a){return s(a).zones.length>0},v=m("- 0 9999 0 0 0 0 0 0"),a)}var b="0.0.6";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],a):"undefined"!=typeof module?module.exports=a(require("moment")):"undefined"!=typeof window&&window.moment&&a(window.moment)}).apply(this);

if(!window.frappe)
window.frappe={};frappe.provide=function(namespace){var nsl=namespace.split('.');var parent=window;for(var i=0;i<nsl.length;i++){var n=nsl[i];if(!parent[n]){parent[n]={}}
parent=parent[n];}
return parent;}
frappe.provide("locals");frappe.provide("frappe.settings");frappe.provide("frappe.utils");frappe.provide("frappe.ui");frappe.provide("frappe.modules");frappe.provide("frappe.templates");;;(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}
function Class(){this._type="instance";if(!initializing&&this.init)
this.init.apply(this,arguments);}
Class.prototype=prototype;Class._type="class";Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class;};})();;frappe.require=function(items){if(typeof items==="string"){items=[items];}
var l=items.length;for(var i=0;i<l;i++){var src=items[i];frappe.assets.execute(src);}};frappe.assets={executed_:{},check:function(){if(window._version_number!=localStorage.getItem("_version_number")){localStorage.clear();console.log("Cleared App Cache.");}
if(localStorage._last_load){var not_updated_since=new Date()-new Date(localStorage._last_load);if(not_updated_since<10000||not_updated_since>86400000){localStorage.clear();console.log("Cleared localstorage");}}else{localStorage.clear();console.log("Cleared localstorage");}
frappe.assets.init_local_storage();},init_local_storage:function(){localStorage._last_load=new Date();localStorage._version_number=window._version_number;if(frappe.boot)localStorage.metadata_version=frappe.boot.metadata_version;},exists:function(src){if('localStorage'in window&&localStorage.getItem(src)&&(frappe.boot?!frappe.boot.developer_mode:true))
return true;},add:function(src,txt){if('localStorage'in window){try{localStorage.setItem(src,txt);}catch(e){localStorage.clear();console.log("Local Storage cleared");localStorage.setItem(src,txt);}}},get:function(src){return localStorage.getItem(src);},extn:function(src){if(src.indexOf('?')!=-1){src=src.split('?').slice(-1)[0];}
return src.split('.').slice(-1)[0];},load:function(src){frappe.call({method:"frappe.client.get_js",args:{"src":src},callback:function(r){frappe.assets.add(src,r.message);},async:false,freeze:true,})},execute:function(src){if(!frappe.assets.exists(src)){frappe.assets.load(src);}
var type=frappe.assets.extn(src);if(frappe.assets.handler[type]){frappe.assets.handler[type](frappe.assets.get(src),src);frappe.assets.executed_[src]=1;}},handler:{js:function(txt,src){frappe.dom.eval(txt);},css:function(txt,src){frappe.dom.set_style(txt);}},};;function format(str,args){if(str==undefined)return str;this.unkeyed_index=0;return str.replace(/\{(\w*)\}/g,function(match,key){if(key===''){key=this.unkeyed_index;this.unkeyed_index++}
if(key==+key){return args[key]!==undefined?args[key]:match;}}.bind(this));}
if(jQuery){jQuery.format=format};frappe.provide("frappe.form.formatters");frappe.form.formatters={_right:function(value,options){if(options&&options.inline){return value;}else{return"<span style='text-align: right'>"+value+"</span>";}},Data:function(value){return value==null?"":value;},Select:function(value){return __(frappe.form.formatters["Data"](value));},Float:function(value,docfield,options,doc){var precision=docfield.precision||cint(frappe.boot.sysdefaults.float_precision)||null;if(docfield.options&&docfield.options.trim()){docfield.precision=precision;return frappe.form.formatters.Currency(value,docfield,options,doc);}else{if(!is_null(value)){var temp=cstr(value).split(".");if(temp[1]==undefined||cint(temp[1])===0){precision=0;}}
return frappe.form.formatters._right(((value==null||value==="")?"":format_number(value,null,precision)),options);}},Int:function(value,docfield,options){return frappe.form.formatters._right(value==null?"":cint(value),options)},Percent:function(value,docfield,options){return frappe.form.formatters._right(flt(value,2)+"%",options)},Currency:function(value,docfield,options,doc){var currency=frappe.meta.get_field_currency(docfield,doc);return frappe.form.formatters._right((value==null||value==="")?"":format_currency(value,currency,docfield.precision||null),options);},Check:function(value){return value?"<i class='icon-ok'></i>":"<i class='icon-remove'></i>";},Link:function(value,docfield,options){var doctype=docfield._options||docfield.options;if(options&&options.for_print)
return value;if(!value)
return"";if(docfield&&docfield.link_onclick){return repl('<a onclick="%(onclick)s">%(value)s</a>',{onclick:docfield.link_onclick.replace(/"/g,'&quot;'),value:value});}else if(docfield&&doctype){return repl('<a class="grey" href="#Form/%(doctype)s/%(name)s" data-doctype="%(doctype)s">%(label)s</a>',{doctype:encodeURIComponent(doctype),name:encodeURIComponent(value),label:__(options&&options.label||value)});}else{return value;}},Date:function(value){return value?dateutil.str_to_user(value):"";},Datetime:function(value){return value?dateutil.str_to_user(value):"";},Text:function(value){if(value){var tags=["<p","<div","<br"];var match=false;for(var i=0;i<tags.length;i++){if(value.match(tags[i])){match=true;break;}}
if(!match){value=replace_newlines(value);}}
return frappe.form.formatters.Data(value);},StarredBy:function(value){var html="";$.each(JSON.parse(value||"[]"),function(i,v){if(v)html+='<span class="avatar avatar-small" \
    style="margin-right: 3px;"><img src="'+frappe.user_info(v).image+'" alt="'+frappe.user_info(v).abbr+'"></span>';});return html;},Tag:function(value){var html="";$.each((value||"").split(","),function(i,v){if(v)html+='<span class="label label-info" \
    style="margin-right: 7px; cursor: pointer;"\
    data-field="_user_tags" data-label="'+v+'">'+v+'</span>';});return html;},Comment:function(value){var html="";$.each(JSON.parse(value||"[]"),function(i,v){if(v)html+='<span class="label label-warning" \
    style="margin-right: 7px;"\
    data-field="_comments" data-label="'+v.name+'">'+v.comment+'</span>';});return html;},Assign:function(value){var html="";$.each(JSON.parse(value||"[]"),function(i,v){if(v)html+='<span class="label label-warning" \
    style="margin-right: 7px;"\
    data-field="_assign">'+v+'</span>';});return html;},SmallText:function(value){return frappe.form.formatters.Text(value);},TextEditor:function(value){return frappe.form.formatters.Text(value);},Code:function(value){return"<pre>"+(value==null?"":$("<div>").text(value).html())+"</pre>"},WorkflowState:function(value){workflow_state=frappe.get_doc("Workflow State",value);if(workflow_state){return repl("<span class='label label-%(style)s' \
    data-workflow-state='%(value)s'\
    style='padding-bottom: 4px; cursor: pointer;'>\
    <i class='icon-small icon-white icon-%(icon)s'></i> %(value)s</span>",{value:value,style:workflow_state.style.toLowerCase(),icon:workflow_state.icon});}else{return"<span class='label'>"+value+"</span>";}},Email:function(value){return $("<div></div>").text(value).html();}}
frappe.form.get_formatter=function(fieldtype){if(!fieldtype)
fieldtype="Data";return frappe.form.formatters[fieldtype.replace(/ /g,"")]||frappe.form.formatters.Data;}
frappe.format=function(value,df,options,doc){if(!df)df={"fieldtype":"Data"};var fieldtype=df.fieldtype||"Data";if(fieldtype==="Dynamic Link"){fieldtype="Link";df._options=doc?doc[df.options]:null;}
formatter=df.formatter||frappe.form.get_formatter(fieldtype);var formatted=formatter(value,df,options,doc);if(typeof formatted=="string")
formatted=frappe.utils.remove_script_and_style(formatted);return formatted;}
frappe.get_format_helper=function(doc){var helper={get_formatted:function(fieldname){var df=frappe.meta.get_docfield(doc.doctype,fieldname);if(!df){console.log("fieldname not found: "+fieldname);};return frappe.format(doc[fieldname],df,{inline:1},doc);}};$.extend(helper,doc);return helper;};frappe._messages={};frappe._=function(txt,replace){if(!txt)return txt;if(typeof(txt)!="string")return txt;ret=frappe._messages[txt.replace(/\n/g,"")]||txt;if(replace&&typeof(replace)==="object"){ret=$.format(ret,replace);}
return ret;};window.__=frappe._;frappe.templates["modal"] = '<div class="modal fade" style="overflow: auto;" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <div class="row"> <div class="col-xs-7"> <h4 class="modal-title">{%= title %}</h4> </div> <div class="col-xs-5"> <div class="text-right buttons"> <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"> <i class="octicon octicon-x visible-xs" style="padding: 1px 0px;"></i> <span class="hidden-xs">{%= __("Close") %}</span></button> <button type="button" class="btn btn-primary btn-sm hide"> {%= __("Confirm") %}</button> </div> </div> </div> </div> <div class="modal-body ui-front">{%= content %} </div> </div> </div> </div> ';
frappe.provide('frappe.dom');frappe.dom={id_count:0,freeze_count:0,by_id:function(id){return document.getElementById(id);},set_unique_id:function(ele){var id='unique-'+frappe.dom.id_count;if(ele)
ele.setAttribute('id',id);frappe.dom.id_count++;return id;},eval:function(txt){if(!txt)return;var el=document.createElement('script');el.appendChild(document.createTextNode(txt));document.getElementsByTagName('head')[0].appendChild(el);},set_style:function(txt){if(!txt)return;var se=document.createElement('style');se.type="text/css";if(se.styleSheet){se.styleSheet.cssText=txt;}else{se.appendChild(document.createTextNode(txt));}
document.getElementsByTagName('head')[0].appendChild(se);},add:function(parent,newtag,className,cs,innerHTML,onclick){if(parent&&parent.substr)parent=frappe.dom.by_id(parent);var c=document.createElement(newtag);if(parent)
parent.appendChild(c);if(className){if(newtag.toLowerCase()=='img')
c.src=className
else
c.className=className;}
if(cs)frappe.dom.css(c,cs);if(innerHTML)c.innerHTML=innerHTML;if(onclick)c.onclick=onclick;return c;},css:function(ele,s){if(ele&&s){$.extend(ele.style,s);};return ele;},freeze:function(msg,css_class){if(!$('#freeze').length){var freeze=$('<div id="freeze" class="modal-backdrop fade"></div>').on("click",function(){if(cur_frm&&cur_frm.cur_grid){cur_frm.cur_grid.toggle_view();return false;}}).appendTo("#body_div");freeze.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>',{msg:msg||""}));setTimeout(function(){freeze.addClass("in")},1);}else{$("#freeze").addClass("in");}
if(css_class){$("#freeze").addClass(css_class);}
frappe.dom.freeze_count++;},unfreeze:function(){if(!frappe.dom.freeze_count)return;frappe.dom.freeze_count--;if(!frappe.dom.freeze_count){var freeze=$('#freeze').removeClass("in");setTimeout(function(){if(!frappe.dom.freeze_count){freeze.remove();}},150);}},save_selection:function(){if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){var ranges=[];for(var i=0,len=sel.rangeCount;i<len;++i){ranges.push(sel.getRangeAt(i));}
return ranges;}}else if(document.selection&&document.selection.createRange){return document.selection.createRange();}
return null;},restore_selection:function(savedSel){if(savedSel){if(window.getSelection){sel=window.getSelection();sel.removeAllRanges();for(var i=0,len=savedSel.length;i<len;++i){sel.addRange(savedSel[i]);}}else if(document.selection&&savedSel.select){savedSel.select();}}},is_touchscreen:function(){return('ontouchstart'in window)}}
frappe.get_modal=function(title,content){return $(frappe.render_template("modal",{title:title,content:content})).appendTo(document.body);};var get_hex=function(i){i=Math.round(i);if(i>255)return'ff';if(i<0)return'00';i=i.toString(16);if(i.length==1)i='0'+i;return i;}
frappe.get_shade=function(color,factor){if(color.substr(0,3)=="rgb"){var rgb=function(r,g,b){return get_hex(r)+get_hex(g)+get_hex(b);}
color=eval(color);}
if(color.substr(0,1)=="#"){var color=color.substr(1);}
var get_int=function(hex){return parseInt(hex,16);}
return get_hex(get_int(color.substr(0,2))+factor)
+get_hex(get_int(color.substr(2,2))+factor)
+get_hex(get_int(color.substr(4,2))+factor)}
frappe.get_cookie=function(c){var clist=(document.cookie+'').split(';');var cookies={};for(var i=0;i<clist.length;i++){var tmp=clist[i].split('=');cookies[strip(tmp[0])]=strip($.trim(tmp.slice(1).join("=")),"\"");}
return cookies[c];}
frappe.dom.set_box_shadow=function(ele,spread){$(ele).css('-moz-box-shadow','0px 0px '+spread+'px rgba(0,0,0,0.3);')
$(ele).css('-webkit-box-shadow','0px 0px '+spread+'px rgba(0,0,0,0.3);')
$(ele).css('-box-shadow','0px 0px '+spread+'px rgba(0,0,0,0.3);')};(function($){$.fn.add_options=function(options_list){for(var i=0;i<options_list.length;i++){var v=options_list[i];if(is_null(v)){var value=null;var label=null;}else{var is_value_null=is_null(v.value);var is_label_null=is_null(v.label);if(is_value_null&&is_label_null){var value=v;var label=__(v);}else{var value=is_value_null?"":v.value;var label=is_label_null?__(value):__(v.label);}}
$('<option>').html(cstr(label)).attr('value',value).appendTo(this);}
this.selectedIndex=0;return $(this);}
$.fn.set_working=function(){this.prop('disabled',true);}
$.fn.done_working=function(){this.prop('disabled',false);}})(jQuery);(function($){function pasteIntoInput(el,text){el.focus();if(typeof el.selectionStart=="number"){var val=el.value;var selStart=el.selectionStart;el.value=val.slice(0,selStart)+text+val.slice(el.selectionEnd);el.selectionEnd=el.selectionStart=selStart+text.length;}else if(typeof document.selection!="undefined"){var textRange=document.selection.createRange();textRange.text=text;textRange.collapse(false);textRange.select();}}
function allowTabChar(el){$(el).keydown(function(e){if(e.which==9){pasteIntoInput(this,"\t");return false;}});$(el).keypress(function(e){if(e.which==9){return false;}});}
$.fn.allowTabs=function(){if(this.jquery){this.each(function(){if(this.nodeType==1){var nodeName=this.nodeName.toLowerCase();if(nodeName=="textarea"||(nodeName=="input"&&this.type=="text")){allowTabChar(this);}}})}
return this;}})(jQuery);;frappe.provide("frappe.messages")
frappe.messages.waiting=function(parent,msg){return $(frappe.messages.get_waiting_message(msg)).appendTo(parent);};frappe.messages.get_waiting_message=function(msg){return repl('<div class="msg-box" style="width: 63%; margin: 30px auto;">\
  <p class="text-center">%(msg)s</p></div>',{msg:msg});}
frappe.throw=function(msg){msgprint(msg);throw new Error(msg);}
frappe.confirm=function(message,ifyes,ifno){var d=new frappe.ui.Dialog({title:__("Confirm"),fields:[{fieldtype:"HTML",options:"<p class='frappe-confirm-message'>"+message+"</p>"}],primary_action_label:__("Yes"),primary_action:function(){d.hide();ifyes();}});d.show();if(ifno){d.$wrapper.find(".modal-footer .btn-default").click(ifno);}
return d;}
frappe.prompt=function(fields,callback,title,primary_label){if(!$.isArray(fields))fields=[fields];var d=new frappe.ui.Dialog({fields:fields,title:title||__("Enter Value"),})
d.set_primary_action(primary_label||__("Submit"),function(){var values=d.get_values();if(!values){return;}
d.hide();callback(values);})
d.show();}
var msg_dialog=null;frappe.msgprint=function(msg,title){if(!msg)return;if(msg instanceof Array){$.each(msg,function(i,v){if(v){msgprint(v);}})
return;}
if(typeof(msg)!='string')
msg=JSON.stringify(msg);if(msg.substr(0,8)=='__small:'){show_alert(msg.substr(8));return;}
if(!msg_dialog){msg_dialog=new frappe.ui.Dialog({title:__("Message"),onhide:function(){if(msg_dialog.custom_onhide){msg_dialog.custom_onhide();}
msg_dialog.msg_area.empty();}});msg_dialog.msg_area=$('<div class="msgprint">').appendTo(msg_dialog.body);}
if(msg.search(/<br>|<p>|<li>/)==-1)
msg=replace_newlines(msg);msg_dialog.set_title(title||__('Message'))
if(msg_dialog.msg_area.html())msg_dialog.msg_area.append("<hr>");msg_dialog.msg_area.append(msg);msg_dialog.$wrapper.css("z-index",2000);msg_dialog.show();return msg_dialog;}
var msgprint=frappe.msgprint;function show_alert(txt,seconds){if(!$('#dialog-container').length){$('<div id="dialog-container"><div id="alert-container"></div></div>').appendTo('body');}
var div=$(repl('<div class="alert desk-alert" style="display: none;">'
+'<a class="close">&times;</a><span class="alert-message">%(txt)s</span>'
+'</div>',{txt:txt})).appendTo("#alert-container").fadeIn(300);div.find('.close').click(function(){$(this).parent().remove();return false;});div.delay(seconds?seconds*1000:3000).fadeOut(300);return div;};frappe.provide('frappe.request');frappe.request.url='/';frappe.call=function(opts){if(opts.quiet)
opts.no_spinner=true;var args=$.extend({},opts.args);if(opts.module&&opts.page){args.cmd=opts.module+'.page.'+opts.page+'.'+opts.page+'.'+opts.method;}else if(opts.doc){$.extend(args,{cmd:"runserverobj",docs:frappe.get_doc(opts.doc.doctype,opts.doc.name),method:opts.method,args:opts.args,});}else if(opts.method){args.cmd=opts.method;}
return frappe.request.call({type:opts.type||"POST",args:args,success:opts.callback,error:opts.error,always:opts.always,btn:opts.btn,freeze:opts.freeze,freeze_message:opts.freeze_message,async:opts.async,url:opts.url||frappe.request.url,});}
frappe.request.call=function(opts){frappe.request.prepare(opts);opts.args._type=opts.type;var statusCode={200:function(data,xhr){if(typeof data==="string")data=JSON.parse(data);opts.success_callback&&opts.success_callback(data,xhr.responseText);},404:function(xhr){msgprint(__("Not found"));},403:function(xhr){if(xhr.responseJSON&&xhr.responseJSON._server_messages){var _server_messages=JSON.parse(xhr.responseJSON._server_messages);if(_server_messages.indexOf(__("Not permitted"))!==-1){return;}}
msgprint(__("Not permitted"));},508:function(xhr){msgprint(__("Another transaction is blocking this one. Please try again in a few seconds."));},417:function(data,xhr){if(typeof data==="string")data=JSON.parse(data);opts.error_callback&&opts.error_callback(data,xhr.responseText);},501:function(data,xhr){if(typeof data==="string")data=JSON.parse(data);opts.error_callback&&opts.error_callback(data,xhr.responseText);},500:function(xhr){msgprint(__("Server Error: Please check your server logs or contact tech support."))
opts.error_callback&&opts.error_callback();frappe.request.report_error(xhr,opts);}};var ajax_args={url:opts.url||frappe.request.url,data:opts.args,type:'POST',dataType:opts.dataType||'json',async:opts.async};frappe.last_request=ajax_args.data;return $.ajax(ajax_args).always(function(data,textStatus,xhr){if(typeof data==="string"){data=JSON.parse(data);}
if(data.responseText){var xhr=data;data=JSON.parse(data.responseText);}
frappe.request.cleanup(opts,data);if(opts.always)opts.always(data);}).done(function(data,textStatus,xhr){var status_code_handler=statusCode[xhr.statusCode().status];if(status_code_handler){status_code_handler(data,xhr);}}).fail(function(xhr,textStatus){var status_code_handler=statusCode[xhr.statusCode().status];if(status_code_handler){status_code_handler(xhr);}else{opts.error_callback&&opts.error_callback(xhr);}});}
frappe.request.prepare=function(opts){if(opts.btn)$(opts.btn).prop("disabled",true);if(opts.freeze)frappe.dom.freeze(opts.freeze_message);for(key in opts.args){if(opts.args[key]&&($.isPlainObject(opts.args[key])||$.isArray(opts.args[key]))){opts.args[key]=JSON.stringify(opts.args[key]);}}
if(!opts.args.cmd&&!opts.url){console.log(opts)
throw"Incomplete Request";}
opts.success_callback=opts.success;opts.error_callback=opts.error;delete opts.success;delete opts.error;}
frappe.request.cleanup=function(opts,r){if(opts.btn)$(opts.btn).prop("disabled",false);if(opts.freeze)frappe.dom.unfreeze();if(r.session_expired||frappe.get_cookie("sid")==="Guest"){if(!frappe.app.logged_out){localStorage.setItem("session_lost_route",location.hash);msgprint(__('Session Expired. Logging you out'));frappe.app.logout();}
return;}
if(r._server_messages&&!opts.silent){r._server_messages=JSON.parse(r._server_messages)
msgprint(r._server_messages);}
if(r.exc){r.exc=JSON.parse(r.exc);if(r.exc instanceof Array){$.each(r.exc,function(i,v){if(v){console.log(v);}})}else{console.log(r.exc);}};if(r._debug_messages){console.log("-")
console.log("-")
console.log("-")
if(opts.args){console.log("<<<< arguments ");console.log(opts.args);console.log(">>>>")}
$.each(JSON.parse(r._debug_messages),function(i,v){console.log(v);});console.log("<<<< response");delete r._debug_messages;console.log(r);console.log(">>>>")
console.log("-")
console.log("-")
console.log("-")}
if(r.docs||r.docinfo){frappe.model.sync(r);}
if(r.__messages){$.extend(frappe._messages,r.__messages);}
frappe.last_response=r;}
frappe.request.report_error=function(xhr,request_opts){var data=JSON.parse(xhr.responseText);if(data.exc){var exc=(JSON.parse(data.exc)||[]).join("\n");delete data.exc;}else{var exc="";}
if(exc){var error_report_email=(frappe.boot.error_report_email||[]).join(", ");var error_message='<div>\
   <pre style="max-height: 300px; margin-top: 7px;">'+exc+'</pre>'
+'<p class="text-right"><a class="btn btn-default report-btn">\
    <i class="icon-fixed-width icon-envelope"></i> '
+__("Report this issue")+'</a></p>'
+'</div>';request_opts=frappe.request.cleanup_request_opts(request_opts);var msg_dialog=msgprint(error_message);msg_dialog.msg_area.find(".report-btn").toggle(error_report_email?true:false).on("click",function(){var error_report_message=['<h5>Please type some additional information that could help us reproduce this issue:</h5>','<div style="min-height: 100px; border: 1px solid #bbb; \
      border-radius: 5px; padding: 15px; margin-bottom: 15px;"></div>','<hr>','<h5>Route</h5>','<pre>'+frappe.get_route_str()+'</pre>','<hr>','<h5>Error Report</h5>','<pre>'+exc+'</pre>','<hr>','<h5>Request Data</h5>','<pre>'+JSON.stringify(request_opts,null,"\t")+'</pre>','<hr>','<h5>Response JSON</h5>','<pre>'+JSON.stringify(data,null,'\t')+'</pre>'].join("\n");var communication_composer=new frappe.views.CommunicationComposer({subject:'Error Report',recipients:error_report_email,message:error_report_message,doc:{doctype:"User",name:user}});communication_composer.dialog.$wrapper.css("z-index",cint(msg_dialog.$wrapper.css("z-index"))+1);});}};frappe.request.cleanup_request_opts=function(request_opts){var doc=(request_opts.args||{}).doc;if(doc){doc=JSON.parse(doc);$.each(Object.keys(doc),function(i,key){if(key.indexOf("password")!==-1&&doc[key]){doc[key]="*****";}});request_opts.args.doc=JSON.stringify(doc);}
return request_opts;};;frappe.re_route={};frappe.route_titles={};frappe.route_history=[];frappe.view_factory={};frappe.view_factories=[];frappe.route_options=null;frappe.route=function(){if(frappe.re_route[window.location.hash]){var re_route_val=frappe.get_route_str(frappe.re_route[window.location.hash]);var cur_route_val=frappe.get_route_str(frappe._cur_route);if(decodeURIComponent(re_route_val)===decodeURIComponent(cur_route_val)){window.history.back();return;}else{window.location.hash=frappe.re_route[window.location.hash];}}
frappe._cur_route=window.location.hash;route=frappe.get_route();frappe.route_history.push(route);if(route[0]&&route[1]&&frappe.views[route[0]+"Factory"]){if(!frappe.view_factory[route[0]]){frappe.view_factory[route[0]]=new frappe.views[route[0]+"Factory"]();}
frappe.view_factory[route[0]].show();}else{frappe.views.pageview.show(route[0]);}
if(frappe.route_titles[window.location.hash]){document.title=frappe.route_titles[window.location.hash];}}
frappe.get_route=function(route){return frappe.get_route_str(route).split('/')}
frappe.get_prev_route=function(){if(frappe.route_history&&frappe.route_history.length>1){return frappe.route_history[frappe.route_history.length-2];}else{return[];}}
frappe.get_route_str=function(route){if(!route)
route=window.location.hash;if(route.substr(0,1)=='#')route=route.substr(1);if(route.substr(0,1)=='!')route=route.substr(1);route=$.map(route.split('/'),function(r){try{return decodeURIComponent(r);}catch(e){if(e instanceof URIError){return r;}else{throw e;}}}).join('/');return route;}
frappe.set_route=function(){if(arguments.length===1&&$.isArray(arguments[0])){arguments=arguments[0];}
route=$.map(arguments,function(a){if($.isPlainObject(a)){frappe.route_options=a;return null;}else{return a?encodeURIComponent(a):null;}}).join('/');window.location.hash=route;frappe.app.set_favicon&&frappe.app.set_favicon();}
frappe.set_re_route=function(){var tmp=window.location.hash;frappe.set_route.apply(null,arguments);frappe.re_route[tmp]=window.location.hash;};frappe._cur_route=null;$(window).on('hashchange',function(){frappe.route_titles[frappe._cur_route]=document.title;if(window.location.hash==frappe._cur_route)
return;if(cur_dialog&&cur_dialog.hide_on_page_refresh)
cur_dialog.hide();frappe.route();});;frappe.defaults={get_user_default:function(key){var d=frappe.boot.user.defaults[key];if($.isArray(d))d=d[0];return d;},get_user_defaults:function(key){var d=frappe.boot.user.defaults[key];if(!$.isArray(d))d=[d];return d;},get_global_default:function(key){var d=sys_defaults[key];if($.isArray(d))d=d[0];return d;},get_global_defaults:function(key){var d=sys_defaults[key];if(!$.isArray(d))d=[d];return d;},set_default:function(key,value,callback){if(typeof value!=="string")
value=JSON.stringify(value);frappe.boot.user.defaults[key]=value;return frappe.call({method:"frappe.client.set_default",args:{key:key,value:value},callback:callback||function(r){}});},get_default:function(key){var value=frappe.boot.user.defaults[key];if(value){try{return JSON.parse(value)}catch(e){return value;}}},get_user_permissions:function(){return frappe.defaults.user_permissions;},set_user_permissions:function(user_permissions){if(!user_permissions)return;frappe.defaults.user_permissions=$.extend(frappe.defaults.user_permissions||{},user_permissions);}};frappe.template={compiled:{},debug:{}};frappe.template.compile=function(str,name){var key=name||str;if(str.indexOf("'")!==-1){console.warn("Warning: Single quotes (') may not work in templates");}
if(!frappe.template.compiled[key]){fn_str="var p=[],print=function(){p.push.apply(p,arguments)};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split("{%").join("\t").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%}/g,"',$1,'").split("\t").join("');").split("%}").join("\np.push('").split("\r").join("\\'")
+"');}return p.join('');";frappe.template.debug[str]=fn_str;try{frappe.template.compiled[key]=new Function("obj",fn_str);}catch(e){console.log("Error in Template:");console.log(fn_str);if(e.lineNumber){console.log("Error in Line "+e.lineNumber+", Col "+e.columnNumber+":");console.log(fn_str.split("\n")[e.lineNumber-1]);}}}
return frappe.template.compiled[key];};frappe.render=function(str,data,name){return frappe.template.compile(str,name)(data);};frappe.render_template=function(name,data){return frappe.render(frappe.templates[name],data,name);}
frappe.render_grid=function(opts){if(opts.grid){opts.columns=opts.grid.getColumns();opts.data=opts.grid.getData().getItems();}
if(!opts.content){opts.content=frappe.render_template("print_grid",opts);}
var html=frappe.render_template("print_template",opts);var w=window.open();w.document.write(html);w.document.close();};frappe.provide('frappe.desk.form');frappe.provide('frappe.desk.report');frappe.provide('frappe.utils');frappe.provide('frappe.model');frappe.provide('frappe.user');frappe.provide('frappe.session');frappe.provide('locals')
frappe.provide('locals.DocType')
frappe.provide("frappe.listview_settings");frappe.provide("frappe.listview_parent_route");frappe.settings.no_history=1;var NEWLINE='\n';var user=null;var user=null;var user_defaults=null;var user_roles=null;var user_fullname=null;var user_email=null;var user_img={};var _f={};var _p={};var _r={};var FILTER_SEP='\1';var frms={};var cur_frm=null;;frappe.utils.full_name=function(fn,ln){return fn+(ln?' ':'')+(ln?ln:'')}
function fmt_money(v,format){return format_number(v,format);}
function toTitle(str){var word_in=str.split(" ");var word_out=[];for(w in word_in){word_out[w]=word_in[w].charAt(0).toUpperCase()+word_in[w].slice(1);}
return word_out.join(" ");}
function is_null(v){if(v===null||v===undefined||cstr(v).trim()==="")return true;}
function set_value_in(ele,v,ftype,fopt,doc){$(ele).html(frappe.format(v,{fieldtype:ftype,options:fopt},null,doc));return;}
var $s=set_value_in;function copy_dict(d){var n={};for(var k in d)n[k]=d[k];return n;}
function replace_newlines(t){return t?t.replace(/\n/g,'<br>'):'';}
function validate_email(txt){return frappe.utils.validate_type(txt,"email");}
function validate_spl_chars(txt){return frappe.utils.validate_type(txt,"alphanum")}
function cstr(s){if(s==null)return'';return s+'';}
function nth(number){number=cint(number);var s='th';if((number+'').substr(-1)=='1')s='st';if((number+'').substr(-1)=='2')s='nd';if((number+'').substr(-1)=='3')s='rd';return number+s;}
function esc_quotes(s){if(s==null)s='';return s.replace(/'/,"\'");}
var crop=function(s,len){if(s.length>len)
return s.substr(0,len-3)+'...';else
return s;}
var strip=function(s,chars){if(s){var s=lstrip(s,chars)
s=rstrip(s,chars);return s;}}
var rstrip=function(s,chars){if(!chars)chars=['\n','\t',' '];var last_char=s.substr(s.length-1);while(in_list(chars,last_char)){var s=s.substr(0,s.length-1);last_char=s.substr(s.length-1);}
return s;}
function repl(s,dict){if(s==null)return'';for(key in dict){s=s.split("%("+key+")s").join(dict[key]);}
return s;}
var $r=repl;function replace_all(s,t1,t2){return s.split(t1).join(t2);}
function keys(obj){var mykeys=[];for(var key in obj)mykeys[mykeys.length]=key;return mykeys;}
function values(obj){var myvalues=[];for(var key in obj)myvalues[myvalues.length]=obj[key];return myvalues;}
function has_words(list,item){if(!item)return true;if(!list)return false;for(var i=0,j=list.length;i<j;i++){if(item.indexOf(list[i])!=-1)
return true;}
return false;}
function has_common(list1,list2){if(!list1||!list2)return false;for(var i=0,j=list1.length;i<j;i++){if(in_list(list2,list1[i]))return true;}
return false;}
var inList=in_list;function add_lists(l1,l2){return[].concat(l1).concat(l2);}
function docstring(obj){return JSON.stringify(obj);}
function remove_from_list(list,val){if(list.indexOf(val)!==-1){list.splice(list.indexOf(val),1);}
return list};function $btn(parent,label,onclick,style,css_class,is_ajax){if(css_class==='green')css_class='btn-primary';return new frappe.ui.Button({parent:parent,label:label,onclick:onclick,style:style,is_ajax:is_ajax,css_class:css_class}).btn;}
function empty_select(s){if(s.custom_select){s.empty();return;}
if(s.inp)s=s.inp;if(s){var tmplen=s.length;for(var i=0;i<tmplen;i++)s.options[0]=null;}}
function sel_val(s){if(s.custom_select){return s.inp.value?s.inp.value:'';}
if(s.inp)s=s.inp;try{if(s.selectedIndex<s.options.length)return s.options[s.selectedIndex].value;else return'';}catch(err){return'';}}
function add_sel_options(s,list,sel_val,o_style){if(s.custom_select){s.set_options(list)
if(sel_val)s.inp.value=sel_val;return;}
if(s.inp)s=s.inp;for(var i=0,len=list.length;i<len;i++){var o=new Option(list[i],list[i],false,(list[i]==sel_val?true:false));if(o_style)$y(o,o_style);s.options[s.options.length]=o;}}
var $n='\n';function set_title(t){document.title=(frappe.title_prefix?(frappe.title_prefix+' - '):'')+t;}
function $a(parent,newtag,className,cs,innerHTML,onclick){if(parent&&parent.substr)parent=$i(parent);var c=document.createElement(newtag);if(parent)
parent.appendChild(c);if(className){if(newtag.toLowerCase()=='img')
c.src=className
else
c.className=className;}
if(cs)$y(c,cs);if(innerHTML)c.innerHTML=innerHTML;if(onclick)c.onclick=onclick;return c;}
function $a_input(p,in_type,attributes,cs){if(!attributes)attributes={};var $input=$(p).append('<input type="'+in_type+'">').find('input:last');for(key in attributes)
$input.attr(key,attributes[key]);var input=$input.get(0);if(cs)
$y(input,cs);return input;}
function $dh(d){if(d&&d.substr)d=$i(d);if(d&&d.style.display.toLowerCase()!='none')d.style.display='none';}
function $ds(d){if(d&&d.substr)d=$i(d);var t='block';if(d&&in_list(['span','img','button'],d.tagName.toLowerCase()))
t='inline'
if(d&&d.style.display.toLowerCase()!=t)
d.style.display=t;}
function $di(d){if(d&&d.substr)d=$i(d);if(d)d.style.display='inline';}
function $i(id){if(!id)return null;if(id&&id.appendChild)return id;return document.getElementById(id);}
function $w(e,w){if(e&&e.style&&w)e.style.width=w;}
function $h(e,h){if(e&&e.style&&h)e.style.height=h;}
function $bg(e,w){if(e&&e.style&&w)e.style.backgroundColor=w;}
function $y(ele,s){if(ele&&s){for(var i in s)ele.style[i]=s[i];};return ele;}
function make_table(parent,nr,nc,table_width,widths,cell_style,table_style){var t=$a(parent,'table');t.style.borderCollapse='collapse';if(table_width)t.style.width=table_width;if(cell_style)t.cell_style=cell_style;for(var ri=0;ri<nr;ri++){var r=t.insertRow(ri);for(var ci=0;ci<nc;ci++){var c=r.insertCell(ci);if(ri==0&&widths&&widths[ci]){c.style.width=widths[ci];}
if(cell_style){for(var s in cell_style)c.style[s]=cell_style[s];}}}
t.append_row=function(){return append_row(this);}
if(table_style)$y(t,table_style);return t;}
function append_row(t,at,style){var r=t.insertRow(at?at:t.rows.length);if(t.rows.length>1){for(var i=0;i<t.rows[0].cells.length;i++){var c=r.insertCell(i);if(style)$y(c,style);}}
return r}
function $td(t,r,c){if(r<0)r=t.rows.length+r;if(c<0)c=t.rows[0].cells.length+c;return t.rows[r].cells[c];}
frappe.urllib={get_arg:function(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null)
return"";else
return decodeURIComponent(results[1]);},get_dict:function(){var d={}
var t=window.location.href.split('?')[1];if(!t)return d;if(t.indexOf('#')!=-1)t=t.split('#')[0];if(!t)return d;t=t.split('&');for(var i=0;i<t.length;i++){var a=t[i].split('=');d[decodeURIComponent(a[0])]=decodeURIComponent(a[1]);}
return d;},get_base_url:function(){var url=window.location.href.split('#')[0].split('?')[0].split('desk')[0];if(url.substr(url.length-1,1)=='/')url=url.substr(0,url.length-1)
return url}}
get_url_arg=frappe.urllib.get_arg;get_url_dict=frappe.urllib.get_dict;;function $c(command,args,callback,error,no_spinner,freeze_msg,btn){console.warn("This function '$c' has been deprecated and will be removed soon.");return frappe.request.call({args:$.extend(args,{cmd:command}),success:callback,error:error,btn:btn,freeze:freeze_msg,show_spinner:!no_spinner})}
function $c_obj(doc,method,arg,callback,no_spinner,freeze_msg,btn){console.warn("This function '$c_obj' has been deprecated and will be removed soon.");if(arg&&typeof arg!='string')arg=JSON.stringify(arg);args={cmd:'runserverobj',args:arg,method:method};if(typeof doc=='string'){args.doctype=doc;}else{args.docs=doc}
return frappe.request.call({args:args,success:callback,btn:btn,freeze:freeze_msg,show_spinner:!no_spinner});}
function $c_page(module,page,method,arg,callback,no_spinner,freeze_msg,btn){console.warn("This function '$c_page' has been deprecated and will be removed soon.");if(arg&&typeof arg!='string')arg=JSON.stringify(arg);return frappe.request.call({args:{cmd:module+'.page.'+page+'.'+page+'.'+method,arg:arg,method:method},success:callback,btn:btn,freeze:freeze_msg,show_spinner:!no_spinner});}
function $c_obj_csv(doc,method,arg){console.warn("This function '$c_obj_csv' has been deprecated and will be removed soon.");var args={}
args.cmd='runserverobj';args.as_csv=1;args.method=method;args.arg=arg;if(doc.substr)
args.doctype=doc;else
args.docs=doc;open_url_post(frappe.request.url,args);}
function open_url_post(URL,PARAMS,new_window){var temp=document.createElement("form");temp.action=URL;temp.method="POST";temp.style.display="none";if(new_window){temp.target='_blank';}
for(var x in PARAMS){var opt=document.createElement("textarea");opt.name=x;var val=PARAMS[x];if(typeof val!='string')
val=JSON.stringify(val);opt.value=val;temp.appendChild(opt);}
document.body.appendChild(temp);temp.submit();return temp;};function loadreport(dt,rep_name,onload){if(rep_name)
frappe.set_route('Report',dt,rep_name);else
frappe.set_route('Report',dt);}
function loaddoc(doctype,name,onload){frappe.model.with_doctype(doctype,function(){if(locals.DocType[doctype].in_dialog){_f.edit_record(doctype,name);}else{frappe.set_route('Form',doctype,name);}})}
var load_doc=loaddoc;frappe.create_routes={};function new_doc(doctype,opts){frappe.model.with_doctype(doctype,function(){if(frappe.create_routes[doctype]){frappe.set_route(frappe.create_routes[doctype]);}else{var new_doc=frappe.model.get_new_doc(doctype);if(opts&&opts.name_field){var meta=frappe.get_meta(doctype);if(meta.autoname&&meta.autoname.indexOf("field:")!==-1){new_doc[meta.autoname.substr(6)]=opts.name_field;}else if(meta.title_field){new_doc[meta.title_field]=opts.name_field;}}
frappe.set_route("Form",doctype,new_doc.name);}});}
var newdoc=new_doc;function loadpage(page_name,call_back,no_history){frappe.set_route(page_name);}
function loaddocbrowser(dt){frappe.set_route('List',dt);};frappe.templates["page"] = '<div class="page-head"> <div class="container"> <div class="row"> <div class="col-sm-7 col-xs-6 page-title">  <h1> <div class="text-ellipsis title-text"></div> <span class="indicator hide"></span> </h1> </div> <div class="text-right col-sm-5 col-xs-6 page-actions">  <h6 class="text-ellipsis sub-heading rtl hide text-muted"></h6> <span class="page-icon-group hide hidden-xs hidden-sm"></span>  <div class="btn-group menu-btn-group hide"> <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <span class="hidden-xs">{%= __("Menu") %} <span class="caret"></span></span> <span class="visible-xs"><i class="octicon octicon-triangle-down"></i></span> </button> <ul class="dropdown-menu" role="menu"> </ul> </div> <button class="btn btn-secondary btn-default btn-sm hide"></button> <div class="btn-group actions-btn-group hide"> <button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> {%= __("Actions") %} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"> </ul> </div> <button class="btn btn-primary btn-sm hide primary-action"></button> </div> </div> </div> </div> <div class="container page-body"> <div class="page-toolbar hide"> <div class="container"> </div> </div> <div class="page-wrapper"> <div class="page-content"> <div class="workflow-button-area btn-group pull-right hide"></div> <div class="clearfix"></div> </div> </div> </div> ';
frappe.ui.make_app_page=function(opts){opts.parent.page=new frappe.ui.Page(opts);return opts.parent.page;}
frappe.ui.Page=Class.extend({init:function(opts){$.extend(this,opts);this.set_document_title=true;this.buttons={};this.fields_dict={};this.views={};this.make();},make:function(){this.wrapper=$(this.parent);$(frappe.render_template("page",{})).appendTo(this.wrapper);if(this.single_column){this.add_view("main",'<div class="row layout-main">\
     <div class="col-md-12 layout-main-section-wrapper">\
      <div class="layout-main-section"></div>\
      <div class="layout-footer hide"></div>\
     </div>\
    </div>');}else{var main=this.add_view("main",'<div class="row layout-main">\
    <div class="col-md-2 layout-side-section"></div>\
    <div class="col-md-10 layout-main-section-wrapper">\
     <div class="layout-main-section"></div>\
     <div class="layout-footer hide"></div>\
    </div>\
   </div>');}
this.$title_area=this.wrapper.find("h1");this.$sub_title_area=this.wrapper.find("h6");if(this.set_document_title!==undefined)
this.set_document_title=this.set_document_title;if(this.title)
this.set_title(this.title);if(this.icon)
this.get_main_icon(this.icon);this.main=this.wrapper.find(".layout-main-section");this.sidebar=this.wrapper.find(".layout-side-section");this.footer=this.wrapper.find(".layout-footer");this.indicator=this.wrapper.find(".indicator");this.page_actions=this.wrapper.find(".page-actions");this.btn_primary=this.page_actions.find(".primary-action");this.btn_secondary=this.page_actions.find(".btn-secondary");this.menu=this.page_actions.find(".menu-btn-group .dropdown-menu");this.menu_btn_group=this.page_actions.find(".menu-btn-group");this.actions=this.page_actions.find(".actions-btn-group .dropdown-menu");this.actions_btn_group=this.page_actions.find(".actions-btn-group");this.page_form=$('<div class="page-form row hide"></div>').prependTo(this.main);this.icon_group=this.page_actions.find(".page-icon-group");},set_indicator:function(label,color){this.clear_indicator().removeClass("hide").html(label).addClass(color);},add_action_icon:function(icon,click){return $('<a class="text-muted no-decoration"><i class="'+icon+'"></i></a>').appendTo(this.icon_group.removeClass("hide")).click(click);},clear_indicator:function(){return this.indicator.removeClass().addClass("indicator hide");},get_icon_label:function(icon,label){return'<i class="visible-xs '+icon+'"></i><span class="hidden-xs">'+label+'</span>'},set_action:function(btn,opts){if(opts.icon){opts.label=this.get_icon_label(opts.icon,opts.label);}
this.clear_action_of(btn);btn.removeClass("hide").prop("disabled",false).html(opts.label).on("click",opts.click);if(opts.working_label){btn.attr("data-working-label",opts.working_label);}},set_primary_action:function(label,click,icon,working_label){this.set_action(this.btn_primary,{label:label,click:click,icon:icon,working_label:working_label});},set_secondary_action:function(label,click,icon,working_label){this.set_action(this.btn_secondary,{label:label,click:click,icon:icon,working_label:working_label});},clear_action_of:function(btn){btn.addClass("hide").unbind("click").removeAttr("data-working-label");},clear_primary_action:function(){this.clear_action_of(this.btn_primary);},clear_secondary_action:function(){this.clear_action_of(this.btn_secondary);},clear_actions:function(){this.clear_primary_action();this.clear_secondary_action();},clear_icons:function(){this.icon_group.addClass("hide").empty();},add_menu_item:function(label,click,standard){return this.add_dropdown_item(label,click,standard,this.menu);},clear_menu:function(){this.clear_btn_group(this.menu);},show_menu:function(){this.menu_btn_group.removeClass("hide");},hide_menu:function(){this.menu_btn_group.addClass("hide");},show_icon_group:function(){this.icon_group.removeClass("hide");},hide_icon_group:function(){this.icon_group.addClass("hide");},add_action_item:function(label,click,standard){return this.add_dropdown_item(label,click,standard,this.actions);},clear_actions_menu:function(){this.clear_btn_group(this.actions);},add_dropdown_item:function(label,click,standard,parent){parent.parent().removeClass("hide");var $li=$('<li><a class="grey-link">'+label+'</a><li>'),$link=$li.find("a").on("click",click);if(standard===true){$li.appendTo(parent);}else{this.divider=parent.find(".divider");if(!this.divider.length){this.divider=$('<li class="divider user-action"></li>').prependTo(parent);}
$li.addClass("user-action").insertBefore(this.divider);}
return $link;},clear_btn_group:function(parent){parent.empty();parent.parent().addClass("hide");},add_divider:function(){return $('<li class="divider"></li>').appendTo(this.menu);},clear_user_actions:function(){this.menu.find(".user-action").remove();},get_title_area:function(){return this.$title_area;},set_title:function(txt,icon){this.title=txt;document.title=txt.replace(/<[^>]*>/g,"");if(icon){txt='<span class="'+icon+' text-muted" style="font-size: inherit;"></span> '+txt;}
this.$title_area.find(".title-text").html(txt);},set_title_sub:function(txt){this.$sub_title_area.html(txt).toggleClass("hide",!!!txt);},add_module_icon:function(module,doctype,onclick,sub_title){var module_info=frappe.get_module(module);if(!module_info){module_info={icon:"icon-question-sign",color:"#ddd"}}
var icon=frappe.boot.doctype_icons[doctype]||module_info.icon;this.get_main_icon(icon).attr("doctype-name",doctype);this.set_title_left(function(){var route=frappe.get_route()[0]==module_info.link?"":module_info.link;frappe.set_route(route);});},get_main_icon:function(icon){return this.$title_area.find(".title-icon").html('<i class="'+icon+' icon-fixed-width"></i> ').toggle(true);},add_help_button:function(txt){},add_button:function(label,click,icon,is_title){},add_dropdown_button:function(parent,label,click,icon){frappe.ui.toolbar.add_dropdown_button(parent,label,click,icon);},add_label:function(label){this.show_form();return $("<label class='col-md-1 page-only-label'>"+label+" </label>").appendTo(this.page_form);},add_select:function(label,options){var field=this.add_field({label:label,fieldtype:"Select"})
return field.$wrapper.find("select").empty().add_options(options);},add_data:function(label){var field=this.add_field({label:label,fieldtype:"Data"});return field.$wrapper.find("input").attr("placeholder",label);},add_date:function(label,date){var field=this.add_field({label:label,fieldtype:"Date","default":date});return field.$wrapper.find("input").attr("placeholder",label);},add_check:function(label){return $("<div class='checkbox'><label><input type='checkbox'>"+label+"</label></div>").appendTo(this.page_form).find("input");},add_break:function(){this.page_form.append('<div class="clearfix invisible-xs"></div>');},add_field:function(df){this.show_form();var f=frappe.ui.form.make_control({df:df,parent:this.page_form,only_input:df.fieldtype=="Check"?false:true,})
f.refresh();$(f.wrapper).addClass('col-md-2').attr("title",__(df.label)).tooltip();f.$input.addClass("input-sm").attr("placeholder",__(df.label));if(df.fieldtype==="Check"){$(f.wrapper).find(":first-child").removeClass("col-md-offset-4 col-md-8");}
if(df.fieldtype=="Button"){$(f.wrapper).find(".page-control-label").html("&nbsp;")
f.$input.addClass("btn-sm").css({"width":"100%","margin-top":"-1px"});}
if(df["default"])
f.set_input(df["default"])
this.fields_dict[df.fieldname||df.label]=f;return f;},show_form:function(){this.page_form.removeClass("hide");},add_view:function(name,html){this.views[name]=$(html).appendTo($(this.wrapper).find(".page-content"));if(!this.current_view){this.current_view=this.views[name];}else{this.views[name].toggle(false);}
return this.views[name];},set_view:function(name){this.current_view&&this.current_view.toggle(false);this.current_view=this.views[name];this.previous_view_name=this.current_view_name;this.current_view_name=name;this.views[name].toggle(true);}});frappe.ui.scroll=function(element,animate,additional_offset){var header_offset=$(".navbar").height()+$(".page-head").height();var top=$(element).offset().top-header_offset-cint(additional_offset);if(animate){$("html, body").animate({scrollTop:top});}else{$(window).scrollTop(top);}};;frappe.ui.IconBar=Class.extend({init:function(parent,n_groups){this.parent=parent;this.buttons={};this.make(n_groups);},make:function(n_groups){this.$wrapper=$('<div class="iconbar-wrapper hide"></div>').appendTo(this.parent);for(var i=0;i<n_groups;i++){this.get_group(i+1);}},get_group:function(group){var $ul=this.$wrapper.find(".iconbar-"+group+" ul");if(!$ul.length)
$ul=$('<div class="iconbar iconbar-'+group+' hide"><ul></ul></div>').appendTo(this.$wrapper).find("ul");return $ul;},add_btn:function(group,icon,label,click){var $ul=this.get_group(group);var $li=$('<li><i class="'+icon+'"></i></li>').appendTo($ul).on("click",function(){click.apply(this);return false;});$li.find("i").attr("title",label).tooltip();this.$wrapper.find(".iconbar-"+group).removeClass("hide")
this.show();return $li;},hide:function(group){if(group){this.$wrapper.find(".iconbar-"+group).addClass("hide");this.check_if_all_hidden();}else{this.$wrapper.addClass("hide").trigger("hidden");}},show:function(group){if(group){this.$wrapper.find(".iconbar-"+group).removeClass("hide");this.show();}else{if(this.$wrapper.hasClass("hide"))
this.$wrapper.removeClass("hide").trigger("shown");}},clear:function(group){var me=this;this.$wrapper.find(".iconbar-"+group).addClass("hide").find("ul").empty();this.check_if_all_hidden();},check_if_all_hidden:function(){if(!this.$wrapper.find(".iconbar:visible").length){this.hide();}}});frappe.provide("frappe.ui.form");frappe.ui.form.Layout=Class.extend({init:function(opts){this.views={};this.pages=[];this.sections=[];this.fields_list=[];this.fields_dict={};this.labelled_section_count=0;this.ignore_types=frappe.model.layout_fields;$.extend(this,opts);},make:function(){if(!this.parent&&this.body)
this.parent=this.body;this.wrapper=$('<div class="form-layout">').appendTo(this.parent);if(!this.fields)
this.fields=frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype]);this.setup_tabbing();this.render();},refresh:function(doc){var me=this;if(doc)this.doc=doc;if(this.frm){this.wrapper.find(".empty-form-alert").remove();}
for(var i=0,l=this.fields_list.length;i<l;i++){var fieldobj=this.fields_list[i];if(me.doc){fieldobj.doc=me.doc;fieldobj.doctype=me.doc.doctype;fieldobj.docname=me.doc.name;fieldobj.df=frappe.meta.get_docfield(me.doc.doctype,fieldobj.df.fieldname,me.frm.doc.name);fieldobj.perm=me.frm.perm;};fieldobj.refresh&&fieldobj.refresh();}
if(this.frm&&this.frm.wrapper){$(this.frm.wrapper).trigger("refresh-fields");}
if(this.frm){setTimeout(function(){me.wrapper.find(".empty-form-alert").remove();if(!(me.wrapper.find(".frappe-control:visible").length)){$('<div class="empty-form-alert text-muted" style="margin: 15px; margin-top: -15px;">'+__("This form does not have any input")+'</div>').appendTo(me.wrapper)}},100);}
this.refresh_dependency();this.refresh_sections();},render:function(){var me=this;this.section=null;this.column=null;if(this.fields[0]&&this.fields[0].fieldtype!="Section Break"){this.make_section();}
$.each(this.fields,function(i,df){switch(df.fieldtype){case"Fold":me.make_page(df);break;case"Section Break":me.make_section(df);break;case"Column Break":me.make_column(df);break;default:me.make_field(df);}});},make_column:function(df){this.column=$('<div class="form-column">\
   <form>\
   </form>\
  </div>').appendTo(this.section.body).find("form").on("submit",function(){return false;})
var colspan=cint(12/this.section.find(".form-column").length);this.section.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-"+colspan);},make_field:function(df,colspan){!this.section&&this.make_section();!this.column&&this.make_column();var fieldobj=frappe.ui.form.make_control({df:df,doctype:this.doctype,parent:this.column.get(0),frm:this.frm});fieldobj.layout=this;this.fields_list.push(fieldobj);this.fields_dict[df.fieldname]=fieldobj;if(this.frm){fieldobj.perm=this.frm.perm;}},make_page:function(df){var me=this,head=$('<div class="form-clickable-section text-center">\
    <a class="btn-fold h6 text-muted">'+__("Show more details")+'</a>\
   </div>').appendTo(this.wrapper);this.page=$('<div class="form-page second-page hide"></div>').appendTo(this.wrapper);this.fold_btn=head.find(".btn-fold").on("click",function(){var page=$(this).parent().next();if(page.hasClass("hide")){$(this).removeClass("btn-fold").html(__("Hide details"));page.removeClass("hide");frappe.ui.scroll($(this),true,30);me.folded=false;}else{$(this).addClass("btn-fold").html(__("Show more details"));page.addClass("hide");me.folded=true;}});this.section=null;this.folded=true;},unfold:function(){this.fold_btn.trigger('click');},make_section:function(df){var me=this;if(!this.page){this.page=$('<div class="form-page"></div>').appendTo(this.wrapper);}
this.section=$('<div class="row form-section">').appendTo(this.page);this.sections.push(this.section);var section=this.section[0];section.df=df;if(df){if(df.label){$('<div class="col-sm-12 text-muted"><h4>'+__(df.label)+'</h4></div>').appendTo(this.section);}
if(df.description){$('<div class="col-sm-12 small text-muted">'+__(df.description)+'</div>').appendTo(this.section);}
this.fields_dict[df.fieldname]=section;this.fields_list.push(section);}
this.section.body=$('<div>').appendTo(this.section);section.row={wrapper:section};section.refresh=function(){if(!this.df)
return;var hide=this.df.hidden||this.df.hidden_due_to_dependency;if(!hide&&me.frm&&!me.frm.get_perm(this.df.permlevel||0,"read")){hide=true;}
$(this).toggleClass("hide-control",!!hide);}
this.column=null;section.refresh.call(section);return this.section;},refresh_sections:function(){var cnt=0;this.wrapper.find(".form-section:not(.hide-control)").each(function(){var $this=$(this).removeClass("empty-section").removeClass("visible-section").removeClass("shaded-section");if(!$(this).find(".frappe-control:not(.hide-control)").length){$(this).addClass("empty-section");}else{$(this).addClass("visible-section");if(cnt%2){$(this).addClass("shaded-section");}
cnt++;}});},refresh_section_count:function(){this.wrapper.find(".section-count-label:visible").each(function(i){$(this).html(i+1);});},setup_tabbing:function(){var me=this;this.wrapper.on("keydown",function(ev){if(ev.which==9){var current=$(ev.target),doctype=current.attr("data-doctype"),fieldname=current.attr("data-fieldname");if(doctype)
return me.handle_tab(doctype,fieldname,ev.shiftKey);}})},handle_tab:function(doctype,fieldname,shift){var me=this,grid_row=null;prev=null,fields=me.fields_list,in_grid=false;if(doctype!=me.doctype){grid_row=me.get_open_grid_row()
fields=grid_row.layout.fields_list;}
for(var i=0,len=fields.length;i<len;i++){if(fields[i].df.fieldname==fieldname){if(shift){if(prev){this.set_focus(prev)}else{$(this.primary_button).focus();}
break;}
if(i==len-1){if(grid_row){if(grid_row.doc.idx==grid_row.grid.grid_rows.length){grid_row.toggle_view(false,function(){me.handle_tab(grid_row.grid.df.parent,grid_row.grid.df.fieldname);})}else{grid_row.grid.grid_rows[grid_row.doc.idx].toggle_view(true);}}else{$(this.primary_button).focus();}}else{me.focus_on_next_field(i,fields);}
break;}
if(fields[i].disp_status==="Write")
prev=fields[i];}
return false;},focus_on_next_field:function(start_idx,fields){for(var i=start_idx+1,len=fields.length;i<len;i++){if(fields[i].disp_status==="Write"&&!in_list(frappe.model.no_value_type,fields[i].df.fieldtype)){this.set_focus(fields[i]);break;}}},set_focus:function(field){if(field.df.fieldtype=="Table"){if(!field.grid.grid_rows.length){field.grid.add_new_row(1);}else{field.grid.grid_rows[0].toggle_view(true);}}
else if(field.editor){field.editor.set_focus();}
else if(field.$input){field.$input.focus();}},get_open_grid_row:function(){return $(".grid-row-open").data("grid_row");},refresh_dependency:function(){var me=this;var doc=me.doc;if(!doc)return;var parent=(doc.parent&&doc.parenttype&&locals[doc.parenttype])?locals[doc.parenttype][doc.parent]:{};var has_dep=false;for(fkey in this.fields_list){var f=this.fields_list[fkey];f.dependencies_clear=true;if(f.df.depends_on){has_dep=true;}}
if(!has_dep)return;for(var i=me.fields_list.length-1;i>=0;i--){var f=me.fields_list[i];f.guardian_has_value=true;if(f.df.depends_on){if(f.df.depends_on.substr(0,5)=='eval:'){f.guardian_has_value=eval(f.df.depends_on.substr(5));}else if(f.df.depends_on.substr(0,3)=='fn:'&&me.frm){f.guardian_has_value=me.frm.script_manager.trigger(f.df.depends_on.substr(3),me.doctype,me.docname);}else{if(!doc[f.df.depends_on]){f.guardian_has_value=false;}}
if(f.guardian_has_value){if(f.df.hidden_due_to_dependency){f.df.hidden_due_to_dependency=false;f.refresh();}}else{if(!f.df.hidden_due_to_dependency){f.df.hidden_due_to_dependency=true;f.refresh();}}}}
this.refresh_section_count();}});frappe.provide('frappe.ui');frappe.ui.FieldGroup=frappe.ui.form.Layout.extend({init:function(opts){$.extend(this,opts);this._super();$.each(this.fields||[],function(i,f){if(!f.fieldname&&f.label){f.fieldname=f.label.replace(/ /g,"_").toLowerCase();}})},make:function(){if(this.fields){this._super();this.refresh();$.each(this.fields_list,function(i,f){if(f.df["default"])
f.set_input(f.df["default"]);})
if(!this.no_submit_on_enter){this.catch_enter_as_submit();}}},first_button:false,catch_enter_as_submit:function(){var me=this;$(this.body).find('input[type="text"], input[type="password"]').keypress(function(e){if(e.which==13){if(this.has_primary_action){e.preventDefault();this.get_primary_btn().trigger("click");}}});},get_input:function(fieldname){var field=this.fields_dict[fieldname];return $(field.txt?field.txt:field.input);},get_field:function(fieldname){return this.fields_dict[fieldname];},get_values:function(){var ret={};var errors=[];for(var key in this.fields_dict){var f=this.fields_dict[key];if(f.get_parsed_value){var v=f.get_parsed_value();if(f.df.reqd&&!v)
errors.push('- '+__(f.df.label)+"<br>");if(v)ret[f.df.fieldname]=v;}}
if(errors.length){msgprint($.format('<i class="icon-warning-sign"></i>\
      <b>{0}</b>:\
      <br/><br/>\
      {1}',[__('Missing Values Required'),errors.join('\n')]));return null;}
return ret;},get_value:function(key){var f=this.fields_dict[key];return f&&(f.get_parsed_value?f.get_parsed_value():null);},set_value:function(key,val){var f=this.fields_dict[key];if(f){f.set_input(val);}},set_input:function(key,val){return this.set_value(key,val);},set_values:function(dict){for(var key in dict){if(this.fields_dict[key]){this.set_value(key,dict[key]);}}},clear:function(){for(key in this.fields_dict){var f=this.fields_dict[key];if(f){f.set_input(f.df['default']||'');}}},});;frappe.ui.form.make_control=function(opts){var control_class_name="Control"+opts.df.fieldtype.replace(/ /g,"");if(frappe.ui.form[control_class_name]){return new frappe.ui.form[control_class_name](opts);}else{console.log("Invalid Control Name: "+opts.df.fieldtype);}}
frappe.ui.form.Control=Class.extend({init:function(opts){$.extend(this,opts);this.make();if(frappe.boot.user&&frappe.boot.user.name==="Administrator"&&frappe.boot.developer_mode===1&&this.$wrapper){this.$wrapper.attr("title",__(this.df.fieldname));}
if(this.render_input){this.refresh();}},make:function(){this.make_wrapper();this.$wrapper.addClass("ui-front").attr("data-fieldtype",this.df.fieldtype);this.wrapper=this.$wrapper.get(0);this.wrapper.fieldobj=this;},make_wrapper:function(){this.$wrapper=$("<div class='frappe-control'></div>").appendTo(this.parent);},toggle:function(show){this.df.hidden=show?0:1;this.refresh();},get_status:function(explain){if(!this.doctype&&!this.docname){return"Write";}
var status=frappe.perm.get_field_display_status(this.df,frappe.model.get_doc(this.doctype,this.docname),this.perm||(this.frm&&this.frm.perm),explain);if(this.doctype&&status==="Read"&&is_null(frappe.model.get_value(this.doctype,this.docname,this.df.fieldname))&&!in_list(["HTML"],this.df.fieldtype)){if(explain)console.log("By Hide Read-only, null fields: None");status="None";}
return status;},refresh:function(){this.disp_status=this.get_status();this.$wrapper&&this.$wrapper.toggleClass("hide-control",this.disp_status=="None")&&this.$wrapper.trigger("refresh");},get_doc:function(){return this.doctype&&this.docname&&locals[this.doctype]&&locals[this.doctype][this.docname]||{};},set_value:function(value){this.parse_validate_and_set_in_model(value);},parse_validate_and_set_in_model:function(value){var me=this;if(this.inside_change_event)return;this.inside_change_event=true;if(this.parse)value=this.parse(value);var set=function(value){me.set_model_value(value);me.inside_change_event=false;me.set_mandatory&&me.set_mandatory(value);}
this.validate?this.validate(value,set):set(value);},get_parsed_value:function(){var me=this;return this.get_value?(this.parse?this.parse(this.get_value()):this.get_value()):undefined;},set_model_value:function(value){if(frappe.model.set_value(this.doctype,this.docname,this.df.fieldname,value,this.df.fieldtype)){this.last_value=value;}},});frappe.ui.form.ControlHTML=frappe.ui.form.Control.extend({make:function(){this._super();var me=this;this.disp_area=this.wrapper;this.$wrapper.on("refresh",function(){var content=me.get_content();if(content)me.$wrapper.html(content);return false;});},get_content:function(){return this.df.options||"";},html:function(html){this.$wrapper.html(html||this.get_content());}});frappe.ui.form.ControlHeading=frappe.ui.form.ControlHTML.extend({get_content:function(){return"<h4>"+__(this.df.label)+"</h4>";}});frappe.ui.form.ControlImage=frappe.ui.form.Control.extend({make:function(){this._super();var me=this;this.$wrapper.css({"margin":"0px"});this.$body=$("<div></div>").appendTo(this.$wrapper).css({"margin-bottom":"10px"})
this.$wrapper.on("refresh",function(){var doc=null;me.$body.empty();var doc=me.get_doc();if(doc&&me.df.options&&doc[me.df.options]){me.$img=$("<img src='"+doc[me.df.options]+"' class='img-responsive'>").appendTo(me.$body);}else{me.$buffer=$("<div class='missing-image'><i class='octicon octicon-circle-slash'></i></div>").appendTo(me.$body)}
return false;});$('<div class="clearfix"></div>').appendTo(this.$wrapper);}});frappe.ui.form.ControlInput=frappe.ui.form.Control.extend({horizontal:true,make:function(){this._super();this.set_input_areas();this.set_max_width();this.setup_update_on_refresh();},make_wrapper:function(){if(this.only_input){this.$wrapper=$('<div class="form-group frappe-control">').appendTo(this.parent);}else{this.$wrapper=$('<div class="frappe-control">\
    <div class="form-group" style="margin: 0px">\
     <label class="control-label" style="padding-right: 0px;"></label>\
     <div class="control-input-wrapper">\
      <div class="control-input"></div>\
      <div class="control-value like-disabled-input" style="display: none;"></div>\
      <p class="help-box small text-muted hidden-xs"></p>\
     </div>\
    </div>\
   </div>').appendTo(this.parent);}},set_input_areas:function(){if(this.only_input){this.input_area=this.wrapper;}else{this.label_area=this.label_span=this.$wrapper.find("label").get(0);this.input_area=this.$wrapper.find(".control-input").get(0);this.disp_area=this.$wrapper.find(".control-value").get(0);}},set_max_width:function(){if(this.horizontal){this.$wrapper.addClass("input-max-width");}},setup_update_on_refresh:function(){var me=this;this.$wrapper.on("refresh",function(){if(me.disp_status!="None"){if(me.doctype&&me.docname){me.value=frappe.model.get_value(me.doctype,me.docname,me.df.fieldname);}
if(me.disp_status=="Write"){me.disp_area&&$(me.disp_area).toggle(false);$(me.input_area).toggle(true);$(me.input_area).find("input").prop("disabled",false);if(!me.has_input){me.make_input();if(me.df.on_make){me.df.on_make(me);}};if(me.doctype&&me.docname){me.set_input(me.value);}else{me.set_input(me.value||null);}}else{$(me.input_area).toggle(false);$(me.input_area).find("input").prop("disabled",true);if(me.disp_area){me.set_disp_area();$(me.disp_area).toggle(true);}}
me.set_description();me.set_label();me.set_mandatory(me.value);}
return false;});},set_disp_area:function(){this.disp_area&&$(this.disp_area).html(frappe.format(this.value,this.df,{no_icon:true,inline:true},this.doc||(this.frm&&this.frm.doc)));},bind_change_event:function(){var me=this;this.$input&&this.$input.on("change",this.change||function(e){if(me.df.change){me.df.change.apply(this,e);return;}
if(me.doctype&&me.docname&&me.get_value){me.parse_validate_and_set_in_model(me.get_value());}else{var value=me.get_value();var parsed=me.parse?me.parse(value):value;var set_input=function(before,after){if(before!==after){me.set_input(after);}else{me.set_mandatory&&me.set_mandatory(before);}}
if(me.validate){me.validate(parsed,function(validated){set_input(value,validated);});}else{set_input(value,parsed);}}});},bind_focusout:function(){if(frappe.dom.is_touchscreen()){var me=this;this.$input&&this.$input.on("focusout",function(){if(frappe.dom.is_touchscreen()){frappe.ui.scroll(me.$wrapper);}});}},set_label:function(label){if(label)this.df.label=label;if(this.only_input||this.df.label==this._label)
return;var icon="";this.label_span.innerHTML=(icon?'<i class="'+icon+'"></i> ':"")+
__(this.df.label)||"&nbsp;";this._label=this.df.label;},set_description:function(){if(this.only_input||this.df.description===this._description)
return;if(this.df.description){this.$wrapper.find(".help-box").html(__(this.df.description));}else{this.set_empty_description();}
this._description=this.df.description;},set_empty_description:function(){this.$wrapper.find(".help-box").html("");},set_mandatory:function(value){this.$wrapper.toggleClass("has-error",(this.df.reqd&&is_null(value))?true:false);},});frappe.ui.form.ControlData=frappe.ui.form.ControlInput.extend({html_element:"input",input_type:"text",make_input:function(){this.$input=$("<"+this.html_element+">").attr("type",this.input_type).addClass("input-with-feedback form-control").prependTo(this.input_area)
this.set_input_attributes();this.input=this.$input.get(0);this.has_input=true;this.bind_change_event();this.bind_focusout();},set_input_attributes:function(){this.$input.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname).attr("placeholder",this.df.placeholder||"")
if(this.doctype){this.$input.attr("data-doctype",this.doctype);}
if(this.df.input_css){this.$input.css(this.df.input_css);}
if(this.df.input_class){this.$input.addClass(this.df.input_class);}},set_input:function(val){this.$input&&this.$input.val(this.format_for_input(val));this.set_disp_area();this.last_value=val;this.set_mandatory&&this.set_mandatory(val);},get_value:function(){return this.$input?this.$input.val():undefined;},format_for_input:function(val){return val==null?"":val;},validate:function(v,callback){if(this.df.options=='Phone'){if(v+''==''){callback("");return;}
v1=''
v=v.replace(/ /g,'').replace(/-/g,'').replace(/\(/g,'').replace(/\)/g,'');if(v&&v.substr(0,1)=='+'){v1='+';v=v.substr(1);}
if(v&&v.substr(0,2)=='00'){v1+='00';v=v.substr(2);}
if(v&&v.substr(0,1)=='0'){v1+='0';v=v.substr(1);}
v1+=cint(v)+'';callback(v1);}else if(this.df.options=='Email'){if(v+''==''){callback("");return;}
if(!validate_email(v)){msgprint(__("Invalid Email: {0}",[v]));callback("");}else
callback(v);}else{callback(v);}}});frappe.ui.form.ControlReadOnly=frappe.ui.form.ControlData.extend({get_status:function(explain){var status=this._super(explain);if(status==="Write")
status="Read";return;},});frappe.ui.form.ControlPassword=frappe.ui.form.ControlData.extend({input_type:"password"});frappe.ui.form.ControlInt=frappe.ui.form.ControlData.extend({make_input:function(){var me=this;this._super();this.$input.addClass("text-right").on("focus",function(){setTimeout(function(){if(!document.activeElement)return;me.validate(document.activeElement.value,function(val){document.activeElement.value=val;});document.activeElement.select()},100);return false;})},parse:function(value){return cint(value,null);},validate:function(value,callback){return callback(value);}});frappe.ui.form.ControlFloat=frappe.ui.form.ControlInt.extend({parse:function(value){return isNaN(parseFloat(value))?null:flt(value,this.get_precision());},format_for_input:function(value){var number_format;if(this.df.fieldtype==="Float"&&this.df.options&&this.df.options.trim()){number_format=this.get_number_format();}
var formatted_value=format_number(parseFloat(value),number_format,this.get_precision());return isNaN(parseFloat(value))?"":formatted_value;},get_number_format:function(){var currency=frappe.meta.get_field_currency(this.df,this.get_doc());return get_number_format(currency);},get_precision:function(){return this.df.precision||cint(frappe.boot.sysdefaults.float_precision,null);}});frappe.ui.form.ControlCurrency=frappe.ui.form.ControlFloat.extend({format_for_input:function(value){var formatted_value=format_number(parseFloat(value),this.get_number_format(),this.get_precision());return isNaN(parseFloat(value))?"":formatted_value;},get_precision:function(){if(!this.df.precision){this.df.precision=get_number_format_info(this.get_number_format()).precision;}
return this.df.precision;}});frappe.ui.form.ControlPercent=frappe.ui.form.ControlFloat;frappe.ui.form.ControlDate=frappe.ui.form.ControlData.extend({datepicker_options:{altFormat:'yy-mm-dd',changeYear:true,yearRange:"-70Y:+10Y",},make_input:function(){this._super();this.set_datepicker();},set_datepicker:function(){this.datepicker_options.dateFormat=(frappe.boot.sysdefaults.date_format||'yyyy-mm-dd').replace("yyyy","yy")
this.$input.datepicker(this.datepicker_options);},parse:function(value){return value?dateutil.user_to_str(value):value;},format_for_input:function(value){return value?dateutil.str_to_user(value):"";},validate:function(value,callback){if(!dateutil.validate(value)){msgprint(__("Date must be in format: {0}",[sys_defaults.date_format||"yyyy-mm-dd"]));callback("");return;}
return callback(value);}})
import_timepicker=function(){frappe.require("assets/frappe/js/lib/jquery/jquery.ui.slider.min.js");frappe.require("assets/frappe/js/lib/jquery/jquery.ui.sliderAccess.js");frappe.require("assets/frappe/js/lib/jquery/jquery.ui.timepicker-addon.css");frappe.require("assets/frappe/js/lib/jquery/jquery.ui.timepicker-addon.js");}
frappe.ui.form.ControlTime=frappe.ui.form.ControlData.extend({make_input:function(){import_timepicker();this._super();this.$input.timepicker({timeFormat:'HH:mm:ss',});}});frappe.ui.form.ControlDatetime=frappe.ui.form.ControlDate.extend({set_datepicker:function(){this.datepicker_options.timeFormat="HH:mm:ss";this.datepicker_options.dateFormat=(frappe.boot.sysdefaults.date_format||'yy-mm-dd').replace('yyyy','yy');this.$input.datetimepicker(this.datepicker_options);},make_input:function(){import_timepicker();this._super();},});frappe.ui.form.ControlText=frappe.ui.form.ControlData.extend({html_element:"textarea",horizontal:false,make_wrapper:function(){this._super();this.$wrapper.find(".like-disabled-input").addClass("for-description");}});frappe.ui.form.ControlLongText=frappe.ui.form.ControlText;frappe.ui.form.ControlSmallText=frappe.ui.form.ControlText;frappe.ui.form.ControlCheck=frappe.ui.form.ControlData.extend({input_type:"checkbox",make_wrapper:function(){this.$wrapper=$('<div class="form-group frappe-control">\
   <div class="checkbox">\
    <label>\
     <span class="input-area"></span>\
     <span class="disp-area" style="display:none; margin-left: -20px;"></span>\
     <span class="label-area small"></span>\
    </label>\
    <p class="help-box small text-muted"></p>\
   </div>\
  </div>').appendTo(this.parent)},set_input_areas:function(){this.label_area=this.label_span=this.$wrapper.find(".label-area").get(0);this.input_area=this.$wrapper.find(".input-area").get(0);this.disp_area=this.$wrapper.find(".disp-area").get(0);},make_input:function(){this._super();this.$input.removeClass("form-control");},parse:function(value){return this.input.checked?1:0;},validate:function(value,callback){return callback(cint(value));},set_input:function(value){this.input.checked=value?1:0;this.last_value=value;}});frappe.ui.form.ControlButton=frappe.ui.form.ControlData.extend({make_input:function(){var me=this;this.$input=$('<button class="btn btn-default btn-sm">').prependTo(me.input_area).on("click",function(){me.onclick();});this.input=this.$input.get(0);this.set_input_attributes();this.has_input=true;this.$wrapper.find(".control-label").addClass("hide");},onclick:function(){if(this.frm&&this.frm.doc){if(this.frm.script_manager.get_handlers(this.df.fieldname,this.doctype,this.docname).length){this.frm.script_manager.trigger(this.df.fieldname,this.doctype,this.docname);}else{this.frm.runscript(this.df.options,this);}}
else if(this.df.click){this.df.click();}},set_input_areas:function(){this._super();$(this.disp_area).removeClass().addClass("hide");},set_empty_description:function(){this.$wrapper.find(".help-box").empty().toggle(false);},set_label:function(){$(this.label_span).html("&nbsp;");this.$input&&this.$input.html((this.df.icon?('<i class="'+this.df.icon+' icon-fixed-width"></i> '):"")+__(this.df.label));}});frappe.ui.form.ControlAttach=frappe.ui.form.ControlData.extend({make_input:function(){var me=this;this.$input=$('<button class="btn btn-default btn-sm btn-attach">').html(__("Attach")).prependTo(me.input_area).on("click",function(){me.onclick();});this.$value=$('<div style="margin-top: 5px;">\
   <div class="text-ellipsis" style="display: inline-block; width: 90%;">\
    <i class="icon-paper-clip"></i> \
    <a class="attached-file" target="_blank"></a>\
   </div>\
   <a class="close">&times;</a></div>').prependTo(me.input_area).toggle(false);this.input=this.$input.get(0);this.set_input_attributes();this.has_input=true;this.$value.find(".close").on("click",function(){if(me.frm){me.frm.attachments.remove_attachment_by_filename(me.value,function(){me.parse_validate_and_set_in_model(null);me.refresh();});}else{me.dataurl=null;me.fileobj=null;me.set_input(null);me.refresh();}})},onclick:function(){if(this.doc){var doc=this.doc.parent&&frappe.model.get_doc(this.doc.parenttype,this.doc.parent)||this.doc;if(doc.__islocal){frappe.msgprint(__("Please save the document before uploading."));return;}}
if(!this.dialog){this.dialog=new frappe.ui.Dialog({title:__(this.df.label||__("Upload")),fields:[{fieldtype:"HTML",fieldname:"upload_area"},{fieldtype:"HTML",fieldname:"or_attach",options:__("Or")},{fieldtype:"Select",fieldname:"select",label:__("Select from existing attachments")},]});}
this.dialog.show();this.dialog.get_field("upload_area").$wrapper.empty();var attachments=this.frm&&this.frm.attachments.get_attachments()||[];var select=this.dialog.get_field("select");if(attachments.length){attachments=$.map(attachments,function(o){return o.file_url;})
select.df.options=[""].concat(attachments);select.toggle(true);this.dialog.get_field("or_attach").toggle(true);select.refresh();}else{this.dialog.get_field("or_attach").toggle(false);select.toggle(false);}
select.$input.val("");this.set_upload_options();frappe.upload.make(this.upload_options);},set_upload_options:function(){var me=this;this.upload_options={parent:this.dialog.get_field("upload_area").$wrapper,args:{},max_width:this.df.max_width,max_height:this.df.max_height,options:this.df.options,btn:this.dialog.set_primary_action(__("Upload")),on_no_attach:function(){var selected=me.dialog.get_field("select").get_value();if(selected){me.parse_validate_and_set_in_model(selected);me.dialog.hide();}else{msgprint(__("Please attach a file or set a URL"));}},callback:function(attachment,r){me.on_upload_complete(attachment);me.dialog.hide();},onerror:function(){me.dialog.hide();},}
if(this.frm){this.upload_options.args={from_form:1,doctype:this.frm.doctype,docname:this.frm.docname,}}else{this.upload_options.on_attach=function(fileobj,dataurl){me.dialog.hide();me.fileobj=fileobj;me.dataurl=dataurl;if(me.on_attach){me.on_attach()}
if(me.df.on_attach){me.df.on_attach(fileobj,dataurl);}
me.on_upload_complete();}}},set_input:function(value,dataurl){this.value=value;if(this.value){this.$input.toggle(false);if(this.value.indexOf(",")!==-1){var parts=this.value.split(",");var filename=parts[0];var dataurl=parts[1];}
this.$value.toggle(true).find(".attached-file").html(filename||this.value).attr("href",dataurl||this.value);}else{this.$input.toggle(true);this.$value.toggle(false);}},get_value:function(){if(this.frm){return this.value;}else{return this.fileobj?(this.fileobj.filename+","+this.dataurl):null;}},on_upload_complete:function(attachment){if(this.frm){this.parse_validate_and_set_in_model(attachment.file_url);this.refresh();this.frm.attachments.update_attachment(attachment);}else{this.value=this.get_value();this.refresh();}},});frappe.ui.form.ControlAttachImage=frappe.ui.form.ControlAttach.extend({make_input:function(){var me=this;this._super();this.img_wrapper=$('<div style="margin: 7px 0px;">\
   <div class="missing-image attach-missing-image"><i class="octicon octicon-circle-slash"></i></div></div>').prependTo(this.input_area);this.img=$("<img class='img-responsive attach-image-display'>").appendTo(this.img_wrapper).toggle(false);this.img_wrapper.find(".missing-image").on("click",function(){me.$input.click();});this.img.on("click",function(){me.$input.click();});this.$wrapper.on("refresh",function(){if(me.get_value()){$(me.input_area).find(".missing-image").toggle(false);me.img.attr("src",me.dataurl?me.dataurl:me.value).toggle(true);}else{$(me.input_area).find(".missing-image").toggle(true);me.img.toggle(false);}});},});frappe.ui.form.ControlSelect=frappe.ui.form.ControlData.extend({html_element:"select",make_input:function(){var me=this;this._super();this.set_options();},set_input:function(value){this.set_options(value||"");this._super(value);var input_value=this.$input.val();if(this.doctype&&this.docname){var model_value=frappe.model.get_value(this.doctype,this.docname,this.df.fieldname);if(model_value==null&&(input_value||"")!=(model_value||"")){this.set_model_value(input_value);}else{this.last_value=value;}}else{if(value!==input_value){this.set_value(input_value);}}},set_options:function(value){var options=this.df.options||[];if(typeof this.df.options==="string"){options=this.df.options.split("\n");}
if(this.in_filter&&options[0]!=""){options=add_lists([''],options);}
if(options.toString()===this.last_options){return;}
this.last_options=options.toString();var selected=this.$input.find(":selected").val();this.$input.empty().add_options(options||[]);if(value===undefined&&selected){this.$input.val(selected);}},get_file_attachment_list:function(){if(!this.frm)return;var fl=frappe.model.docinfo[this.frm.doctype][this.frm.docname];if(fl&&fl.attachments){this.set_description("");var options=[""];$.each(fl.attachments,function(i,f){options.push(f.file_url)});return options;}else{this.set_description(__("Please attach a file first."))
return[""];}}});frappe.ui.form.ControlLink=frappe.ui.form.ControlData.extend({make_input:function(){var me=this;$('<div class="link-field" style="position: relative;">\
   <input type="text" class="input-with-feedback form-control">\
   <span class="link-btn">\
    <a class="btn-open no-decoration" title="'+__("Open Link")+'">\
     <i class="icon-link"></i></a>\
   </span>\
  </div>').prependTo(this.input_area);this.$input_area=$(this.input_area);this.$input=this.$input_area.find('input');this.$link=this.$input_area.find('.link-btn');this.set_input_attributes();this.$input.on("focus",function(){me.$link.toggle(true);setTimeout(function(){if(!me.$input.val()){me.$input.autocomplete("search","");}},500);});this.$input.on("blur",function(){setTimeout(function(){me.$link.toggle(false);},500);});this.input=this.$input.get(0);this.has_input=true;var me=this;this.setup_buttons();this.setup_autocomplete();},get_options:function(){return this.df.options;},setup_buttons:function(){var me=this;this.$input_area.find(".btn-open").on("click",function(){var value=me.get_value();if(value&&me.get_options())
frappe.set_route("Form",me.get_options(),value);});if(this.only_input)this.$input_area.find(".link-btn").remove();},open_advanced_search:function(){var doctype=this.get_options();if(!doctype)return;new frappe.ui.form.LinkSelector({doctype:doctype,target:this,txt:this.get_value()});return false;},new_doc:function(){var doctype=this.get_options();if(!doctype)return;if(this.frm){this.frm.new_doc(doctype,this,{"name_field":this.get_value()});}else{new_doc(doctype,{"name_field":this.get_value()});}
return false;},setup_autocomplete:function(){var me=this;this.$input.on("blur",function(){if(me.selected){me.selected=false;return;}
if(me.doctype&&me.docname){var value=me.get_value();if(value!==me.last_value){me.parse_validate_and_set_in_model(value);}}});this.$input.cache={};this.$input.autocomplete({minLength:0,source:function(request,response){var doctype=me.get_options();if(!doctype)return;if(!me.$input.cache[doctype]){me.$input.cache[doctype]={};}
if(me.$input.cache[doctype][request.term]!=null){response(me.$input.cache[doctype][request.term]);}
var args={'txt':request.term,'doctype':doctype,};me.set_custom_query(args);return frappe.call({type:"GET",method:'frappe.desk.search.search_link',no_spinner:true,args:args,callback:function(r){if(!me.df.only_select){if(frappe.model.can_create(doctype)&&me.df.fieldtype!=="Dynamic Link"){r.results.push({value:"<span class='text-primary link-option'>"
+"<i class='icon-plus' style='margin-right: 5px;'></i> "
+__("Create a new {0}",[__(me.df.options)])
+"</span>",action:me.new_doc});};r.results.push({value:"<span class='text-primary link-option'>"
+"<i class='icon-search' style='margin-right: 5px;'></i> "
+__("Advanced Search")
+"</span>",action:me.open_advanced_search});}
me.$input.cache[doctype][request.term]=r.results;response(r.results);},});},open:function(event,ui){me.autocomplete_open=true;},close:function(event,ui){me.autocomplete_open=false;},focus:function(event,ui){if(ui.item.action){return false;}},select:function(event,ui){me.autocomplete_open=false;if(ui.item.action){ui.item.action.apply(me);return false;}
if(me.frm&&me.frm.doc){me.selected=true;me.parse_validate_and_set_in_model(ui.item.value);}else{me.$input.val(ui.item.value);me.$input.trigger("change");}}}).data('ui-autocomplete')._renderItem=function(ul,d){var html="<strong>"+__(d.value)+"</strong>";if(d.description&&d.value!==d.description){html+='<br><span class="small">'+__(d.description)+'</span>';}
return $('<li></li>').data('item.autocomplete',d).html('<a><p>'+html+'</p></a>').appendTo(ul);};this.$wrapper.find(".ui-helper-hidden-accessible").remove();},set_custom_query:function(args){var set_nulls=function(obj){$.each(obj,function(key,value){if(value!==undefined){obj[key]=value||null;}});return obj;}
if(this.get_query||this.df.get_query){var get_query=this.get_query||this.df.get_query;if($.isPlainObject(get_query)){$.extend(args,set_nulls(get_query));}else if(typeof(get_query)==="string"){args.query=get_query;}else{var q=(get_query)(this.frm&&this.frm.doc,this.doctype,this.docname);if(typeof(q)==="string"){args.query=q;}else if($.isPlainObject(q)){if(q.filters){set_nulls(q.filters);}
$.extend(args,q);}}}
if(this.df.filters){set_nulls(this.df.filters);if(!args.filters)args.filters={};$.extend(args.filters,this.df.filters);}},validate:function(value,callback){var me=this;if(this.df.options=="[Select]"){callback(value);return;}
this.frm.script_manager.validate_link_and_fetch(this.df,this.get_options(),this.docname,value,callback);},});frappe.ui.form.ControlDynamicLink=frappe.ui.form.ControlLink.extend({get_options:function(){var options=frappe.model.get_value(this.df.parent,this.docname,this.df.options);if(!options){msgprint(__("Please set {0} first",[frappe.meta.get_docfield(this.df.parent,this.df.options,this.docname).label]));}
return options;},});frappe.ui.form.ControlCode=frappe.ui.form.ControlText.extend({make_input:function(){this._super();$(this.input_area).find("textarea").css({"height":"400px","font-family":"Monaco, \"Courier New\", monospace"});}});frappe.ui.form.ControlTextEditor=frappe.ui.form.ControlCode.extend({editor_name:"bsEditor",horizontal:false,make_input:function(){$(this.input_area).css({"min-height":"360px"});this.has_input=true;this.make_rich_text_editor();this.make_markdown_editor();this.make_switcher();},make_rich_text_editor:function(){var me=this;this.editor_wrapper=$("<div>").appendTo(this.input_area);var onchange=function(value){me.md_editor.val(value);me.parse_validate_and_set_in_model(value);}
this.editor=new(frappe.provide(this.editor_name))({parent:this.editor_wrapper,change:onchange,field:this});this.editor.editor.on("blur",function(){onchange(me.editor.clean_html());});this.editor.editor.keypress("ctrl+s meta+s",function(){me.frm.save_or_update();});},make_markdown_editor:function(){var me=this;this.md_editor_wrapper=$("<div class='hide'>").appendTo(this.input_area);this.md_editor=$("<textarea class='form-control'>").css({"height":"451px","font-family":"Monaco, \"Courier New\", monospace"}).appendTo(this.md_editor_wrapper).allowTabs().on("change",function(){var value=$(this).val();me.editor.set_input(value);me.parse_validate_and_set_in_model(value);});$('<div class="text-muted small">Add &lt;!-- markdown --&gt; \
   to always interpret as markdown</div>').appendTo(this.md_editor_wrapper);},make_switcher:function(){var me=this;this.current_editor=this.editor;this.switcher=$('<p class="text-right small">\
   <a href="#" class="switcher"></a></p>').appendTo(this.input_area).find("a").click(function(){me.switch();return false;});this.render_switcher();},switch:function(){if(this.current_editor===this.editor){var value=this.editor.get_value();this.editor_wrapper.addClass("hide");this.md_editor_wrapper.removeClass("hide");this.current_editor=this.md_editor;this.add_type_marker("markdown");}else{var value=this.md_editor.val();this.md_editor_wrapper.addClass("hide");this.editor_wrapper.removeClass("hide");this.current_editor=this.editor;this.add_type_marker("html");}
this.render_switcher();},add_type_marker:function(marker){var opp_marker=marker==="html"?"markdown":"html";if(!this.value)this.value="";if(this.value.indexOf("<!-- "+opp_marker+" -->")!==-1){this.set_value(this.value.split("<!-- "+opp_marker+" -->").join("<!-- "+marker+" -->"));}else if(this.value.indexOf("<!-- "+marker+" -->")===-1){this.set_value(this.value+"\n\n\n<!-- "+marker+" -->");}},render_switcher:function(){this.switcher.html(__("Edit as {0}",[this.current_editor==this.editor?__("Markdown"):__("Rich Text")]));},get_value:function(){return this.current_editor===this.editor?this.editor.get_value():this.md_editor.val();},set_input:function(value){this._set_input(value);var is_markdown=false;if(value){if(value.indexOf("<!-- markdown -->")!==-1){var is_markdown=true;}
if((is_markdown&&this.current_editor===this.editor)||(!is_markdown&&this.current_editor===this.md_editor)){this.switch();}}},_set_input:function(value){this.editor.set_input(value);this.md_editor.val(value);this.last_value=value;}});frappe.ui.form.ControlTable=frappe.ui.form.Control.extend({make:function(){this._super();this.grid=new frappe.ui.form.Grid({frm:this.frm,df:this.df,perm:this.perm||this.frm.perm,parent:this.wrapper})
if(this.frm)
this.frm.grids[this.frm.grids.length]=this;if(this.df.description){$('<p class="text-muted small">'+__(this.df.description)+'</p>').appendTo(this.wrapper);}
var me=this;this.$wrapper.on("refresh",function(){me.grid.refresh();return false;});}})
frappe.ui.form.fieldtype_icons={"Date":"icon-calendar","Time":"icon-time","Datetime":"icon-time","Code":"icon-code","Select":"icon-flag"};;frappe.ui.form.LinkSelector=Class.extend({_help:__("Dialog box to select a Link Value"),init:function(opts){$.extend(this,opts);var me=this;if(this.doctype!="[Select]"){frappe.model.with_doctype(this.doctype,function(r){me.make();});}else{this.make();}},make:function(){this.dialog=new frappe.ui.Dialog({title:__("Select {0}",[(this.doctype=='[Select]')?__("value"):__(this.doctype)]),fields:[{fieldtype:"Data",fieldname:"txt",label:__("Beginning with"),description:__("You can use wildcard %"),},{fieldtype:"HTML",fieldname:"results"}],primary_action_label:__("Search"),primary_action:function(){me.search();}});me=this;if(this.txt)
this.dialog.fields_dict.txt.set_input(this.txt);this.dialog.get_input("txt").on("keypress",function(e){if(e.which===13){me.search();}});this.dialog.show();},search:function(btn){var args={txt:this.dialog.fields_dict.txt.get_value(),doctype:this.doctype,searchfield:"name"},me=this;if(this.target.set_custom_query){this.target.set_custom_query(args);}
if(this.target.is_grid&&this.target.fieldinfo[this.fieldname]&&this.target.fieldinfo[this.fieldname].get_query){$.extend(args,this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc));}
return frappe.call({method:"frappe.desk.search.search_widget",type:"GET",args:args,callback:function(r){var parent=me.dialog.fields_dict.results.$wrapper;parent.empty();if(r.values.length){$.each(r.values,function(i,v){var row=$(repl('<p><b><a href="#" data-value="%(name)s">%(name)s</a></b> \
       <span class="text-muted">%(values)s</span></p>',{name:v[0],values:v.splice(1).join(", ")})).appendTo(parent);row.find("a").click(function(){var value=$(this).attr("data-value");var $link=this;if(me.target.is_grid){me.set_in_grid(value);}else{if(me.target.doctype)
me.target.parse_validate_and_set_in_model(value);else{me.target.set_input(value);me.target.$input.trigger("change");}
me.dialog.hide();}
return false;})})}else{$('<div class="alert alert-info">'+__("No Results")
+(frappe.model.can_read(me.doctype)?('. <a class="new-doc">'
+__("Make a new")+" "+__(me.doctype)+"</a>"):'')
+'</div>').appendTo(parent).find(".new-doc").click(function(){cur_frm.new_doc(me.doctype,me.target);});}},btn:this.dialog.get_primary_btn()});},set_in_grid:function(value){var me=this,updated=false;if(this.qty_fieldname){frappe.prompt({fieldname:"qty",fieldtype:"Float",label:"Qty","default":1,reqd:1},function(data){console.log(data);$.each(me.target.frm.doc[me.target.df.fieldname]||[],function(i,d){if(d[me.fieldname]===value){frappe.model.set_value(d.doctype,d.name,me.qty_fieldname,data.qty);show_alert(__("Added {0} ({1})",[value,d[me.qty_fieldname]]));updated=true;return false;}});if(!updated){var d=me.target.add_new_row();frappe.model.set_value(d.doctype,d.name,me.qty_fieldname,data.qty);frappe.model.set_value(d.doctype,d.name,me.fieldname,value);show_alert(__("Added {0} ({1})",[value,data.qty]));}},__("Set Quantity"),__("Set"));}else{var d=me.target.add_new_row();frappe.model.set_value(d.doctype,d.name,me.fieldname,value);show_alert(__("{0} added",[value]));}}});frappe.provide('frappe.ui');var cur_dialog;frappe.ui.open_dialogs=[];frappe.ui.Dialog=frappe.ui.FieldGroup.extend({init:function(opts){this.display=false;this.is_dialog=true;$.extend(this,opts);this._super();this.make();},make:function(){this.$wrapper=frappe.get_modal("","");this.wrapper=this.$wrapper.find('.modal-dialog').get(0);this.make_head();this.body=this.$wrapper.find(".modal-body").get(0);this._super();if(this.primary_action){this.set_primary_action(this.primary_action_label||__("Submit"),this.primary_action);}
var me=this;this.$wrapper.on("hide.bs.modal",function(){me.display=false;if(frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===me){frappe.ui.open_dialogs.pop();if(frappe.ui.open_dialogs.length)
cur_dialog=frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1];else
cur_dialog=null;}
me.onhide&&me.onhide();}).on("shown.bs.modal",function(){me.display=true;cur_dialog=me;frappe.ui.open_dialogs.push(me);var first=$(me.body).find('.modal-content :input:first');if(first.length&&first.attr("data-fieldtype")!="Date"){try{first.get(0).focus();}catch(e){console.log("Dialog: unable to focus on first input: "+e);}}
me.on_page_show&&me.on_page_show();})},get_primary_btn:function(){return this.$wrapper.find(".modal-header .btn-primary");},set_primary_action:function(label,click){this.has_primary_action=true;return this.get_primary_btn().removeClass("hide").html(label).click(click);},make_head:function(){var me=this;this.set_title(this.title);},set_title:function(t){this.$wrapper.find(".modal-title").html(t);},show:function(){this.$wrapper.modal("show");},hide:function(from_event){this.$wrapper.modal("hide");},no_cancel:function(){this.$wrapper.find('.close').toggle(false);}});$(document).bind('keydown',function(e){if(cur_dialog&&!cur_dialog.no_cancel_flag&&e.which==27){cur_dialog.hide();}});;frappe.ui.Button=function(args){var me=this;$.extend(this,{make:function(){me.btn=frappe.dom.add(args.parent,'button','btn '+(args.css_class||'btn-default'));me.btn.args=args;me.loading_img=frappe.dom.add(me.btn.args.parent,'img','',{margin:'0px 4px -2px 4px',display:'none'});me.loading_img.src='assets/frappe/images/ui/button-load.gif';me.btn.innerHTML=args.label;me.btn.user_onclick=args.onclick;$(me.btn).bind('click',function(){if(!this.disabled&&this.user_onclick)
this.user_onclick(this);})
me.btn.set_working=me.set_working;me.btn.done_working=me.done_working;if(me.btn.args.style)
frappe.dom.css(me.btn,args.style);},set_working:function(){me.btn.disabled='disabled';$(me.loading_img).css('display','inline');},done_working:function(){me.btn.disabled=false;$(me.loading_img).toggle(false);}});this.make();};frappe.provide("frappe.ui")
frappe.ui.app_icon={get_html:function(app,small,modules){if(!modules){modules=frappe.modules;}
var module=modules[app]
var icon=module.icon;var color=module.color;if(icon.split(".").slice(-1)[0]==="svg"){$.ajax({url:icon,dataType:"text",async:false,success:function(data){icon=data;}})
icon='<object>'+icon+'</object>';}else{icon='<i class="'+icon+'" title="'+module.label+'"></i>';}
return'<div class="app-icon'+(small?" app-icon-small":"")
+'" style="background-color: '+color+'" title="'+module.label+'">'+icon+'</div>'}};frappe.provide('frappe.model');$.extend(frappe.model,{no_value_type:['Section Break','Column Break','HTML','Table','Button','Image','Fold','Heading'],layout_fields:['Section Break','Column Break','Fold'],std_fields_list:['name','owner','creation','modified','modified_by','_user_tags','_comments','_assign','_starred_by','docstatus','parent','parenttype','parentfield','idx'],std_fields:[{fieldname:'name',fieldtype:'Link',label:__('ID')},{fieldname:'owner',fieldtype:'Data',label:__('Created By')},{fieldname:'idx',fieldtype:'Int',label:__('Index')},{fieldname:'creation',fieldtype:'Date',label:__('Created On')},{fieldname:'modified',fieldtype:'Date',label:__('Last Updated On')},{fieldname:'modified_by',fieldtype:'Data',label:__('Last Updated By')},{fieldname:'_user_tags',fieldtype:'Data',label:__('Tags')},{fieldname:'_starred_by',fieldtype:'Data',label:__('Starred By')},{fieldname:'_comments',fieldtype:'Text',label:__('Comments')},{fieldname:'_assign',fieldtype:'Text',label:__('Assigned To')},{fieldname:'docstatus',fieldtype:'Int',label:__('Document Status')},],std_fields_table:[{fieldname:'parent',fieldtype:'Data',label:__('Parent')},],new_names:{},events:{},is_value_type:function(fieldtype){return frappe.model.no_value_type.indexOf(fieldtype)===-1;},get_std_field:function(fieldname){var docfield=$.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table),function(d){if(d.fieldname==fieldname)return d;});if(!docfield.length){msgprint(__("Unknown Column: {0}",[fieldname]));}
return docfield[0];},with_doctype:function(doctype,callback){if(locals.DocType[doctype]){callback();}else{var cached_timestamp=null;if(localStorage["_doctype:"+doctype]){var cached_doc=JSON.parse(localStorage["_doctype:"+doctype]);cached_timestamp=cached_doc.modified;}
return frappe.call({method:'frappe.desk.form.load.getdoctype',type:"GET",args:{doctype:doctype,with_parent:1,cached_timestamp:cached_timestamp},freeze:true,callback:function(r){if(r.exc){msgprint(__("Unable to load: {0}",[__(doctype)]));throw"No doctype";return;}
if(r.message=="use_cache"){frappe.model.sync(cached_doc);}else{localStorage["_doctype:"+doctype]=JSON.stringify(r.docs);}
frappe.model.init_doctype(doctype);frappe.defaults.set_user_permissions(r.user_permissions);callback(r);}});}},init_doctype:function(doctype){var meta=locals.DocType[doctype];if(meta.__list_js){eval(meta.__list_js);}
if(meta.__calendar_js){eval(meta.__calendar_js);}
if(meta.__map_js){eval(meta.__map_js);}},with_doc:function(doctype,name,callback){if(!name)name=doctype;if(locals[doctype]&&locals[doctype][name]&&frappe.model.get_docinfo(doctype,name)){callback(name);}else{return frappe.call({method:'frappe.desk.form.load.getdoc',type:"GET",args:{doctype:doctype,name:name},freeze:true,callback:function(r){callback(name,r);}});}},get_docinfo:function(doctype,name){return frappe.model.docinfo[doctype]&&frappe.model.docinfo[doctype][name]||null;},get_shared:function(doctype,name){return frappe.model.get_docinfo(doctype,name).shared;},get_server_module_name:function(doctype){var dt=frappe.model.scrub(doctype);var module=frappe.model.scrub(locals.DocType[doctype].module);var app=frappe.boot.module_app[module];return app+"."+module+'.doctype.'+dt+'.'+dt;},scrub:function(txt){return txt.replace(/ /g,"_").toLowerCase();},can_create:function(doctype){return frappe.boot.user.can_create.indexOf(doctype)!==-1;},can_read:function(doctype){return frappe.boot.user.can_read.indexOf(doctype)!==-1;},can_write:function(doctype){return frappe.boot.user.can_write.indexOf(doctype)!==-1;},can_get_report:function(doctype){return frappe.boot.user.can_get_report.indexOf(doctype)!==-1;},can_delete:function(doctype){if(!doctype)return false;return frappe.boot.user.can_delete.indexOf(doctype)!==-1;},can_cancel:function(doctype){if(!doctype)return false;return frappe.boot.user.can_cancel.indexOf(doctype)!==-1;},is_submittable:function(doctype){if(!doctype)return false;return locals.DocType[doctype]&&locals.DocType[doctype].is_submittable;},is_table:function(doctype){if(!doctype)return false;return locals.DocType[doctype]&&locals.DocType[doctype].istable;},is_single:function(doctype){if(!doctype)return false;return locals.DocType[doctype]&&locals.DocType[doctype].issingle;},can_import:function(doctype,frm){if(user_roles.indexOf("System Manager")!==-1)return true;if(frm)return frm.perm[0].import===1;return frappe.boot.user.can_import.indexOf(doctype)!==-1;},can_export:function(doctype,frm){if(user_roles.indexOf("System Manager")!==-1)return true;if(frm)return frm.perm[0].export===1;return frappe.boot.user.can_export.indexOf(doctype)!==-1;},can_print:function(doctype,frm){if(frm)return frm.perm[0].print===1;return frappe.boot.user.can_print.indexOf(doctype)!==-1;},can_email:function(doctype,frm){if(frm)return frm.perm[0].email===1;return frappe.boot.user.can_email.indexOf(doctype)!==-1;},can_share:function(doctype,frm){if(frm){return frm.perm[0].share===1;}
return frappe.boot.user.can_share.indexOf(doctype)!==-1;},can_set_user_permissions:function(doctype,frm){if(user_roles.indexOf("System Manager")!==-1)return true;if(frm)return frm.perm[0].set_user_permissions===1;return frappe.boot.user.can_set_user_permissions.indexOf(doctype)!==-1;},has_value:function(dt,dn,fn){var val=locals[dt]&&locals[dt][dn]&&locals[dt][dn][fn];var df=frappe.meta.get_docfield(dt,fn,dn);if(df.fieldtype=='Table'){var ret=false;$.each(locals[df.options]||{},function(k,d){if(d.parent==dn&&d.parenttype==dt&&d.parentfield==df.fieldname){ret=true;return false;}});}else{var ret=!is_null(val);}
return ret?true:false;},get_list:function(doctype,filters){var docsdict=locals[doctype]||locals[":"+doctype]||{};if($.isEmptyObject(docsdict))
return[];return frappe.utils.filter_dict(docsdict,filters);},get_value:function(doctype,filters,fieldname,callback){if(callback){frappe.call({method:"frappe.client.get_value",args:{doctype:doctype,fieldname:fieldname,filters:filters},callback:function(r){if(!r.exc){callback(r.message);}}});}else{if(typeof filters==="string"&&locals[doctype]&&locals[doctype][filters]){return locals[doctype][filters][fieldname];}else{var l=frappe.get_list(doctype,filters);return(l.length&&l[0])?l[0][fieldname]:null;}}},set_value:function(doctype,docname,fieldname,value,fieldtype){var doc=locals[doctype]&&locals[doctype][docname];if(doc&&doc[fieldname]!==value){doc[fieldname]=value;frappe.model.trigger(fieldname,value,doc);return true;}else{if(fieldtype=="Link"){frappe.model.trigger(fieldname,value,doc);}}},on:function(doctype,fieldname,fn){frappe.provide("frappe.model.events."+doctype);if(!frappe.model.events[doctype][fieldname]){frappe.model.events[doctype][fieldname]=[];}
frappe.model.events[doctype][fieldname].push(fn);},trigger:function(fieldname,value,doc){var run=function(events,event_doc){$.each(events||[],function(i,fn){fn&&fn(fieldname,value,event_doc||doc);});};if(frappe.model.events[doc.doctype]){run(frappe.model.events[doc.doctype][fieldname]);run(frappe.model.events[doc.doctype]['*']);};},get_doc:function(doctype,name){if($.isPlainObject(name)){var doc=frappe.get_list(doctype,name);return doc&&doc.length?doc[0]:null;}
return locals[doctype]?locals[doctype][name]:null;},get_children:function(doctype,parent,parentfield,filters){if($.isPlainObject(doctype)){var doc=doctype;var filters=parentfield
var parentfield=parent;}else{var doc=frappe.get_doc(doctype,parent);}
var children=doc[parentfield]||[];if(filters){return frappe.utils.filter_dict(children,filters);}else{return children;}},clear_table:function(doc,parentfield){for(var i=0,l=(doc[parentfield]||[]).length;i<l;i++){var d=doc[parentfield][i];delete locals[d.doctype][d.name];}
doc[parentfield]=[];},remove_from_locals:function(doctype,name){this.clear_doc(doctype,name);if(frappe.views.formview[doctype]){delete frappe.views.formview[doctype].frm.opendocs[name];}},clear_doc:function(doctype,name){var doc=locals[doctype]&&locals[doctype][name];if(!doc)return;var parent=null;if(doc.parenttype){var parent=doc.parent,parenttype=doc.parenttype,parentfield=doc.parentfield;}
delete locals[doctype][name];if(parent){var parent_doc=locals[parenttype][parent];var newlist=[],idx=1;$.each(parent_doc[parentfield],function(i,d){if(d.name!=name){newlist.push(d);d.idx=idx;idx++;}
parent_doc[parentfield]=newlist;});}},get_no_copy_list:function(doctype){var no_copy_list=['name','amended_from','amendment_date','cancel_reason'];var docfields=frappe.get_doc("DocType",doctype).fields||[];for(var i=0,j=docfields.length;i<j;i++){var df=docfields[i];if(cint(df.no_copy))no_copy_list.push(df.fieldname);}
return no_copy_list;},delete_doc:function(doctype,docname,callback){frappe.confirm(__("Permanently delete {0}?",[docname]),function(){return frappe.call({method:'frappe.client.delete',args:{doctype:doctype,name:docname},callback:function(r,rt){if(!r.exc){frappe.model.clear_doc(doctype,docname);if(frappe.ui.toolbar.recent)
frappe.ui.toolbar.recent.remove(doctype,docname);if(callback)callback(r,rt);}}})})},rename_doc:function(doctype,docname,callback){var d=new frappe.ui.Dialog({title:__("Rename {0}",[__(docname)]),fields:[{label:__("New Name"),fieldtype:"Data",reqd:1},{label:__("Merge with existing"),fieldtype:"Check",fieldname:"merge"},]});d.set_primary_action(__("Rename"),function(){var args=d.get_values();if(!args)return;return frappe.call({method:"frappe.model.rename_doc.rename_doc",args:{doctype:doctype,old:docname,"new":args.new_name,"merge":args.merge},btn:d.get_primary_btn(),callback:function(r,rt){if(!r.exc){$(document).trigger('rename',[doctype,docname,r.message||args.new_name]);if(locals[doctype]&&locals[doctype][docname])
delete locals[doctype][docname];d.hide();if(callback)
callback(r.message);}}});});d.show();},round_floats_in:function(doc,fieldnames){if(!fieldnames){fieldnames=frappe.meta.get_fieldnames(doc.doctype,doc.parent,{"fieldtype":["in",["Currency","Float"]]});}
for(var i=0,j=fieldnames.length;i<j;i++){var fieldname=fieldnames[i];doc[fieldname]=flt(doc[fieldname],precision(fieldname,doc));}},validate_missing:function(doc,fieldname){if(!doc[fieldname]){frappe.throw(__("Please specify")+": "+
__(frappe.meta.get_label(doc.doctype,fieldname,doc.parent||doc.name)));}},get_all_docs:function(doc){var all=[doc];for(key in doc){if($.isArray(doc[key])){var children=doc[key];for(var i=0,l=children.length;i<l;i++){all.push(children[i]);}}}
return all;}});frappe.get_doc=frappe.model.get_doc;frappe.get_children=frappe.model.get_children;frappe.get_list=frappe.model.get_list;var getchildren=function(doctype,parent,parentfield){var children=[];$.each(locals[doctype]||{},function(i,d){if(d.parent===parent&&d.parentfield===parentfield){children.push(d);}});return children;};frappe.provide('frappe.meta.docfield_map');frappe.provide('frappe.meta.docfield_copy');frappe.provide('frappe.meta.docfield_list');frappe.provide('frappe.meta.doctypes');frappe.provide("frappe.meta.precision_map");frappe.get_meta=function(doctype){return locals["DocType"][doctype];}
$.extend(frappe.meta,{sync:function(doc){$.each(doc.fields,function(i,df){frappe.meta.add_field(df);})
frappe.meta.sync_messages(doc);if(doc.__print_formats)frappe.model.sync(doc.__print_formats);if(doc.__workflow_docs)frappe.model.sync(doc.__workflow_docs);},add_field:function(df){frappe.provide('frappe.meta.docfield_map.'+df.parent);frappe.meta.docfield_map[df.parent][df.fieldname||df.label]=df;if(!frappe.meta.docfield_list[df.parent])
frappe.meta.docfield_list[df.parent]=[];for(var i in frappe.meta.docfield_list[df.parent]){var d=frappe.meta.docfield_list[df.parent][i];if(df.fieldname==d.fieldname)
return;}
frappe.meta.docfield_list[df.parent].push(df);},make_docfield_copy_for:function(doctype,docname){var c=frappe.meta.docfield_copy;if(!c[doctype])
c[doctype]={};if(!c[doctype][docname])
c[doctype][docname]={};var docfield_list=frappe.meta.docfield_list[doctype]||[];for(var i=0,j=docfield_list.length;i<j;i++){var df=docfield_list[i];c[doctype][docname][df.fieldname||df.label]=copy_dict(df);}},get_docfield:function(dt,fn,dn){return frappe.meta.get_docfield_copy(dt,dn)[fn];},get_docfields:function(doctype,name,filters){var docfield_map=frappe.meta.get_docfield_copy(doctype,name);var docfields=frappe.meta.sort_docfields(docfield_map);if(filters){docfields=frappe.utils.filter_dict(docfields,filters);}
return docfields;},get_fields_to_check_permissions:function(doctype,name,user_permission_doctypes){var fields=$.map(frappe.meta.get_docfields(doctype,name),function(df){return(df.fieldtype==="Link"&&df.ignore_user_permissions!==1&&user_permission_doctypes.indexOf(df.options)!==-1)?df:null;});if(user_permission_doctypes.indexOf(doctype)!==-1){fields=fields.concat({label:"Name",fieldname:name,options:doctype});}
return fields;},sort_docfields:function(docs){return values(docs).sort(function(a,b){return a.idx-b.idx});},get_docfield_copy:function(doctype,name){if(!name)return frappe.meta.docfield_map[doctype];if(!(frappe.meta.docfield_copy[doctype]&&frappe.meta.docfield_copy[doctype][name])){frappe.meta.make_docfield_copy_for(doctype,name);}
return frappe.meta.docfield_copy[doctype][name];},get_fieldnames:function(doctype,name,filters){return $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[doctype],filters),function(df){return df.fieldname;});},has_field:function(dt,fn){return frappe.meta.docfield_map[dt][fn];},get_parentfield:function(parent_dt,child_dt){var df=(frappe.get_doc("DocType",parent_dt).fields||[]).filter(function(d)
{return d.fieldtype==="Table"&&options===child_dt})
if(!df.length)
throw"parentfield not found for "+parent_dt+", "+child_dt;return df[0].fieldname;},get_label:function(dt,fn,dn){if(fn==="owner"){return"Owner";}else{return this.get_docfield(dt,fn,dn).label||fn;}},get_print_formats:function(doctype){var print_format_list=["Standard"];var default_print_format=locals.DocType[doctype].default_print_format;var print_formats=frappe.get_list("Print Format",{doc_type:doctype}).sort(function(a,b){return(a>b)?1:-1;});$.each(print_formats,function(i,d){if(!in_list(print_format_list,d.name))
print_format_list.push(d.name);});if(default_print_format&&default_print_format!="Standard"){var index=print_format_list.indexOf(default_print_format)-1;print_format_list.sort().splice(index,1);print_format_list.unshift(default_print_format);}
return print_format_list;},sync_messages:function(doc){if(doc.__messages){$.extend(frappe._messages,doc.__messages);}},get_field_currency:function(df,doc){var currency=frappe.boot.sysdefaults.currency;if(!doc&&cur_frm)
doc=cur_frm.doc;if(df&&df.options){if(doc&&df.options.indexOf(":")!=-1){var options=df.options.split(":");if(options.length==3){var docname=doc[options[1]];if(!docname&&cur_frm){docname=cur_frm.doc[options[1]];}
currency=frappe.model.get_value(options[0],docname,options[2])||frappe.model.get_value(":"+options[0],docname,options[2])||currency;}}else if(doc&&doc[df.options]){currency=doc[df.options];}else if(cur_frm&&cur_frm.doc[df.options]){currency=cur_frm.doc[df.options];}}
return currency;},get_field_precision:function(df,doc){var precision=cint(frappe.defaults.get_default("float_precision"))||3;if(df&&cint(df.precision)){precision=cint(df.precision);}else if(df&&df.fieldtype==="Currency"){var currency=this.get_field_currency(df,doc);var number_format=get_number_format(currency);var number_format_info=get_number_format_info(number_format);precision=number_format_info.precision;}
return precision;},});;$.extend(frappe.model,{docinfo:{},sync:function(r){if(!r.docs&&!r.docinfo)r={docs:r};if($.isPlainObject(r.docs))r.docs=[r.docs];if(r.docs){var last_parent_name=null;var dirty=[];for(var i=0,l=r.docs.length;i<l;i++){var d=r.docs[i];frappe.model.add_to_locals(d);d.__last_sync_on=new Date();if(d.doctype==="DocType"){frappe.meta.sync(d);}
if(cur_frm&&cur_frm.doctype==d.doctype&&cur_frm.docname==d.name){cur_frm.doc=d;}
if(d.localname){frappe.model.new_names[d.localname]=d.name;$(document).trigger('rename',[d.doctype,d.localname,d.name]);delete locals[d.doctype][d.localname];if(i===0){frappe.model.docinfo[d.doctype][d.name]=frappe.model.docinfo[d.doctype][d.localname];frappe.model.docinfo[d.doctype][d.localname]=undefined;}}}
if(cur_frm&&dirty.indexOf(cur_frm.doctype)!==-1)cur_frm.dirty();}
if(r.docinfo){if(r.docs){var doc=r.docs[0];}else{var doc=cur_frm.doc;}
if(!frappe.model.docinfo[doc.doctype])
frappe.model.docinfo[doc.doctype]={};frappe.model.docinfo[doc.doctype][doc.name]=r.docinfo;}
return r.docs;},add_to_locals:function(doc){if(!locals[doc.doctype])
locals[doc.doctype]={};if(!doc.name&&doc.__islocal){if(!doc.parentfield)frappe.model.clear_doc(doc);doc.name=frappe.model.get_new_name(doc.doctype);if(!doc.parentfield)frappe.provide("frappe.model.docinfo."+doc.doctype+"."+doc.name);}
locals[doc.doctype][doc.name]=doc;if(!doc.parentfield){for(var i in doc){var value=doc[i];if($.isArray(value)){for(var x=0,y=value.length;x<y;x++){var d=value[x];if(!d.parent)
d.parent=doc.name;frappe.model.add_to_locals(d);}}}}}});;frappe.provide("frappe.model");$.extend(frappe.model,{new_names:{},new_name_count:{},get_new_doc:function(doctype,parent_doc,parentfield){frappe.provide("locals."+doctype);var doc={docstatus:0,doctype:doctype,name:frappe.model.get_new_name(doctype),__islocal:1,__unsaved:1,owner:user};frappe.model.set_default_values(doc,parent_doc);if(parent_doc){$.extend(doc,{parent:parent_doc.name,parentfield:parentfield,parenttype:parent_doc.doctype,});if(!parent_doc[parentfield])parent_doc[parentfield]=[];doc.idx=parent_doc[parentfield].length+1;parent_doc[parentfield].push(doc);}else{frappe.provide("frappe.model.docinfo."+doctype+"."+doc.name);}
frappe.model.add_to_locals(doc);return doc;},make_new_doc_and_get_name:function(doctype){return frappe.model.get_new_doc(doctype).name;},get_new_name:function(doctype){var cnt=frappe.model.new_name_count
if(!cnt[doctype])
cnt[doctype]=0;cnt[doctype]++;return __('New')+' '+__(doctype)+' '+cnt[doctype];},set_default_values:function(doc,parent_doc){var doctype=doc.doctype;var docfields=frappe.meta.docfield_list[doctype]||[];var updated=[];for(var fid=0;fid<docfields.length;fid++){var f=docfields[fid];if(!in_list(frappe.model.no_value_type,f.fieldtype)&&doc[f.fieldname]==null){var v=frappe.model.get_default_value(f,doc,parent_doc);if(v){if(in_list(["Int","Check"],f.fieldtype))
v=cint(v);else if(in_list(["Currency","Float"],f.fieldtype))
v=flt(v);doc[f.fieldname]=v;updated.push(f.fieldname);}else if(f.fieldtype=="Select"&&f.options&&!in_list(["[Select]","Loading..."],f.options)){doc[f.fieldname]=f.options.split("\n")[0];}}}
return updated;},get_default_value:function(df,doc,parent_doc){var user_permissions=frappe.defaults.get_user_permissions();var has_user_permissions=(df.fieldtype==="Link"&&user_permissions&&df.ignore_user_permissions!=1&&user_permissions[df.options]);if(df.fieldtype==="Link"&&df.options!=="User"){if(has_user_permissions&&user_permissions[df.options].length===1){return user_permissions[df.options][0];}
var user_default=frappe.defaults.get_user_default(df.fieldname);var is_allowed_user_default=user_default&&(!has_user_permissions||user_permissions[df.options].indexOf(user_default)!==-1);if(is_allowed_user_default){return frappe.defaults.get_user_default(df.fieldname);}}
if(df['default']){if(df["default"]=="__user"||df["default"]=="user"){return user;}else if(df["default"]=="user_fullname"){return user_fullname;}else if(df["default"]=="Today"){return dateutil.get_today();}else if((df["default"]||"").toLowerCase()==="now"){return dateutil.now_datetime();}else if(df["default"][0]===":"){var boot_doc=frappe.model.get_default_from_boot_docs(df,doc,parent_doc);var is_allowed_boot_doc=!has_user_permissions||user_permissions[df.options].indexOf(boot_doc)!==-1;if(is_allowed_boot_doc){return frappe.model.get_default_from_boot_docs(df,doc,parent_doc);}}
var is_allowed_default=!has_user_permissions||user_permissions[df.options].indexOf(df["default"])!==-1;if(df.fieldtype!=="Link"||df.options==="User"||is_allowed_default){return df["default"];}}else if(df.fieldtype=="Time"){return dateutil.now_time();}},get_default_from_boot_docs:function(df,doc,parent_doc){if(frappe.get_list(df["default"]).length>0){var ref_fieldname=df["default"].slice(1).toLowerCase().replace(" ","_");var ref_value=parent_doc?parent_doc[ref_fieldname]:frappe.defaults.get_user_default(ref_fieldname);var ref_doc=ref_value?frappe.get_doc(df["default"],ref_value):null;if(ref_doc&&ref_doc[df.fieldname]){return ref_doc[df.fieldname];}}},add_child:function(parent_doc,doctype,parentfield,idx){idx=idx?idx-0.1:(parent_doc[parentfield]||[]).length+1;var child=frappe.model.get_new_doc(doctype,parent_doc,parentfield);child.idx=idx;if(idx!==cint(idx)){var sorted=parent_doc[parentfield].sort(function(a,b){return a.idx-b.idx;});for(var i=0,j=sorted.length;i<j;i++){var d=sorted[i];d.idx=i+1;}}
if(cur_frm&&cur_frm.doc==parent_doc)cur_frm.dirty();return child;},copy_doc:function(doc,from_amend,parent_doc,parentfield){var no_copy_list=['name','amended_from','amendment_date','cancel_reason'];var newdoc=frappe.model.get_new_doc(doc.doctype,parent_doc,parentfield);for(var key in doc){var df=frappe.meta.get_docfield(doc.doctype,key);if(df&&key.substr(0,2)!='__'&&!in_list(no_copy_list,key)&&!(df&&(!from_amend&&cint(df.no_copy)==1))){var value=doc[key]||[];if(df.fieldtype==="Table"){for(var i=0,j=value.length;i<j;i++){var d=value[i];frappe.model.copy_doc(d,from_amend,newdoc,df.fieldname);}}else{newdoc[key]=doc[key];}}}
newdoc.__islocal=1;newdoc.docstatus=0;newdoc.owner=user;newdoc.creation='';newdoc.modified_by=user;newdoc.modified='';return newdoc;},open_mapped_doc:function(opts){if(opts.frm&&opts.frm.doc.__unsaved){frappe.throw(__("You have unsaved changes in this form. Please save before you continue."));}else if(!opts.source_name&&opts.frm){opts.source_name=opts.frm.doc.name;}
return frappe.call({type:"GET",method:opts.method,args:{"source_name":opts.source_name},callback:function(r){if(!r.exc){var doc=frappe.model.sync(r.message);frappe.set_route("Form",r.message.doctype,r.message.name);}}})},map_current_doc:function(opts){if(opts.get_query_filters){opts.get_query=function(){return{filters:opts.get_query_filters};}}
var _map=function(){return frappe.call({type:"GET",method:opts.method,args:{"source_name":opts.source_name,"target_doc":cur_frm.doc},callback:function(r){if(!r.exc){var doc=frappe.model.sync(r.message);cur_frm.refresh();}}});}
if(opts.source_doctype){var d=new frappe.ui.Dialog({title:__("Get From ")+__(opts.source_doctype),fields:[{"fieldtype":"Link","label":__(opts.source_doctype),"fieldname":opts.source_doctype,"options":opts.source_doctype,"get_query":opts.get_query,reqd:1},{"fieldtype":"Button","label":__("Get"),click:function(){var values=d.get_values();if(!values)
return;opts.source_name=values[opts.source_doctype];d.hide();_map();}}]})
d.show();}else if(opts.source_name){_map();}}});frappe.provide("frappe.perm");var READ="read",WRITE="write",CREATE="create",DELETE="delete";var SUBMIT="submit",CANCEL="cancel",AMEND="amend";$.extend(frappe.perm,{rights:["read","write","create","delete","submit","cancel","amend","report","import","export","print","email","share","set_user_permissions"],doctype_perm:{},has_perm:function(doctype,permlevel,ptype,doc){if(!permlevel)permlevel=0;if(!frappe.perm.doctype_perm[doctype]){frappe.perm.doctype_perm[doctype]=frappe.perm.get_perm(doctype);}
var perms=frappe.perm.doctype_perm[doctype];if(!perms)
return false;if(!perms[permlevel])
return false;var perm=!!perms[permlevel][ptype];if(permlevel===0&&perm&&doc){var docinfo=frappe.model.get_docinfo(doctype,doc.name);if(docinfo&&!docinfo.permissions[ptype])
perm=false;}
return perm;},get_perm:function(doctype,doc){var perm=[{read:0,apply_user_permissions:{}}];var meta=frappe.get_doc("DocType",doctype);if(!meta){return perm;}
if(user==="Administrator"||user_roles.indexOf("Administrator")!==-1){perm[0].read=1;}
frappe.perm.build_role_permissions(perm,meta);if(doc){var docinfo=frappe.model.get_docinfo(doctype,doc.name);if(docinfo){$.each(docinfo.permissions||[],function(ptype,val){perm[0][ptype]=val;});}
if(docinfo.shared){for(var i=0;i<docinfo.shared;i++){var s=docinfo.shared[i];if(s.user===user){perm[0]["read"]=s.read;perm[0]["write"]=s.write;perm[0]["share"]=s.share;}}}}
if(frappe.model.can_read(doctype)&&!perm[0].read){perm[0].read=1;}
return perm;},build_role_permissions:function(perm,meta){$.each(meta.permissions||[],function(i,p){if(user_roles.indexOf(p.role)!==-1){var permlevel=cint(p.permlevel);if(!perm[permlevel]){perm[permlevel]={};}
$.each(frappe.perm.rights,function(i,key){perm[permlevel][key]=perm[permlevel][key]||(p[key]||0);if(permlevel===0){var apply_user_permissions=perm[permlevel].apply_user_permissions;var current_value=(apply_user_permissions[key]===undefined?1:apply_user_permissions[key]);apply_user_permissions[key]=current_value&&cint(p.apply_user_permissions);}});if(permlevel===0&&cint(p.apply_user_permissions)&&p.user_permission_doctypes){var user_permission_doctypes=p.user_permission_doctypes?JSON.parse(p.user_permission_doctypes):null;if(user_permission_doctypes&&user_permission_doctypes.length){if(!perm[permlevel]["user_permission_doctypes"]){perm[permlevel]["user_permission_doctypes"]=[];}
perm[permlevel]["user_permission_doctypes"].push(user_permission_doctypes);}}}});$.each(perm[0],function(key,val){if(!val){delete perm[0][key];}});$.each(perm,function(i,v){if(v===undefined){perm[i]={};}});},get_match_rules:function(doctype,ptype){var me=this;var match_rules=[];if(!ptype)ptype="read";var perm=frappe.perm.get_perm(doctype);var apply_user_permissions=perm[0].apply_user_permissions;if(!apply_user_permissions[ptype]){return match_rules;}
var user_permissions=frappe.defaults.get_user_permissions();if(user_permissions&&!$.isEmptyObject(user_permissions)){var user_permission_doctypes=me.get_user_permission_doctypes(perm[0].user_permission_doctypes,user_permissions);$.each(user_permission_doctypes,function(i,doctypes){var rules={};var fields_to_check=frappe.meta.get_fields_to_check_permissions(doctype,null,doctypes);$.each(fields_to_check,function(i,df){rules[df.label]=user_permissions[df.options];});if(!$.isEmptyObject(rules)){match_rules.push(rules);}});}
return match_rules;},get_user_permission_doctypes:function(user_permission_doctypes,user_permissions){var out=[];if(user_permission_doctypes&&user_permission_doctypes.length){$.each(user_permission_doctypes,function(i,doctypes){var valid_doctypes=[];$.each(doctypes,function(i,d){if(user_permissions[d]){valid_doctypes.push(d);}});if(valid_doctypes.length){out.push(valid_doctypes);}});}else{out=[Object.keys(user_permissions)];}
if(out.length>1){var common=out[0];for(var i=1,l=out.length;i<l;i++){common=frappe.utils.intersection(common,out[i]);if(!common.length){break;}}
if(common.length){common.sort();for(var i=0,l=out.length;i<l;i++){var arr=[].concat(out).sort();if(JSON.stringify(common)===JSON.stringify(arr)){out=[common];break;}}}}
return out},get_field_display_status:function(df,doc,perm,explain){if(!doc){return(df&&cint(df.hidden))?"None":"Write";}
perm=perm||frappe.perm.get_perm(doc.doctype,doc);if(!df.permlevel)df.permlevel=0;var p=perm[df.permlevel];var status="None";if(p){if(p.write&&!df.disabled){status="Write";}else if(p.read){status="Read";}}
if(explain)console.log("By Permission:"+status);if(cint(df.hidden))status="None";if(explain)console.log("By Hidden:"+status);if(cint(df.hidden_due_to_dependency))status="None";if(explain)console.log("By Hidden Due To Dependency:"+status);if(status==="Write"&&cint(doc.docstatus)>0)status="Read";if(explain)console.log("By Submit:"+status);var allow_on_submit=df.fieldtype==="Table"?0:cint(df.allow_on_submit);if(status==="Read"&&allow_on_submit&&cint(doc.docstatus)===1&&p.write){status="Write";}
if(explain)console.log("By Allow on Submit:"+status);if(status==="Read"&&cur_frm&&cur_frm.state_fieldname){if(cint(cur_frm.read_only)||in_list(cur_frm.states.update_fields,df.fieldname)||df.fieldname==cur_frm.state_fieldname){status="Read";}}
if(explain)console.log("By Workflow:"+status);if(status==="Write"&&cint(df.read_only)){status="Read";}
if(explain)console.log("By Read Only:"+status);if(status==="Write"&&df.set_only_once&&!doc.__islocal){status="Read";}
if(explain)console.log("By Set Only Once:"+status);return status;},is_visible:function(df,doc,perm){if(typeof df==='string'){df=frappe.meta.get_docfield(doc.doctype,df,doc.parent||doc.name);}
var status=frappe.perm.get_field_display_status(df,doc,perm);return status==="None"?false:true;},});;frappe.provide("frappe.workflow");frappe.workflow={state_fields:{},workflows:{},setup:function(doctype){var wf=frappe.get_list("Workflow",{document_type:doctype});if(wf.length){frappe.workflow.workflows[doctype]=wf[0];frappe.workflow.state_fields[doctype]=wf[0].workflow_state_field;}else{frappe.workflow.state_fields[doctype]=null;}},get_state_fieldname:function(doctype){if(frappe.workflow.state_fields[doctype]===undefined){frappe.workflow.setup(doctype);}
return frappe.workflow.state_fields[doctype];},get_default_state:function(doctype){frappe.workflow.setup(doctype);return frappe.workflow.workflows[doctype].states[0].state;},get_transitions:function(doctype,state){frappe.workflow.setup(doctype);return frappe.get_children(frappe.workflow.workflows[doctype],"transitions",{state:state});},get_document_state:function(doctype,state){frappe.workflow.setup(doctype);return frappe.get_children(frappe.workflow.workflows[doctype],"states",{state:state})[0];},get_next_state:function(doctype,state,action){return frappe.get_children(frappe.workflow.workflows[doctype],"transitions",{state:state,action:action})[0].next_state;},is_read_only:function(doctype,name){var state_fieldname=frappe.workflow.get_state_fieldname(doctype);if(state_fieldname){if(!locals[doctype][name])
return false;if(locals[doctype][name].__islocal)
return false;var state=locals[doctype][name][state_fieldname]||frappe.workflow.get_default_state(doctype);var allow_edit=state?frappe.workflow.get_document_state(doctype,state).allow_edit:null;if(user_roles.indexOf(allow_edit)==-1){return true;}}
return false;},get_update_fields:function(doctype){var update_fields=$.unique($.map(frappe.workflow.workflows[doctype].states||[],function(d){return d.update_field;}));return update_fields;}};;frappe.user_info=function(uid){if(!uid)
uid=user;if(!(frappe.boot.user_info&&frappe.boot.user_info[uid])){var user_info={fullname:toTitle(uid.split("@")[0])||"Unknown"};}else{var user_info=frappe.boot.user_info[uid];}
user_info.abbr=get_abbr(user_info.fullname);return user_info;}
var get_abbr=function(txt,max_length){if(!txt)return"";var abbr="";$.each(txt.split(" "),function(i,w){if(abbr.length>=(max_length||2)){return false;}else if(!w.trim().length){return true;}
abbr+=w.trim()[0];});return abbr||"?";}
frappe.avatar=function(user,css_class,title){var image=frappe.utils.get_file_link(frappe.user_info(user).image);if(!title)title=frappe.user_info(user).fullname;return repl('<span class="avatar %(css_class)s" title="%(title)s">\
  <img src="%(image)s" alt="%(abbr)s"></span>',{image:image,title:title,abbr:frappe.user_info(user).abbr,css_class:css_class||"avatar-small"});}
frappe.gravatars={};frappe.get_gravatar=function(email_id){frappe.require("/assets/frappe/js/lib/md5.min.js");if(!frappe.gravatars[email_id]){frappe.gravatars[email_id]="https://secure.gravatar.com/avatar/"+md5(email_id)+"?d=retro";}
return frappe.gravatars[email_id];}
frappe.ui.set_user_background=function(src,selector,style){if(!selector)selector="#page-desktop";if(!style)style="Fill Screen";if(!src)src=frappe.boot.default_background_image;frappe.dom.set_style(repl('%(selector)s { \
  background: url("%(src)s") center center;\
  background-attachment: fixed; \
  %(style)s \
 }',{src:src,selector:selector,style:style==="Fill Screen"?"background-size: cover;":""}));}
frappe.provide('frappe.user');$.extend(frappe.user,{name:(frappe.boot?frappe.boot.user.name:'Guest'),full_name:function(uid){return uid===user?__("You"):frappe.user_info(uid).fullname;},image:function(uid){return frappe.user_info(uid).image;},abbr:function(uid){return frappe.user_info(uid).abbr;},has_role:function(rl){if(typeof rl=='string')
rl=[rl];for(var i in rl){if((frappe.boot?frappe.boot.user.roles:['Guest']).indexOf(rl[i])!=-1)
return true;}},get_desktop_items:function(global){var modules_list=null;if(!global){var user_list=frappe.defaults.get_default("_desktop_items");if(user_list&&user_list.length)
var modules_list=user_list;if(modules_list){$.each(frappe.modules,function(m,module){var module=frappe.get_module(m);if(modules_list.indexOf(m)===-1){modules_list.push(m);}});}}
if(!modules_list||!modules_list.length){modules_list=keys(frappe.modules).sort();}
if(frappe.boot.hidden_modules&&modules_list){var hidden_list=JSON.parse(frappe.boot.hidden_modules);var modules_list=$.map(modules_list,function(m){if(hidden_list.indexOf(m)==-1||frappe.modules[m].force_show)return m;else return null;});}
modules_list=$.map(modules_list,function(m){var type=frappe.modules[m]&&frappe.modules[m].type;var ret=null;switch(type){case"module":if(frappe.boot.user.allow_modules.indexOf(m)!=-1)
ret=m;break;case"page":if(frappe.boot.allowed_pages.indexOf(frappe.modules[m].link)!=-1)
ret=m;break;case"list":if(frappe.model.can_read(frappe.modules[m].doctype))
ret=m;break;case"view":ret=m;break;case"setup":if(frappe.user.has_role("System Manager")||frappe.user.has_role("Administrator"))
ret=m;break;default:ret=m;}
return ret;});return modules_list;},get_user_desktop_items:function(){if(!frappe.user.modules){var user_list=frappe.defaults.get_default("_user_desktop_items");if(!user_list){user_list=frappe.user.get_desktop_items();}
user_list=$.map(user_list,function(m){if(frappe.boot.user.block_modules&&frappe.boot.user.block_modules.indexOf(m)!==-1){return null;}else{return m;}});frappe.user.modules=user_list;}
return frappe.user.modules;},is_report_manager:function(){return frappe.user.has_role(['Administrator','System Manager','Report Manager']);},});frappe.session_alive=true;$(document).bind('mousemove',function(){if(frappe.session_alive===false){$(document).trigger("session_alive");}
frappe.session_alive=true;if(frappe.session_alive_timeout)
clearTimeout(frappe.session_alive_timeout);frappe.session_alive_timeout=setTimeout('frappe.session_alive=false;',30000);});function prettyDate(time,mini){if(moment){if(frappe.boot){var user_timezone=frappe.boot.user.time_zone;var system_timezone=sys_defaults.time_zone;var zones=(frappe.boot.timezone_info||{}).zones||{};}
if(frappe.boot&&user_timezone&&(user_timezone!=system_timezone)&&zones[user_timezone]&&zones[system_timezone]){var ret=moment.tz(time,sys_defaults.time_zone).tz(frappe.boot.user.time_zone).fromNow(mini);}else{var ret=moment(time).fromNow(mini);}
if(mini){if(ret==="a few seconds"){ret="now";}else{var parts=ret.split(" ");if(parts[0]==="a"||parts[0]==="an"){parts[0]=1;}
ret=parts[0]+" "+parts[1].substr(0,1);}}
return ret;}else{if(!time)return''
var date=time;if(typeof(time)=="string")
date=new Date((time||"").replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\.[0-9]*/,""));var diff=(((new Date()).getTime()-date.getTime())/1000),day_diff=Math.floor(diff/86400);if(isNaN(day_diff)||day_diff<0)
return'';return when=day_diff==0&&(diff<60&&"just now"||diff<120&&"1 minute ago"||diff<3600&&Math.floor(diff/60)+" minutes ago"||diff<7200&&"1 hour ago"||diff<86400&&Math.floor(diff/3600)+" hours ago")||day_diff==1&&"Yesterday"||day_diff<7&&day_diff+" days ago"||day_diff<31&&Math.ceil(day_diff/7)+" weeks ago"||day_diff<365&&Math.ceil(day_diff/30)+" months ago"||"> "+Math.floor(day_diff/365)+" year(s) ago";}}
var comment_when=function(datetime,mini){var timestamp=frappe.datetime.str_to_user?frappe.datetime.str_to_user(datetime):datetime;return'<span class="frappe-timestamp '
+(mini?" mini":"")+'" data-timestamp="'+datetime
+'" title="'+timestamp+'">'
+prettyDate(datetime,mini)+'</span>';};frappe.provide("frappe.datetime");frappe.datetime.refresh_when=function(){if(jQuery){$(".frappe-timestamp").each(function(){$(this).html(prettyDate($(this).attr("data-timestamp"),$(this).hasClass("mini")));});}}
setInterval(function(){frappe.datetime.refresh_when()},60000);;frappe.provide('frappe.utils');frappe.utils={get_file_link:function(filename){filename=cstr(filename);if(frappe.utils.is_url(filename)){return filename;}else if(filename.indexOf("/")===-1){return"files/"+filename;}else{return filename;}},is_html:function(txt){if(!txt)return false;if(txt.indexOf("<br>")==-1&&txt.indexOf("<p")==-1&&txt.indexOf("<img")==-1&&txt.indexOf("<div")==-1){return false;}
return true;},strip_whitespace:function(html){return(html||"").replace(/<p>\s*<\/p>/g,"").replace(/<br>(\s*<br>\s*)+/g,"<br><br>");},strip_original_content:function(txt){var out=[],part=[],newline=txt.indexOf("<br>")===-1?"\n":"<br>";$.each(txt.split(newline),function(i,t){var tt=strip(t);if(tt&&(tt.substr(0,1)===">"||tt.substr(0,4)==="&gt;")){part.push(t);}else{out.concat(part);out.push(t);part=[];}});return out.join(newline);},is_url:function(txt){return txt.toLowerCase().substr(0,7)=='http://'||txt.toLowerCase().substr(0,8)=='https://'},remove_script_and_style:function(txt){if(!txt||(txt.indexOf("<script")===-1&&txt.indexOf("<style")===-1))return txt;return $("<div></div>").html(txt).find("script,noscript,style,title,meta").remove().end().html();},toggle_blockquote:function(txt){if(!txt)return txt;var content=$("<div></div>").html(txt)
content.find("blockquote").parent("blockquote").addClass("hidden").before('<p><a class="text-muted btn btn-default toggle-blockquote" style="padding: 2px 7px 0px; line-height: 1;"> \
     • • • \
    </a></p>');return content.html();},filter_dict:function(dict,filters){var ret=[];if(typeof filters=='string'){return[dict[filters]]}
$.each(dict,function(i,d){for(key in filters){if($.isArray(filters[key])){if(filters[key][0]=="in"){if(filters[key][1].indexOf(d[key])==-1)
return;}else if(filters[key][0]=="not in"){if(filters[key][1].indexOf(d[key])!=-1)
return;}else if(filters[key][0]=="<"){if(!(d[key]<filters[key]))return;}else if(filters[key][0]=="<="){if(!(d[key]<=filters[key]))return;}else if(filters[key][0]==">"){if(!(d[key]>filters[key]))return;}else if(filters[key][0]==">="){if(!(d[key]>=filters[key]))return;}}else{if(d[key]!=filters[key])return;}}
ret.push(d);});return ret;},comma_or:function(list){return frappe.utils.comma_sep(list," "+__("or")+" ");},comma_and:function(list){return frappe.utils.comma_sep(list," "+__("and")+" ");},comma_sep:function(list,sep){if(list instanceof Array){if(list.length==0){return"";}else if(list.length==1){return list[0];}else{return list.slice(0,list.length-1).join(", ")+sep+list.slice(-1)[0];}}else{return list;}},set_intro:function(me,wrapper,txt,append,indicator){if(!me.intro_area){me.intro_area=$('<div class="intro-area">').prependTo(wrapper);}
if(txt){if(!append){me.intro_area.empty();}
if(indicator){me.intro_area.html('<div class="indicator '+indicator+'">'+txt+'</div>')}else{me.intro_area.html('<p class="text-muted">'+txt+'</div>')}}else{me.intro_area.remove();me.intro_area=null;}},set_footnote:function(me,wrapper,txt){if(!me.footnote_area){me.footnote_area=$('<div class="text-muted footnote-area small">').appendTo(wrapper);}
if(txt){if(txt.search(/<p>/)==-1)txt='<p>'+txt+'</p>';me.footnote_area.html(txt);}else{me.footnote_area.remove();me.footnote_area=null;}},get_args_dict_from_url:function(txt){var args={};$.each(decodeURIComponent(txt).split("&"),function(i,arg){arg=arg.split("=");args[arg[0]]=arg[1]});return args;},get_url_from_dict:function(args){return $.map(args,function(val,key){if(val!==null)
return encodeURIComponent(key)+"="+encodeURIComponent(val);else
return null;}).join("&")||"";},validate_type:function(val,type){var regExp;switch(type){case"number":regExp=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":regExp=/^\d+$/;break;case"alphanum":regExp=/^\w+$/;break;case"email":regExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":regExp=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":regExp=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return false;break;}
return''!==val?regExp.test(val):false;},guess_style:function(text,default_style,_colour){var style=default_style||"default";var colour="darkgrey";if(text){if(has_words(["Pending","Review","Medium","Not Approved","Pending"],text)){style="warning";colour="orange";}else if(has_words(["Open","Urgent","High"],text)){style="danger";colour="red";}else if(has_words(["Closed","Finished","Converted","Completed","Confirmed","Approved","Yes","Active","Available","Paid"],text)){style="success";colour="green";}else if(has_words(["Submitted"],text)){style="info";colour="blue";}}
return _colour?colour:style;},guess_colour:function(text){return frappe.utils.guess_style(text,null,true);},sort:function(list,key,compare_type,reverse){if(!list||list.length<2)
return list||[];var sort_fn={"string":function(a,b){return cstr(a[key]).localeCompare(cstr(b[key]));},"number":function(a,b){return flt(a[key])-flt(b[key]);}};if(!compare_type)
compare_type=typeof list[0][key]==="string"?"string":"number";list.sort(sort_fn[compare_type]);if(reverse){list.reverse();}
return list;},unique:function(list){var dict={},arr=[];for(var i=0,l=list.length;i<l;i++){if(!dict.hasOwnProperty(list[i])){dict[list[i]]=null;arr.push(list[i]);}}
return arr;},remove_nulls:function(list){var new_list=[];for(var i=0,l=list.length;i<l;i++){if(!is_null(list[i])){new_list.push(list[i]);}}
return new_list;},all:function(lst){for(var i=0,l=lst.length;i<l;i++){if(!lst[i]){return false;}}
return true;},dict:function(keys,values){var out=[];$.each(values,function(row_idx,row){var new_row={};$.each(keys,function(key_idx,key){new_row[key]=row[key_idx];})
out.push(new_row);});return out;},sum:function(list){return list.reduce(function(previous_value,current_value){return flt(previous_value)+flt(current_value);},0.0);},intersection:function(a,b){var ai=0,bi=0;var result=new Array();a=([].concat(a)).sort();b=([].concat(b)).sort();while(ai<a.length&&bi<b.length){if(a[ai]<b[bi]){ai++;}
else if(a[ai]>b[bi]){bi++;}
else{result.push(a[ai]);ai++;bi++;}}
return result;},resize_image:function(reader,callback,max_width,max_height){var tempImg=new Image();if(!max_width)max_width=600;if(!max_height)max_height=400;tempImg.src=reader.result;tempImg.onload=function(){var tempW=tempImg.width;var tempH=tempImg.height;if(tempW>tempH){if(tempW>max_width){tempH*=max_width/tempW;tempW=max_width;}}else{if(tempH>max_height){tempW*=max_height/tempH;tempH=max_height;}}
var canvas=document.createElement('canvas');canvas.width=tempW;canvas.height=tempH;var ctx=canvas.getContext("2d");ctx.drawImage(this,0,0,tempW,tempH);var dataURL=canvas.toDataURL("image/jpeg");setTimeout(function(){callback(dataURL);},10);}},csv_to_array:function(strData,strDelimiter){strDelimiter=(strDelimiter||",");var objPattern=new RegExp(("(\\"+strDelimiter+"|\\r?\\n|\\r|^)"+"(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|"+"([^\"\\"+strDelimiter+"\\r\\n]*))"),"gi");var arrData=[[]];var arrMatches=null;while(arrMatches=objPattern.exec(strData)){var strMatchedDelimiter=arrMatches[1];if(strMatchedDelimiter.length&&strMatchedDelimiter!==strDelimiter){arrData.push([]);}
var strMatchedValue;if(arrMatches[2]){strMatchedValue=arrMatches[2].replace(new RegExp("\"\"","g"),"\"");}else{strMatchedValue=arrMatches[3];}
arrData[arrData.length-1].push(strMatchedValue);}
return(arrData);},warn_page_name_change:function(frm){frappe.msgprint("Note: Changing the Page Name will break previous URL to this page.");},};;frappe.provide("frappe.tools");frappe.tools.downloadify=function(data,roles,title){if(roles&&roles.length&&!has_common(roles,user_roles)){msgprint(__("Export not allowed. You need {0} role to export.",[frappe.utils.comma_or(roles)]));return;}
var _get_data=function(){return frappe.tools.to_csv(data);};var a=document.createElement('a');a.href='data:attachment/csv,'+encodeURIComponent(_get_data());a.target='_blank';a.download=title+'.csv';document.body.appendChild(a);a.click();$(a).remove();};frappe.markdown=function(txt){if(!frappe.md2html){frappe.require('assets/frappe/js/lib/markdown.js');frappe.md2html=new Showdown.converter();}
while(txt.substr(0,1)==="\n"){txt=txt.substr(1);}
var whitespace_len=0,first_line=txt.split("\n")[0];while([" ","\n","\t"].indexOf(first_line.substr(0,1))!==-1){whitespace_len++;first_line=first_line.substr(1);}
if(whitespace_len&&whitespace_len!=first_line.length){var txt1=[];$.each(txt.split("\n"),function(i,t){txt1.push(t.substr(whitespace_len));})
txt=txt1.join("\n");}
return frappe.md2html.makeHtml(txt);}
frappe.tools.to_csv=function(data){var res=[];$.each(data,function(i,row){row=$.map(row,function(col){return typeof(col)==="string"?('"'+col.replace(/"/g,'""')+'"'):col;});res.push(row.join(","));});return res.join("\n");};frappe.slickgrid_tools={get_view_data:function(columns,dataView,filter){var col_row=$.map(columns,function(v){return v.name;});var res=[];var col_map=$.map(columns,function(v){return v.field;});for(var i=0,len=dataView.getLength();i<len;i++){var d=dataView.getItem(i);var row=[];$.each(col_map,function(i,col){var val=d[col];if(val===null||val===undefined){val="";}
row.push(val);});if(!filter||filter(row,d)){res.push(row);}}
return[col_row].concat(res);},add_property_setter_on_resize:function(grid){grid.onColumnsResized.subscribe(function(e,args){$.each(grid.getColumns(),function(i,col){if(col.docfield&&col.previousWidth!=col.width&&!in_list(frappe.model.std_fields_list,col.docfield.fieldname)){frappe.call({method:"frappe.client.make_width_property_setter",args:{doc:{doctype:'Property Setter',doctype_or_field:'DocField',doc_type:col.docfield.parent,field_name:col.docfield.fieldname,property:'width',value:col.width,"__islocal":1}}});col.previousWidth=col.width;col.docfield.width=col.width;}});});}};;frappe.provide('frappe.datetime');moment.defaultFormat="YYYY-MM-DD";moment.defaultDatetimeFormat="YYYY-MM-DD HH:mm:ss"
frappe.provide("frappe.datetime");$.extend(frappe.datetime,{str_to_obj:function(d){return moment(d,moment.defaultDatetimeFormat).zone(moment().zone())._d;},obj_to_str:function(d){return moment(d).format();},obj_to_user:function(d){return moment(d).format(dateutil.get_user_fmt().toUpperCase());},get_diff:function(d1,d2){return moment(d1).diff(d2,"days");},get_hour_diff:function(d1,d2){return moment(d1).diff(d2,"hours");},get_day_diff:function(d1,d2){return moment(d1).diff(d2,"days");},add_days:function(d,days){return moment(d).add(days,"days").format();},add_months:function(d,months){return moment(d).add(months,"months").format();},month_start:function(){return moment().startOf("month").format();},month_end:function(){return moment().endOf("month").format();},get_user_fmt:function(){return sys_defaults.date_format||"yyyy-mm-dd";},str_to_user:function(val,no_time_str){if(!val)return"";var user_fmt=dateutil.get_user_fmt().toUpperCase();if(typeof val!=="string"||val.indexOf(" ")===-1){return moment(val).format(user_fmt);}else{return moment(val,"YYYY-MM-DD HH:mm:ss").format(user_fmt+" HH:mm:ss");}},now_datetime:function(){return moment().format("YYYY-MM-DD HH:mm:ss");},get_datetime_as_string:function(d){return moment(d).format("YYYY-MM-DD HH:mm:ss");},user_to_str:function(val,no_time_str){var user_fmt=dateutil.get_user_fmt().toUpperCase();var system_fmt="YYYY-MM-DD";if(val.indexOf(" ")!==-1){user_fmt+=" HH:mm:ss";system_fmt+=" HH:mm:ss";}
return moment(val,[user_fmt.replace("YYYY","YY"),user_fmt]).format(system_fmt);},user_to_obj:function(d){return dateutil.str_to_obj(dateutil.user_to_str(d));},global_date_format:function(d){var m=moment(d);if(m._f&&m._f.indexOf("HH")!==-1){return m.format("Do MMMM YYYY, h:mma")}else{return m.format('Do MMMM YYYY');}},get_today:function(){return moment().format();},nowdate:function(){return frappe.datetime.get_today();},now_time:function(){return moment().format("HH:mm:ss");},validate:function(d){return moment(d).isValid();},});var date=dateutil=frappe.datetime;var get_today=frappe.datetime.get_today;;if(!window.frappe)window.frappe={};function flt(v,decimals,number_format){if(v==null||v=='')return 0;if(typeof v!=="number"){v=v+"";if(v.indexOf(" ")!=-1){v=isNaN(parseFloat(v.split(" ")[0]))?v.split(" ").slice(1).join(" "):v;}
v=strip_number_groups(v,number_format);v=parseFloat(v);if(isNaN(v))
v=0;}
if(decimals!=null)
return _round(v,decimals);return v;}
function cint(v,def){if(v===true)
return 1;if(v===false)
return 0;v=v+'';if(v!=="0")v=lstrip(v,['0']);v=parseInt(v);if(isNaN(v))v=def===undefined?0:def;return v;}
function strip_number_groups(v,number_format){if(!number_format)number_format=get_number_format();var info=get_number_format_info(number_format);var group_regex=new RegExp(info.group_sep==="."?"\\.":info.group_sep,"g");v=v.replace(group_regex,"");if(info.decimal_str!=="."&&info.decimal_str!==""){var decimal_regex=new RegExp(info.decimal_str,"g");v=v.replace(decimal_regex,".");}
return v;}
frappe.number_format_info={"#,###.##":{decimal_str:".",group_sep:",",precision:2},"#.###,##":{decimal_str:",",group_sep:".",precision:2},"# ###.##":{decimal_str:".",group_sep:" ",precision:2},"# ###,##":{decimal_str:",",group_sep:" ",precision:2},"#'###.##":{decimal_str:".",group_sep:"'",precision:2},"#, ###.##":{decimal_str:".",group_sep:", ",precision:2},"#,##,###.##":{decimal_str:".",group_sep:",",precision:2},"#,###.###":{decimal_str:".",group_sep:",",precision:3},"#.###":{decimal_str:"",group_sep:".",precision:0},"#,###":{decimal_str:"",group_sep:",",precision:0},}
window.format_number=function(v,format,decimals){if(!format){format=get_number_format();if(decimals==null)decimals=cint(frappe.defaults.get_default("float_precision"))||3;}
info=get_number_format_info(format);if(decimals==null)decimals=info.precision;v=flt(v,decimals,format);if(v<0)var is_negative=true;v=Math.abs(v);v=v.toFixed(decimals);var part=v.split('.');var group_position=info.group_sep?3:0;if(group_position){var integer=part[0];var str='';var offset=integer.length%group_position;for(var i=integer.length;i>=0;i--){var l=replace_all(str,info.group_sep,"").length;if(format=="#,##,###.##"&&str.indexOf(",")!=-1){group_position=2;l+=1;}
str+=integer.charAt(i);if(l&&!((l+1)%group_position)&&i!=0){str+=info.group_sep;}}
part[0]=str.split("").reverse().join("");}
if(part[0]+""==""){part[0]="0";}
part[1]=(part[1]&&info.decimal_str)?(info.decimal_str+part[1]):"";return(is_negative?"-":"")+part[0]+part[1];};function format_currency(v,currency,decimals){var format=get_number_format(currency);var symbol=get_currency_symbol(currency);if(symbol)
return symbol+" "+format_number(v,format,decimals);else
return format_number(v,format,decimals);}
function get_currency_symbol(currency){if(frappe.boot){if(frappe.boot.sysdefaults.hide_currency_symbol=="Yes")
return null;if(!currency)
currency=frappe.boot.sysdefaults.currency;return frappe.model.get_value(":Currency",currency,"symbol")||currency;}else{return frappe.currency_symbols[currency];}}
var global_number_format=null;function get_number_format(currency){if(!global_number_format){global_number_format=frappe.boot.sysdefaults.number_format||frappe.model.get_value(":Currency",frappe.boot.sysdefaults.currency,"number_format")||"#,###.##";}
var number_format;if(currency&&frappe.boot){number_format=frappe.model.get_value(":Currency",currency,"number_format");}
return number_format||global_number_format;}
function get_number_format_info(format){var info=frappe.number_format_info[format];if(!info){info={decimal_str:".",group_sep:",",precision:2};}
return info;}
function _round(num,precision){var d=cint(precision);var m=Math.pow(10,d);var n=+(d?num*m:num).toFixed(8);var i=Math.floor(n),f=n-i;var r=(!precision&&f==0.5)?((i%2==0)?i:i+1):Math.round(n);return d?r/m:r;}
function roundNumber(num,precision){return _round(num,precision);}
function precision(fieldname,doc){if(!doc)doc=cur_frm.doc;var df=frappe.meta.get_docfield(doc.doctype,fieldname,doc.parent||doc.name);if(!df)console.log(fieldname+": could not find docfield in method precision()");return frappe.meta.get_field_precision(df,doc);}
var lstrip=function(s,chars){if(!chars)chars=['\n','\t',' '];var first_char=s.substr(0,1);while(in_list(chars,first_char)){var s=s.substr(1);first_char=s.substr(0,1);}
return s;}
function in_list(list,item){if(!list)return false;for(var i=0,j=list.length;i<j;i++)
if(list[i]==item)return true;return false;};frappe.templates["upload"] = '<div class="file-upload"> <div class="input-upload"> <input class="input-upload-file hidden" type="file" name="filedata" /> <button class="btn btn-default btn-sm btn-browse">{%= __("Browse") %}</button> </div> <div class="uploaded-filename hidden" style="width: calc(100% - 67px);"></div> <div class="web-link-wrapper" style="width: calc(100% - 67px);"> <span class="text-muted file-upload-or">{%= __("or") %}</span> <div class="input-link" style="width: calc(100% - 30px);"> <div class="input-group"> <div class="input-group-addon"> <span class="hidden-xs">{%= __("Web Link") %}</span> <i class="icon-link visible-xs"></i> </div> <input class="form-control" type="text" name="file_url" placeholder="{%= (opts.sample_url || "e.g. http://example.com/somefile.png") %}"/> </div> </div> </div> </div> </div> ';
frappe.upload={make:function(opts){if(!opts.args)opts.args={};var $upload=$(frappe.render_template("upload",{opts:opts})).appendTo(opts.parent);var $file_input=$upload.find(".input-upload-file");$upload.find(".btn-browse").on("click",function(){$file_input.click();});$file_input.on("change",function(){if(this.files.length>0){$upload.find(".web-link-wrapper").addClass("hidden");var $uploaded_file_display=$(repl('<div class="btn-group" role="group">\
     <button type="button" class="btn btn-default btn-sm \
      text-ellipsis uploaded-filename-display">%(filename)s\
     </button>\
     <button type="button" class="btn btn-default btn-sm uploaded-file-remove">\
      &times;</button>\
    </div>',{filename:this.files[0].name})).appendTo($upload.find(".uploaded-filename").removeClass("hidden").empty());$uploaded_file_display.find(".uploaded-filename-display").on("click",function(){$file_input.click();});$uploaded_file_display.find(".uploaded-file-remove").on("click",function(){$file_input.val("");$file_input.trigger("change");});}else{$upload.find(".uploaded-filename").addClass("hidden")
$upload.find(".web-link-wrapper").removeClass("hidden");}});if(!opts.btn){opts.btn=$('<button class="btn btn-default btn-sm">'+__("Attach")
+'</div>').appendTo($upload);}else{$(opts.btn).unbind("click");}
opts.btn.click(function(){if(opts.get_params){opts.args.params=opts.get_params();}
opts.args.file_url=$upload.find('[name="file_url"]').val();var fileobj=$upload.find(":file").get(0).files[0];frappe.upload.upload_file(fileobj,opts.args,opts);});},upload_file:function(fileobj,args,opts){if(!fileobj&&!args.file_url){if(opts.on_no_attach){opts.on_no_attach();}else{msgprint(__("Please attach a file or set a URL"));}
return;}
var dataurl=null;var _upload_file=function(){if(opts.on_attach){opts.on_attach(args,dataurl)}else{var msgbox=msgprint(__("Uploading..."));return frappe.call({"method":"uploadfile",args:args,callback:function(r){if(!r._server_messages)
msgbox.hide();if(r.exc){opts.onerror?opts.onerror(r):opts.callback(null,null,r);return;}
var attachment=r.message;opts.callback(attachment,r);$(document).trigger("upload_complete",attachment);}});}}
if(args.file_url){_upload_file();}else{var freader=new FileReader();freader.onload=function(){args.filename=fileobj.name;if(opts.options&&opts.options.toLowerCase()=="image"){if(!(/\.(gif|jpg|jpeg|tiff|png|svg)$/i).test(args.filename)){msgprint(__("Only image extensions (.gif, .jpg, .jpeg, .tiff, .png, .svg) allowed"));return;}}
if((opts.max_width||opts.max_height)&&(/\.(gif|jpg|jpeg|tiff|png)$/i).test(args.filename)){frappe.utils.resize_image(freader,function(_dataurl){dataurl=_dataurl;args.filedata=_dataurl.split(",")[1];console.log("resized!")
_upload_file();})}else{dataurl=freader.result;args.filedata=freader.result.split(",")[1];_upload_file();}};freader.readAsDataURL(fileobj);}},get_string:function(dataURI){var parts=dataURI.split(',');if(parts[0].indexOf(":")===-1){var a=parts[2];}else{var a=parts[1];}
return atob(a);}};frappe.ui.Tree=Class.extend({init:function(args){$.extend(this,args);this.nodes={};this.$w=$('<div class="tree">').appendTo(this.parent);this.rootnode=new frappe.ui.TreeNode({tree:this,parent:this.$w,label:this.label,parent_label:null,expandable:true,root:true,data:{value:this.label,expandable:true}});this.rootnode.toggle();},get_selected_node:function(){return this.selected_node;},toggle:function(){this.get_selected_node().toggle();}})
frappe.ui.TreeNode=Class.extend({init:function(args){$.extend(this,args);this.loaded=false;this.expanded=false;this.tree.nodes[this.label]=this;if(this.parent_label)
this.parent_node=this.tree.nodes[this.parent_label];this.make();this.setup_drag_drop();if(this.tree.onrender){this.tree.onrender(this);}},make:function(){var me=this;this.$a=$('<span class="tree-link">').click(function(event){me.tree.selected_node=me;me.tree.$w.find(".tree-link.active").removeClass("active");me.$a.addClass("active");if(me.tree.toolbar){me.show_toolbar();}
if(me.toggle_on_click){me.toggle();}
if(me.tree.click)
me.tree.click(this);}).bind('reload',function(){me.reload();}).data('label',this.label).data('node',this).appendTo(this.parent);this.$ul=$('<ul class="tree-children">').toggle(false).appendTo(this.parent);this.make_icon();},make_icon:function(){var me=this;var icon_html='<i class="icon-fixed-width octicon octicon-primitive-dot text-extra-muted"></i>';if(this.expandable){icon_html='<i class="icon-fixed-width icon-folder-close text-muted"></i>';}
$(icon_html+' <a class="tree-label grey h6">'+__(this.label)+"</a>").appendTo(this.$a);this.$a.find('i').click(function(){setTimeout(function(){me.toolbar.find(".btn-expand").click();},100);});},toggle:function(callback){if(this.expandable&&this.tree.method&&!this.loaded){this.load(callback)}else{this.toggle_node(callback);}},show_toolbar:function(){if(this.tree.cur_toolbar)
$(this.tree.cur_toolbar).toggle(false);if(!this.toolbar)
this.make_toolbar();this.tree.cur_toolbar=this.toolbar;this.toolbar.toggle(true);},make_toolbar:function(){var me=this;this.toolbar=$('<span class="tree-node-toolbar btn-group"></span>').insertAfter(this.$a);$.each(this.tree.toolbar,function(i,item){if(item.toggle_btn){item={condition:function(){return me.expandable;},get_label:function(){return me.expanded?__("Collapse"):__("Expand")},click:function(node,btn){node.toggle(function(){$(btn).html(node.expanded?__("Collapse"):__("Expand"));});},btnClass:"btn-expand"}}
if(item.condition){if(!item.condition(me))return;}
var label=item.get_label?item.get_label():item.label;var link=$("<button class='btn btn-default btn-xs'></button>").html(label).appendTo(me.toolbar).click(function(){item.click(me,this);return false;});if(item.btnClass)link.addClass(item.btnClass);})},setup_drag_drop:function(){var me=this;if(this.tree.drop&&this.parent_label){this.$ul.droppable({hoverClass:"tree-hover",greedy:true,drop:function(event,ui){event.preventDefault();var dragged_node=$(ui.draggable).find(".tree-link:first").data("node");var dropped_node=$(this).parent().find(".tree-link:first").data("node");me.tree.drop(dragged_node,dropped_node,$(ui.draggable),$(this));return false;}});}},addnode:function(data){var $li=$('<li class="tree-node">');if(this.tree.drop)$li.draggable({revert:true});return new frappe.ui.TreeNode({tree:this.tree,parent:$li.appendTo(this.$ul),parent_label:this.label,label:data.value,expandable:data.expandable,data:data});},toggle_node:function(callback){if(this.$ul){if(this.$ul.children().length){this.$ul.toggle(!this.expanded);}
this.$a.find('i').removeClass();if(!this.expanded){this.$a.find('i').addClass('icon-fixed-width icon-folder-open text-muted');}else{this.$a.find('i').addClass('icon-fixed-width icon-folder-close text-muted');}}
this.tree.$w.find('.selected').removeClass('selected');this.$a.toggleClass('selected');this.expanded=!this.expanded;if(callback)callback();},reload:function(){this.load();},load:function(callback){var me=this;args=$.extend(this.tree.args||{},{parent:this.data?this.data.value:null});return frappe.call({method:this.tree.method,args:args,callback:function(r){me.$ul.empty();if(r.message){$.each(r.message,function(i,v){node=me.addnode(v);node.$a.data('node-data',v).data('node',node);});}
if(!me.expanded)
me.toggle_node(callback);me.loaded=true;}})}});frappe.provide('frappe.pages');frappe.provide('frappe.views');frappe.views.Container=Class.extend({_intro:"Container contains pages inside `#container` and manages \
   page creation, switching",init:function(){this.container=$('#body_div').get(0);this.page=null;this.pagewidth=$('#body_div').width();this.pagemargin=50;var me=this;$(document).on("page-change",function(){$("body").attr("data-route",frappe.get_route_str());});$(document).bind('rename',function(event,dt,old_name,new_name){frappe.breadcrumbs.rename(dt,old_name,new_name);});},add_page:function(label){var page=$('<div class="content page-container"></div>').attr('id',"page-"+label).attr("data-page-route",label).toggle(false).appendTo(this.container).get(0);page.label=label;frappe.pages[label]=page;return page;},change_to:function(label){if(this.page&&this.page.label===label){$(this.page).trigger('show');return;}
var me=this;if(label.tagName){var page=label;}else{var page=frappe.pages[label];}
if(!page){console.log(__('Page not found')+': '+label);return;}
if(cur_dialog&&cur_dialog.display&&!cur_dialog.keep_open){cur_dialog.hide();}
if(this.page&&this.page!=page){$(this.page).toggle(false);$(this.page).trigger('hide');}
if(!this.page||this.page!=page){this.page=page;$(this.page).toggle(true);}
$(document).trigger("page-change");this.page._route=window.location.hash;$(this.page).trigger('show');scroll(0,0);frappe.breadcrumbs.update();return this.page;},});;frappe.breadcrumbs={all:{},preferred:{},set_doctype_module:function(doctype,module){localStorage["preferred_breadcrumbs"+":"+doctype]=module;},get_doctype_module:function(doctype){return localStorage["preferred_breadcrumbs"+":"+doctype];},add:function(module,doctype,type){frappe.breadcrumbs.all[frappe.get_route_str()]={module:module,doctype:doctype,type:type};frappe.breadcrumbs.update();},update:function(){var breadcrumbs=frappe.breadcrumbs.all[frappe.get_route_str()];var $breadcrumbs=$("#navbar-breadcrumbs").empty();if(!breadcrumbs){$("body").addClass("no-breadcrumbs");return;}
var from_module=frappe.breadcrumbs.get_doctype_module(breadcrumbs.doctype);if(from_module){breadcrumbs.module=from_module;}else if(frappe.breadcrumbs.preferred[breadcrumbs.doctype]){breadcrumbs.module=frappe.breadcrumbs.preferred[breadcrumbs.doctype];}
if(breadcrumbs.module&&breadcrumbs.module!="Desk"){if(in_list(["Core","Email","Custom","Workflow","Print"],breadcrumbs.module))
breadcrumbs.module="Setup";if(frappe.user.modules.indexOf(breadcrumbs.module)!==-1){var module_info=frappe.get_module(breadcrumbs.module),icon=module_info&&module_info.icon,label=module_info?module_info.label:breadcrumbs.module;if(module_info){$(repl('<li><a href="#Module/%(module)s">%(label)s</a></li>',{module:breadcrumbs.module,label:__(label)})).appendTo($breadcrumbs);}}}
if(breadcrumbs.doctype&&frappe.get_route()[0]==="Form"){if(breadcrumbs.doctype==="User"&&frappe.user.modules.indexOf("Setup")===-1){}else{$(repl('<li><a href="#List/%(doctype)s">%(label)s</a></li>',{doctype:breadcrumbs.doctype,label:__(breadcrumbs.doctype)})).appendTo($breadcrumbs);}}
$("body").removeClass("no-breadcrumbs");},rename:function(doctype,old_name,new_name){var old_route_str=["Form",doctype,old_name].join("/");var new_route_str=["Form",doctype,new_name].join("/");frappe.breadcrumbs[new_route_str]=frappe.breadcrumbs[old_route_str];delete frappe.breadcrumbs[old_route_str];}};frappe.provide('frappe.pages');frappe.provide('frappe.views');frappe.views.Factory=Class.extend({init:function(opts){$.extend(this,opts);},show:function(){var page_name=frappe.get_route_str(),me=this;if(frappe.pages[page_name]&&page_name.indexOf("Form/")===-1){frappe.container.change_to(frappe.pages[page_name]);}else{var route=frappe.get_route();if(route[1]){me.make(route);}else{frappe.show_not_found(route);}}},make_page:function(double_column){return frappe.make_page(double_column);}});frappe.make_page=function(double_column){var page_name=frappe.get_route_str(),page=frappe.container.add_page(page_name);frappe.ui.make_app_page({parent:page,single_column:!double_column});frappe.container.change_to(page_name);return page;};frappe.provide('frappe.views.pageview');frappe.provide("frappe.standard_pages");frappe.views.pageview={with_page:function(name,callback){if(in_list(keys(frappe.standard_pages),name)){if(!frappe.pages[name]){frappe.standard_pages[name]();}
callback();return;}
if((locals.Page&&locals.Page[name])||name==window.page_name){callback();}else if(localStorage["_page:"+name]&&frappe.boot.developer_mode!=1){frappe.model.sync(JSON.parse(localStorage["_page:"+name]));callback();}else{return frappe.call({method:'frappe.desk.desk_page.getpage',args:{'name':name},callback:function(r){localStorage["_page:"+name]=JSON.stringify(r.docs);callback();},freeze:true,});}},show:function(name){if(!name){name=(frappe.boot?frappe.boot.home_page:window.page_name);}
frappe.model.with_doctype("Page",function(){frappe.views.pageview.with_page(name,function(r){if(r&&r.exc){if(!r['403'])
frappe.show_not_found(name);}else if(!frappe.pages[name]){new frappe.views.Page(name);}
frappe.container.change_to(name);});});}}
frappe.views.Page=Class.extend({init:function(name,wrapper){this.name=name;var me=this;if(name==window.page_name){this.wrapper=document.getElementById('page-'+name);this.wrapper.label=document.title||window.page_name;this.wrapper.page_name=window.page_name;frappe.pages[window.page_name]=this.wrapper;}else{this.pagedoc=locals.Page[this.name];if(!this.pagedoc){frappe.show_not_found(name);return;}
this.wrapper=frappe.container.add_page(this.name);this.wrapper.label=this.pagedoc.title||this.pagedoc.name;this.wrapper.page_name=this.pagedoc.name;if(this.pagedoc.content)
this.wrapper.innerHTML=this.pagedoc.content;frappe.dom.eval(this.pagedoc.__script||this.pagedoc.script||'');frappe.dom.set_style(this.pagedoc.style||'');}
this.trigger_page_event('on_page_load');$(this.wrapper).on('show',function(){cur_frm=null;me.trigger_page_event('on_page_show');me.trigger_page_event('refresh');});},trigger_page_event:function(eventname){var me=this;if(me.wrapper[eventname]){me.wrapper[eventname](me.wrapper);}}})
frappe.show_not_found=function(page_name){frappe.show_message_page({page_name:page_name,message:__("Sorry! I could not find what you were looking for."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"});}
frappe.show_not_permitted=function(page_name){frappe.show_message_page({page_name:page_name,message:__("Sorry! You are not permitted to view this page."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg",});}
frappe.show_message_page=function(opts){if(!opts.page_name){opts.page_name=frappe.get_route_str();}
if(opts.icon){opts.img=repl('<span class="%(icon)s message-page-icon"></span> ',opts);}else if(opts.img){opts.img=repl('<img src="%(img)s" class="message-page-image">',opts);}
var page=frappe.pages[opts.page_name]||frappe.container.add_page(opts.page_name);$(page).html(repl('<div class="page message-page">\
   <div class="text-center message-page-content">\
    %(img)s\
    <p class="lead">%(message)s</p>\
    <a class="btn btn-default btn-sm btn-home" href="#">%(home)s</a>\
   </div>\
  </div>',{img:opts.img||"",message:opts.message||"",home:__("Home")}));frappe.container.change_to(opts.page_name);};frappe.search={setup:function(){var opts={autoFocus:true,minLength:0,source:function(request,response){var txt=strip(request.term);frappe.search.options=[];if(!txt){frappe.search.verbs[1]("");}else{var lower=strip(txt.toLowerCase());$.each(frappe.search.verbs,function(i,action){action(lower);});}
frappe.search.options.sort(function(a,b){return(a.match||"").length-(b.match||"").length;});frappe.search.add_help();response(frappe.search.options);},open:function(){frappe.search.autocomplete_open=true;},close:function(){frappe.search.autocomplete_open=false;},select:function(event,ui){if(ui.item.route_options){frappe.route_options=ui.item.route_options;}
if(ui.item.onclick){ui.item.onclick(ui.item.match);}else{frappe.set_route(ui.item.route);}
$(this).val('');return false;}};var render_item=function(ul,d){var html="<span>"+__(d.label||d.value)+"</span>";if(d.description&&d.value!==d.description){html+='<br><span class="text-muted">'+__(d.description)+'</span>';}
return $('<li></li>').data('item.autocomplete',d).html('<a><p>'+html+'</p></a>').appendTo(ul);};var open_recent=function(){if(!frappe.search.autocomplete_open){$(this).autocomplete("search","");}}
$("#navbar-search").on("focus",open_recent).autocomplete(opts).data('ui-autocomplete')._renderItem=render_item;$("#sidebar-search").on("focus",open_recent).autocomplete(opts).data('ui-autocomplete')._renderItem=render_item;frappe.search.make_page_title_map();frappe.search.setup_recent();},add_help:function(){frappe.search.options.push({label:__("Help on Search"),onclick:function(){var txt='<table class="table table-bordered">\
     <tr><td style="width: 50%">'+__("Make a new record")+'</td><td>'+
__("<b>new</b> <i>type of document</i>")+'</td></tr>\
     <tr><td>'+__("List a document type")+'</td><td>'+
__("<i>document type...</i>, e.g. <b>customer</b>")+'</td></tr>\
     <tr><td>'+__("Search in a document type")+'</td><td>'+
__("<i>text</i> <b>in</b> <i>document type</i>")+'</td></tr>\
     <tr><td>'+__("Open a module or tool")+'</td><td>'+
__("<i>module name...</i>")+'</td></tr>\
     <tr><td>'+__("Calculate")+'</td><td>'+
__("<i>e.g. <strong>(55 + 434) / 4</strong> or <strong>=Math.sin(Math.PI/2)</strong>...</i>")+'</td></tr>\
    </table>'
msgprint(txt,"Search Help");}});},make_page_title_map:function(){frappe.search.pages={};$.each(frappe.boot.page_info,function(name,p){frappe.search.pages[p.title]=p;p.name=name;});},setup_recent:function(){var recent=JSON.parse(frappe.boot.user.recent||"[]")||[];frappe.search.recent={};for(var i=0,l=recent.length;i<l;i++){var d=recent[i];if(!(d[0]&&d[1]))continue;if(!frappe.search.recent[d[0]]){frappe.search.recent[d[0]]=[];}
frappe.search.recent[d[0]].push(d[1]);}},find:function(list,txt,process){$.each(list,function(i,item){_item=__(item).toLowerCase().replace(/-/g," ");if(txt===_item||_item.indexOf(txt)!==-1){var option=process(item);option.match=item;frappe.search.options.push(option);}});}}
frappe.search.verbs=[function(txt){var route=frappe.get_route();if(route[0]==="List"&&txt.indexOf(" in")===-1){var meta=frappe.get_meta(frappe.container.page.doclistview.doctype);var search_field=meta.title_field||"name";var options={};options[search_field]=["like","%"+txt+"%"];frappe.search.options.push({label:__('Find {0} in {1}',["<b>"+txt+"</b>","<b>"+route[1]+"</b>"]),value:__('Find {0} in {1}',[txt,route[1]]),route_options:options,onclick:function(){frappe.container.page.doclistview.set_route_options();},match:txt});}},function(txt){var doctypes=frappe.utils.unique(keys(locals).concat(keys(frappe.search.recent)));for(var i in doctypes){var doctype=doctypes[i];if(doctype[0]!==":"&&!frappe.model.is_table(doctype)&&!in_list(frappe.boot.single_types,doctype)&&!in_list(["DocType","DocField","DocPerm","Page","Country","Currency","Page Role","Print Format"],doctype)){var values=frappe.utils.remove_nulls(frappe.utils.unique(keys(locals[doctype]).concat(frappe.search.recent[doctype]||[])));var ret=frappe.search.find(values,txt,function(match){return{label:__(doctype)+" <b>"+match+"</b>",value:__(doctype)+" "+match,route:["Form",doctype,match]}});}}},function(txt){var ret=false;if(txt.split(" ")[0]==="new"){frappe.search.find(frappe.boot.user.can_create,txt.substr(4),function(match){return{label:__("New {0}",["<b>"+match+"</b>"]),value:__("New {0}",[match]),onclick:function(){new_doc(match);}}});}},function(txt){frappe.search.find(frappe.boot.user.can_read,txt,function(match){if(in_list(frappe.boot.single_types,match)){return{label:__("{0}",["<b>"+__(match)+"</b>"]),value:__(match),route:["Form",match,match]}}else{return{label:__("{0} List",["<b>"+__(match)+"</b>"]),value:__("{0} List",[__(match)]),route:["List",match]}}});},function(txt){frappe.search.find(keys(frappe.search.pages),txt,function(match){return{label:__("Open {0}",["<b>"+__(match)+"</b>"]),value:__("Open {0}",[__(match)]),route:[frappe.search.pages[match].route||frappe.search.pages[match].name]}});},function(txt){frappe.search.find(keys(frappe.modules),txt,function(match){ret={label:__("Open {0}",["<b>"+__(match)+"</b>"]),value:__("Open {0}",[__(match)]),}
if(frappe.modules[match].link){ret.route=[frappe.modules[match].link];}else{ret.route=["Module",match];}
return ret;});},function(txt){if(in_list(txt.split(" "),"in")){parts=txt.split(" in ");frappe.search.find(frappe.boot.user.can_read,parts[1],function(match){return{label:__('Find {0} in {1}',["<b>"+__(parts[0])+"</b>","<b>"+__(match)+"</b>"]),value:__('Find {0} in {1}',[__(parts[0]),__(match)]),route_options:{"name":["like","%"+parts[0]+"%"]},route:["List",match]}});}},function(txt){var first=txt.substr(0,1);if(first==parseInt(first)||first==="("||first==="="){if(first==="="){txt=txt.substr(1);}
try{var val=eval(txt);var formatted_value=__('{0} = {1}',[txt,"<b>"+val+"</b>"]);frappe.search.options.push({label:formatted_value,value:__('{0} = {1}',[txt,val]),match:val,onclick:function(match){msgprint(formatted_value,"Result");}});}catch(e){}};},];;frappe.provide('frappe.ui.misc');frappe.ui.misc.about=function(){if(!frappe.ui.misc.about_dialog){var d=new frappe.ui.Dialog({title:__('Frappe Framework')})
$(d.body).html(repl("<div>\
  <p>"+__("Open Source Web Applications for the Web")+"</p>  \
  <p><i class='icon-globe icon-fixed-width'></i>\
    Website: <a href='https://frappe.io' target='_blank'>https://frappe.io</a></p>\
   <p><i class='icon-github icon-fixed-width'></i>\
   Source: <a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>\
  <hr>\
  <h4>Installed Apps</h4>\
  <div id='about-app-versions'>Loading versions...</div>\
  <hr>\
  <p class='text-muted'>&copy; 2014 Frappe Technologies Pvt. Ltd and contributers </p> \
  </div>",frappe.app));frappe.ui.misc.about_dialog=d;frappe.ui.misc.about_dialog.on_page_show=function(){if(!frappe.versions){frappe.call({method:"frappe.change_log.get_versions",callback:function(r){show_versions(r.message);}})}};var show_versions=function(versions){var $wrap=$("#about-app-versions").empty();$.each(keys(versions).sort(),function(i,key){var v=versions[key];$($.format('<p><b>{0}:</b> v{1}<br><span class="text-muted">{2}</span></p>',[v.title[0],v.version,v.description[0]])).appendTo($wrap);});frappe.versions=versions;}}
frappe.ui.misc.about_dialog.show();};frappe.templates["navbar"] = '<div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header"> <a class="navbar-brand toggle-sidebar visible-xs visible-sm"> <i class="octicon octicon-three-bars"></i> </a> <a class="navbar-brand navbar-home hidden-xs hidden-sm" href="#">Home</a> <ul class="nav navbar-nav" id="navbar-breadcrumbs"> </ul> </div> <div class="navbar-center text-ellipsis" style="display: none;"></div> <ul class="nav navbar-nav navbar-right visible-xs visible-sm"> <li> <a class="toggle-navbar-new-comments" title="{%= __("Unread Messages") %}"> <span class="navbar-new-comments">0</span></a> </li> </ul> <div class="hidden-xs hidden-sm"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" onclick="return false;"> <img src="{%= frappe.user_info().image %}" class="navbar-user-image" alt="{%= frappe.user.abbr() %}"> <span class="text-ellipsis toolbar-user-fullname">{%= frappe.user.full_name() %}</span> <b class="caret"></b></a> <ul class="dropdown-menu" id="toolbar-user" role="menu"> <li><a href="#Form/User/{%= encodeURIComponent(user) %}"> {%= __("My Settings") %}</a></li> <li><a href="#" onclick="return frappe.ui.toolbar.clear_cache();"> {%= __("Reload") %}</a></li> <li><a href="/index" target="_blank"> {%= __("View Website") %}</a></li> <li class="divider"></li> <li><a href="#" onclick="return frappe.ui.toolbar.show_about();"> {%= __("About") %}</a></li> <li><a href="https://frappe.io" target="_blank" data-link="docs"> {%= __("Documentation") %}</a></li> <li><a href="https://discuss.frappe.io" target="_blank"> {%= __("Forums") %}</a></li> <li><a href="https://github.com/frappe/erpnext/issues" target="_blank"> {%= __("Report an Issue") %}</a></li> <li class="divider"></li> <li><a href="#" onclick="return frappe.app.logout();"> {%= __("Logout") %}</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown" title="{%= __("Unread Messages") %}" onclick="return false;"><span class="navbar-new-comments">0</span></a> <ul class="dropdown-menu" id="navbar-notification" role="menu"> </ul> </li> </ul> <form class="navbar-form navbar-right" role="search" onsubmit="return false;"> <div class="form-group form-group-sm ui-front"> <input id="navbar-search" type="text" class="form-control" placeholder="{%= __("Search or type a command") %} {%= __("(Ctrl + G)") %}" aria-haspopup="true"> <span class="octicon octicon-search navbar-search-icon"></span> </div> </form> </div> </div> </div> ';
frappe.templates["offcanvas_left_sidebar"] = '<div class="main-menu"> <form role="search" onsubmit="return false;"> <div class="form-group form-group-sm"> <input id="sidebar-search" type="text" class="form-control" placeholder="{%= __("Search or type a command") %}" aria-haspopup="true"> <span class="octicon octicon-search navbar-search-icon"></span> </div> </form> <ul class="list-unstyled sidebar-menu"> <li class="divider"></li> <li><a href="#" class="strong">{%= __("Home") %}</a></li> </ul> <div class="form-sidebar" style="display: none"> </div> <div class="list-sidebar" style="display: none"> </div> <div class="module-sidebar" style="display: none"> </div> <ul class="desk-sidebar list-unstyled sidebar-menu" style="display: none"> <li class="divider"></li> <li><a href="#" onclick="return frappe.ui.toolbar.show_about();"> {%= __("About") %}</a></li> <li><a href="https://frappe.io" target="_blank" data-link="docs"> {%= __("Documentation") %}</a></li> <li><a href="https://discuss.frappe.io" target="_blank"> {%= __("Forums") %}</a></li> <li><a href="https://github.com/frappe/erpnext/issues" target="_blank"> {%= __("Report an Issue") %}</a></li> <li><a href="#" onclick="return frappe.ui.toolbar.clear_cache();"> {%= __("Reload") %}</a></li> </ul> </div> <div class="user-menu clearfix"> <div class="pull-left text-ellipsis" style="max-width: 75%;"> <a href="#Form/User/{%= encodeURIComponent(user) %}"> <img src="{%= frappe.user_info().image %}" class="navbar-user-image" alt="{%= frappe.user.abbr() %}"> <span>{%= frappe.user.full_name() %}</span> </a> </div> <div class="pull-right" style="margin-top: 4px;"> <a onclick="return frappe.app.logout();"><i class="octicon octicon-sign-out"></i></a> </div> </div> ';
frappe.provide("frappe.ui.toolbar");frappe.ui.toolbar.Toolbar=Class.extend({init:function(){var header=$('header').append(frappe.render_template("navbar",{}));var sidebar=$('.offcanvas .sidebar-left').append(frappe.render_template("offcanvas_left_sidebar",{}));header.find(".toggle-sidebar").on("click",function(){$(".offcanvas").toggleClass("active-left").removeClass("active-right");return false;});header.find(".toggle-navbar-new-comments").on("click",function(){$(".offcanvas").toggleClass("active-right").removeClass("active-left");return false;});$(document).on("notification-update",function(){frappe.ui.toolbar.update_notifications();});$('.dropdown-toggle').dropdown();$(document).trigger('toolbar_setup');$(document).on("page-change",function(){$("header .navbar .custom-menu").remove();});frappe.search.setup();},});$.extend(frappe.ui.toolbar,{add_dropdown_button:function(parent,label,click,icon){var menu=frappe.ui.toolbar.get_menu(parent);if(menu.find("li:not(.custom-menu)").length&&!menu.find(".divider").length){frappe.ui.toolbar.add_menu_divider(menu);}
return $('<li class="custom-menu"><a><i class="icon-fixed-width '
+icon+'"></i> '+label+'</a></li>').insertBefore(menu.find(".divider")).find("a").click(function(){click.apply(this);});},get_menu:function(label){return $("#navbar-"+label.toLowerCase());},add_menu_divider:function(menu){menu=typeof menu=="string"?frappe.ui.toolbar.get_menu(menu):menu;$('<li class="divider custom-menu"></li>').prependTo(menu);},})
frappe.ui.toolbar.update_notifications=function(){var total=0;var doctypes=keys(frappe.boot.notification_info.open_count_doctype).sort();var modules=keys(frappe.boot.notification_info.open_count_module).sort();var navbar_notification=$("#navbar-notification").empty();var sidebar_notification=$("#sidebar-notification").empty();$.each(modules,function(i,module){var count=frappe.boot.notification_info.open_count_module[module];if(count){var notification_row=repl('<li><a class="badge-hover" data-module="%(data_module)s">\
    <span class="badge pull-right">\
     %(count)s</span> \
    %(module)s </a></li>',{module:__(module),count:count,icon:frappe.modules[module].icon,data_module:module});navbar_notification.append($(notification_row));sidebar_notification.append($(notification_row));total+=count;}});if(total){var divider='<li class="divider"></li>';navbar_notification.append($(divider));sidebar_notification.append($(divider));}
$.each(doctypes,function(i,doctype){var count=frappe.boot.notification_info.open_count_doctype[doctype];if(count){var notification_row=repl('<li><a class="badge-hover" data-doctype="%(data_doctype)s">\
    <span class="badge pull-right">\
     %(count)s</span> \
    %(doctype)s </a></li>',{doctype:__(doctype),icon:frappe.boot.doctype_icons[doctype],count:count,data_doctype:doctype});navbar_notification.append($(notification_row));sidebar_notification.append($(notification_row));total+=count;}});$("#navbar-notification a, #sidebar-notification a").on("click",function(){var module=$(this).attr("data-module");if(module){frappe.set_route(frappe.modules[module].link);}else{var doctype=$(this).attr("data-doctype");if(doctype){frappe.views.show_open_count_list(this);}}
return false;});$(".navbar-new-comments").html(total).toggleClass("navbar-new-comments-true",total?true:false);}
frappe.ui.toolbar.clear_cache=function(){localStorage&&localStorage.clear();$c('frappe.sessions.clear',{},function(r,rt){if(!r.exc){show_alert(r.message);location.reload(true);}});return false;}
frappe.ui.toolbar.download_backup=function(){msgprint(__("Your download is being built, this may take a few moments..."));return $c('frappe.utils.backups.get_backup',{},function(r,rt){});return false;}
frappe.ui.toolbar.show_about=function(){try{frappe.ui.misc.about();}catch(e){console.log(e);}
return false;}
frappe.views.show_open_count_list=function(element){var doctype=$(element).attr("data-doctype");var condition=frappe.boot.notification_info.conditions[doctype];if(condition){frappe.route_options=condition;var route=frappe.get_route();if(route[0]==="List"&&route[1]===doctype){frappe.pages["List/"+doctype].doclistview.refresh();}else{frappe.set_route("List",doctype);}}};frappe.last_edited_communication={};frappe.standard_replies={};frappe.views.CommunicationComposer=Class.extend({init:function(opts){$.extend(this,opts);this.make();},make:function(){var me=this;this.dialog=new frappe.ui.Dialog({title:__("Add Reply")+": "+(this.subject||""),no_submit_on_enter:true,fields:[{label:__("To"),fieldtype:"Data",reqd:1,fieldname:"recipients"},{fieldtype:"Section Break"},{fieldtype:"Column Break"},{label:__("Subject"),fieldtype:"Data",reqd:1,fieldname:"subject"},{fieldtype:"Column Break"},{label:__("Standard Reply"),fieldtype:"Link",options:"Standard Reply",fieldname:"standard_reply"},{fieldtype:"Section Break"},{label:__("Message"),fieldtype:"Text Editor",reqd:1,fieldname:"content"},{fieldtype:"Section Break"},{fieldtype:"Column Break"},{label:__("Send As Email"),fieldtype:"Check",fieldname:"send_email"},{label:__("Communication Medium"),fieldtype:"Select",options:["Phone","Chat","Email","SMS","Visit","Other"],fieldname:"communication_medium"},{label:__("Sent or Received"),fieldtype:"Select",options:["Received","Sent"],fieldname:"sent_or_received"},{label:__("Attach Document Print"),fieldtype:"Check",fieldname:"attach_document_print"},{label:__("Select Print Format"),fieldtype:"Select",fieldname:"select_print_format"},{fieldtype:"Column Break"},{label:__("Select Attachments"),fieldtype:"HTML",fieldname:"select_attachments"}],primary_action_label:"Send",primary_action:function(){me.send_action();}});$(document).on("upload_complete",function(event,attachment){if(me.dialog.display){var wrapper=$(me.dialog.fields_dict.select_attachments.wrapper);var checked_items=wrapper.find('[data-file-name]:checked').map(function(){return $(this).attr("data-file-name");});me.setup_attach();checked_items.push(attachment.file_name);$.each(checked_items,function(i,filename){wrapper.find('[data-file-name="'+filename+'"]').prop("checked",true);});}})
this.prepare();this.dialog.show();},prepare:function(){this.setup_subject_and_recipients();this.setup_print();this.setup_attach();this.setup_email();this.setup_autosuggest();this.setup_last_edited_communication();this.setup_standard_reply();$(this.dialog.fields_dict.recipients.input).val(this.recipients||"").change();$(this.dialog.fields_dict.subject.input).val(this.subject||"").change();this.setup_earlier_reply();},setup_subject_and_recipients:function(){this.subject=this.subject||"";this.recipients=this.frm&&this.frm.comments.get_recipient();if(!this.subject&&this.frm){var last=this.frm.comments.get_last_email();if(last){this.subject=last.subject;if(!this.recipients){this.recipients=last.comment_by;}
if(strip(this.subject.toLowerCase().split(":")[0])!="re"){this.subject="Re: "+this.subject;}}}},setup_standard_reply:function(){var me=this;this.dialog.get_input("standard_reply").on("change",function(){var standard_reply=$(this).val();var prepend_reply=function(){var content_field=me.dialog.fields_dict.content;var content=content_field.get_value()||"";content_field.set_input(frappe.standard_replies[standard_reply]
+"<br><br>"+content);}
if(frappe.standard_replies[standard_reply]){prepend_reply();}else{$.ajax({url:"/api/resource/Standard Reply/"+standard_reply,statusCode:{200:function(data){frappe.standard_replies[standard_reply]=data.data.response;prepend_reply();}}});}});},setup_last_edited_communication:function(){var me=this;this.dialog.onhide=function(){if(cur_frm&&cur_frm.docname){if(!frappe.last_edited_communication[cur_frm.doctype]){frappe.last_edited_communication[cur_frm.doctype]={};}
frappe.last_edited_communication[cur_frm.doctype][cur_frm.docname]={recipients:me.dialog.get_value("recipients"),subject:me.dialog.get_value("subject"),content:me.dialog.get_value("content"),}}}
this.dialog.on_page_show=function(){if(cur_frm&&cur_frm.docname&&!me.txt&&(frappe.last_edited_communication[cur_frm.doctype]||{})[cur_frm.docname]){c=frappe.last_edited_communication[cur_frm.doctype][cur_frm.docname];me.dialog.set_value("subject",c.subject||"");me.dialog.set_value("recipients",c.recipients||"");me.dialog.set_value("content",c.content||"");}}},setup_print:function(){var fields=this.dialog.fields_dict;$(fields.attach_document_print.input).click(function(){$(fields.select_print_format.wrapper).toggle($(this).prop("checked"));});$(fields.select_print_format.wrapper).toggle(false);if(cur_frm){$(fields.select_print_format.input).empty().add_options(cur_frm.print_preview.print_formats).val(cur_frm.print_preview.print_formats[0]);}else{$(fields.attach_document_print.wrapper).toggle(false);}},setup_attach:function(){if(!cur_frm)return;var fields=this.dialog.fields_dict;var attach=$(fields.select_attachments.wrapper);var files=cur_frm.get_files();if(files.length){$("<h6 class='text-muted' style='margin-top: 12px;'>"
+__("Add Attachments")+"</h6>").appendTo(attach.empty());$.each(files,function(i,f){if(!f.file_name)return;$(repl('<p class="checkbox">'
+'<label><span><input type="checkbox" data-file-name="%(name)s"></input></span>'
+'<span class="small">%(file_name)s</span>'
+' <a href="%(file_url)s" target="_blank" class="text-muted small">'
+'<i class="icon-share" style="vertical-align: middle; margin-left: 3px;"></i>'
+'</label></p>',f)).appendTo(attach)});}},setup_email:function(){var me=this;var fields=this.dialog.fields_dict;if(this.attach_document_print){$(fields.attach_document_print.input).click();$(fields.select_print_format.wrapper).toggle(true);}
$(fields.send_email.input).prop("checked",true)
$(fields.send_email.input).click(function(){$(fields.communication_medium.wrapper).toggle(!!!$(this).prop("checked"));$(fields.sent_or_received.wrapper).toggle(!!!$(this).prop("checked"));me.dialog.get_primary_btn().html($(this).prop("checked")?"Send":"Add Communication");});$(fields.communication_medium.wrapper).toggle(false);$(fields.sent_or_received.wrapper).toggle(false);},send_action:function(){var me=this,form_values=me.dialog.get_values(),btn=me.dialog.get_primary_btn();if(!form_values)return;var selected_attachments=$.map($(me.dialog.wrapper).find("[data-file-name]:checked"),function(element){return $(element).attr("data-file-name");})
if(form_values.attach_document_print){if(cur_frm.print_preview.is_old_style(form_values.select_print_format||"")){cur_frm.print_preview.with_old_style({format:form_values.select_print_format,callback:function(print_html){me.send_email(btn,form_values,selected_attachments,print_html);}});}else{me.send_email(btn,form_values,selected_attachments,null,form_values.select_print_format||"");}}else{me.send_email(btn,form_values,selected_attachments);}},send_email:function(btn,form_values,selected_attachments,print_html,print_format){var me=this;if(!form_values.attach_document_print){print_html=null;print_format=null;}
if(form_values.send_email){if(cur_frm&&!frappe.model.can_email(me.doc.doctype,cur_frm)){msgprint(__("You are not allowed to send emails related to this document"));return;}
form_values.communication_medium="Email";form_values.sent_or_received="Sent";};return frappe.call({method:"frappe.core.doctype.communication.communication.make",args:{recipients:form_values.recipients,subject:form_values.subject,content:form_values.content,doctype:me.doc.doctype,name:me.doc.name,send_email:form_values.send_email,print_html:print_html,print_format:print_format,communication_medium:form_values.communication_medium,sent_or_received:form_values.sent_or_received,attachments:selected_attachments},btn:btn,callback:function(r){if(!r.exc){if(form_values.send_email)
msgprint(__("Email sent to {0}",[form_values.recipients]));me.dialog.hide();if(cur_frm){if(cur_frm.docname&&(frappe.last_edited_communication[cur_frm.doctype]||{})[cur_frm.docname]){delete frappe.last_edited_communication[cur_frm.doctype][cur_frm.docname];}
cur_frm.comments.input.val("");cur_frm.reload_doc();}}else{msgprint(__("There were errors while sending email. Please try again."));}}});},setup_earlier_reply:function(){var fields=this.dialog.fields_dict,signature=frappe.boot.user.email_signature||"",last_email=this.frm&&this.frm.comments.get_last_email(true);if(!frappe.utils.is_html(signature)){signature=signature.replace(/\n/g,"<br>");}
if(this.txt){this.message=this.txt+(this.message?("<br><br>"+this.message):"");}
if(this.real_name){this.message='<p>'+__('Dear')+' '
+this.real_name+",</p>"+(this.message||"");}
var reply=(this.message||"")
+(signature?("<br>"+signature):"");if(last_email){var last_email_content=frappe.markdown(last_email.original_comment||last_email.comment);fields.content.set_input(reply
+"<br><!-- original-reply --><br>"
+'<blockquote>'+'<p>'+__("On {0}, {1} wrote:",[frappe.datetime.global_date_format(last_email.creation),last_email.comment_by])+'</p>'+
last_email_content+'<blockquote>');}else{fields.content.set_input(reply);}},setup_autosuggest:function(){var me=this;function split(val){return val.split(/,\s*/);}
function extractLast(term){return split(term).pop();}
$(this.dialog.fields_dict.recipients.input).bind("keydown",function(event){if(event.keyCode===$.ui.keyCode.TAB&&$(this).data("autocomplete").menu.active){event.preventDefault();}}).autocomplete({source:function(request,response){return frappe.call({method:'frappe.email.get_contact_list',args:{'select':"email_id",'from':"Contact",'where':"email_id",'txt':extractLast(request.term).value||'%'},quiet:true,callback:function(r){response($.ui.autocomplete.filter(r.cl||[],extractLast(request.term)));}});},appendTo:this.dialog.$wrapper,focus:function(){return false;},select:function(event,ui){var terms=split(this.value);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return false;}});}});;frappe.templates["change_log"] = '{% for (var i=0, l=change_log.length; i < l; i++) { var app_info = change_log[0]; %} {% if (i > 0) { %} <hr> {% } %} <div class="text-left app-change-log"> <h2 style="margin-top: 10px;">{%= app_info.title %} <small>{%= __("updated to {0}", [app_info.version]) %}</small> {% if (app_info.title != app_info.description) { %} <br> <small>{%= app_info.description %}</small> {% } %} </h2> {% for (var x=0, y=app_info.change_log.length; x < y; x++) { var version_info = app_info.change_log[i]; %} <hr> <h4>{%= __("New in version {0}", [version_info[0]]) %}</h4> <p>{%= frappe.markdown(version_info[1]) %}</p> {% } %} </div> {% } %} ';
$(document).ready(function(){frappe.assets.check();frappe.provide('frappe.app');$.extend(frappe.app,new frappe.Application());});frappe.Application=Class.extend({init:function(){this.load_startup();},load_startup:function(){this.startup();},startup:function(){this.load_bootinfo();this.make_nav_bar();this.set_favicon();this.setup_keyboard_shortcuts();if(frappe.boot){if(localStorage.getItem("session_lost_route")){window.location.hash=localStorage.getItem("session_lost_route");localStorage.removeItem("session_lost_route");}}
this.make_page_container();frappe.route();$(document).trigger('startup');this.start_notification_updates();$(document).trigger('app_ready');if(frappe.boot.messages){frappe.msgprint(frappe.boot.messages);}
if(frappe.boot.change_log&&frappe.boot.change_log.length){this.show_change_log();}},load_bootinfo:function(){if(frappe.boot){frappe.modules=frappe.boot.modules;frappe.model.sync(frappe.boot.docs);this.check_metadata_cache_status();this.set_globals();this.sync_pages();if(frappe.boot.timezone_info){moment.tz.add(frappe.boot.timezone_info);}
if(frappe.boot.print_css){frappe.dom.set_style(frappe.boot.print_css)}
frappe.user.get_user_desktop_items()}else{this.set_as_guest();}},check_metadata_cache_status:function(){if(frappe.boot.metadata_version!=localStorage.metadata_version){localStorage.clear();console.log("Cleared Cache - New Metadata");frappe.assets.init_local_storage();}},start_notification_updates:function(){var me=this;setInterval(function(){me.refresh_notifications();},30000);$(document).trigger("notification-update");$(document).on("session_alive",function(){me.refresh_notifications();})},refresh_notifications:function(){var me=this;if(frappe.session_alive){return frappe.call({method:"frappe.desk.notifications.get_notifications",callback:function(r){if(r.message){$.extend(frappe.boot.notification_info,r.message);$(document).trigger("notification-update");me.update_notification_count_in_modules();}},no_spinner:true});}},update_notification_count_in_modules:function(){$.each(frappe.boot.notification_info.open_count_doctype,function(doctype,count){if(count){$('.open-notification[data-doctype="'+doctype+'"]').removeClass("hide").html(count);}else{$('.open-notification[data-doctype="'+doctype+'"]').addClass("hide");}});},set_globals:function(){user=frappe.boot.user.name;user_fullname=frappe.user_info(user).fullname;user_defaults=frappe.boot.user.defaults;user_roles=frappe.boot.user.roles;user_email=frappe.boot.user.email;sys_defaults=frappe.boot.sysdefaults;},sync_pages:function(){if(localStorage["page_info"]){frappe.boot.allowed_pages=[];page_info=JSON.parse(localStorage["page_info"]);$.each(frappe.boot.page_info,function(name,p){if(!page_info[name]||(page_info[name].modified!=p.modified)){delete localStorage["_page:"+name];}
frappe.boot.allowed_pages.push(name);});}else{frappe.boot.allowed_pages=keys(frappe.boot.page_info);}
localStorage["page_info"]=JSON.stringify(frappe.boot.page_info);},set_as_guest:function(){user={name:'Guest'};user='Guest';user_fullname='Guest';user_defaults={};user_roles=['Guest'];user_email='';sys_defaults={};},make_page_container:function(){if($("#body_div").length){$(".splash").remove();frappe.temp_container=$("<div id='temp-container' style='display: none;'>").appendTo("body");frappe.container=new frappe.views.Container();}},make_nav_bar:function(){if(frappe.boot){frappe.frappe_toolbar=new frappe.ui.toolbar.Toolbar();}
$(".offcanvas .sidebar").on("click","a",function(){$(".offcanvas").removeClass("active-left active-right");});$(".offcanvas-main-section-overlay").on("click",function(){$(".offcanvas").removeClass("active-left active-right");});},logout:function(){var me=this;me.logged_out=true;return frappe.call({method:'logout',callback:function(r){if(r.exc){console.log(r.exc);return;}
me.redirect_to_login();}})},redirect_to_login:function(){window.location.href='/';},set_favicon:function(){var link=$('link[type="image/x-icon"]').remove().attr("href");$('<link rel="shortcut icon" href="'+link+'" type="image/x-icon">').appendTo("head");$('<link rel="icon" href="'+link+'" type="image/x-icon">').appendTo("head");},setup_keyboard_shortcuts:function(){$(document).keydown("meta+g ctrl+g",function(e){$("#navbar-search").focus()
return false;}).keydown("meta+s ctrl+s",function(e){e.preventDefault();if(cur_frm){cur_frm.save_or_update();}else if(frappe.container.page.save_action){frappe.container.page.save_action();}
return false;}).keydown("esc",function(e){var open_row=$(".grid-row-open");if(open_row.length){var grid_row=open_row.data("grid_row");grid_row.toggle_view(false);}
return false;}).keydown("ctrl+down meta+down",function(e){var open_row=$(".grid-row-open");if(open_row.length){var grid_row=open_row.data("grid_row");grid_row.toggle_view(false,function(){grid_row.open_next()});return false;}}).keydown("ctrl+up meta+up",function(e){var open_row=$(".grid-row-open");if(open_row.length){var grid_row=open_row.data("grid_row");grid_row.toggle_view(false,function(){grid_row.open_prev()});return false;}}).keydown("ctrl+n meta+n",function(e){var open_row=$(".grid-row-open");if(open_row.length){var grid_row=open_row.data("grid_row");grid_row.toggle_view(false,function(){grid_row.grid.add_new_row(grid_row.doc.idx,null,true);});return false;}}).keydown("ctrl+shift+r meta+shift+r",function(e){frappe.ui.toolbar.clear_cache();});},show_change_log:function(){var d=frappe.msgprint(frappe.render_template("change_log",{"change_log":frappe.boot.change_log}),__("Updated To New Version"));d.keep_open=true;d.custom_onhide=function(){frappe.call({"method":"frappe.change_log.update_last_known_versions"});};}});frappe.get_module=function(m){var module=frappe.modules[m];if(!module){return;}
module.name=m;if(module.type==="module"&&!module.link){module.link="Module/"+m;}
if(!module.link)module.link="";if(!module._id){module._id=module.link.toLowerCase().replace("/","-");}
if(!module.label){module.label=m;}
if(!module._label){module._label=__(module.label||module.name);}
return module;};;